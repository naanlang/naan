/*
 * naan.min.js
 *
 * Naan for NPM version 1.1.0+1 is released under the MIT License:
 * 
 * Copyright (c) 2017-2024 Zulch Laboratories, Inc.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice, including the next
 * paragraph, shall be included in all copies or substantial portions of the
 * Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */

(function(exports){

!function(n){n.LeemonBigIntegerLib=function(){for(var s=0,c=0,v=c+1,g="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_=!@#$%^&*()[]{}|;:,.<>/?`~ \\'\"+-",s=0;1<<s<1<<s+1;s++);v=(c=(1<<(s>>=1))-1)+1;var l=rn(1,1,1),a=new Array(0),e=a,i=a,u=a,r=a,f=a,h=a,d=a,M=a,w=a,o=a,y=a,A=a,b=a,m=a,I=a,k=a,p=a,x=a,E=a,P=a,S=a,B=a,L=a,N=a,R=a,T=a,_=a,q=a,O=a,U=a,z=a,C=a,D=a;function G(n){for(var t,r,e=new Array(n),f=0;f<n;f++)e[f]=0;for(e[0]=2,t=0;e[t]<n;){for(f=e[t]*e[t];f<n;f+=e[t])e[f]=1;for(e[++t]=e[t-1]+1;e[t]<n&&e[e[t]];e[t]++);}for(r=new Array(t),f=0;f<t;f++)r[f]=e[f];return r}function Y(n,t){return o.length!=n.length&&(o=on(n),y=on(n),A=on(n)),gn(A,t),Z(n,A)}function Z(n,t){var r,e,f,h;for(o.length!=n.length&&(o=on(n),y=on(n),A=on(n)),ln(A,t),ln(y,n),ln(o,n),un(y,-1),un(o,-1),r=f=0;r<y.length;r++)for(e=1;e<c;e<<=1)n[r]&e?(h=f<y.length+s?f:0,r=y.length,e=c):f++;if(h&&an(y,h),Pn(A,y,n),!en(A,1)&&!fn(A,o)){for(e=1;e<=h-1&&!fn(A,o);){if(pn(A,n),en(A,1))return 0;e++}if(!fn(A,o))return 0}return 1}function j(n){for(var t,r,e=n.length-1;0==n[e]&&0<e;e--);for(t=0,r=n[e];r;r>>=1,t++);return t+=s*e}function F(n,t){t=rn(0,(n.length>t?n.length:t)*s,0);return ln(t,n),t}function t(n,t){var r,e,f=rn(0,n,0);for(0==E.length&&(E=G(3e4)),D.length!=f.length&&(D=on(f));;){for(J(f,n,0),f[0]|=1,r=e=0;r<E.length&&E[r]<=3e4;r++)if(0==tn(f,E[r])&&!en(f,E[r])){e=1;break}for(r=0;r<t&&!e;r++){for(J(D,n,0);!X(f,D);)J(D,n,0);Z(f,D)||(e=1)}if(!e)return f}}function H(n){if(V(n)){for(r=n.length;0<r&&n[r-1]==c;r--);++r}else for(r=n.length;0<r&&!n[r-1];r--);for(var t=F(n,r),r=t.length;0<=--r;)t[r]=~t[r]&c;return An(t,l),t=xn(t,1)}function J(n,t,r){for(var e,f=0;f<n.length;f++)n[f]=0;for(e=Math.floor((t-1)/s)+1,f=0;f<e;f++)n[f]=Math.floor(Math.random()*(1<<s-1));n[e-1]&=(2<<(t-1)%s)-1,1==r&&(n[e-1]|=1<<(t-1)%s)}function K(n,t){var r,e,f,h,o,l,i,g,u;for(M.length!=n.length&&(M=on(n)),u=1;u;){for(u=0,r=1;r<t.length;r++)if(t[r]){u=1;break}if(!u)break;for(r=n.length;!n[r]&&0<=r;r--);for(e=n[r],f=t[r],l=o=0,i=h=1;f+l&&f+i&&(g=Math.floor((e+h)/(f+l)))==Math.floor((e+o)/(f+i));)a=h-g*l,h=l,l=a,a=o-g*i,o=i,i=a,a=e-g*f,e=f,f=a;o?(ln(M,n),Mn(n,t,h,o),Mn(t,M,i,l)):(In(n,t),ln(M,n),ln(n,t),ln(t,M))}if(0!=t[0])for(a=tn(n,t[0]),gn(n,t[0]),t[0]=a;t[0];)n[0]%=t[0],a=n[0],n[0]=t[0],t[0]=a}function Q(n,t){for(var r=1,e=0;;){if(1==n)return r;if(0==n)return 0;if(e-=r*Math.floor(t/n),1==(t%=n))return e;if(0==t)return 0;r-=e*Math.floor(n/t),n%=t}}function V(n){return n[n.length-1]==c}function W(n,t,r){for(var e=n.length,f=t.length,h=e+r<f?e+r:f,o=f-1-r;o<e&&0<=o;o++)if(0<n[o])return 1;for(o=e-1+r;o<f;o++)if(0<t[o])return 0;for(o=h-1;r<=o;o--){if(n[o-r]>t[o])return 1;if(n[o-r]<t[o])return 0}return 0}function X(n,t){for(var r=(n.length<t.length?n:t).length,e=n.length;e<t.length;e++)if(t[e])return 0;for(e=t.length;e<n.length;e++)if(n[e])return 1;for(e=r-1;0<=e;e--){if(n[e]>t[e])return 1;if(n[e]<t[e])return 0}return 0}function $(n,t,r,e){var f,h,o,l,i,g,u,a;for(ln(e,n),h=t.length;0==t[h-1];h--);for(a=t[h-1],u=0;a;u++)a>>=1;for(sn(t,u=s-u),sn(e,u),f=e.length;0==e[f-1]&&h<f;f--);for(gn(r,0);!W(t,e,f-h);)!function(n,t,r){var e,f,h,o;for(h=n.length<r+t.length?n.length:r+t.length,o=n.length,f=0,e=r;e<h;e++)f+=n[e]-t[e-r],n[e]=f&c,f>>=s;for(e=h;f&&e<o;e++)f+=n[e],n[e]=f&c,f>>=s}(e,t,f-h),r[f-h]++;for(o=f-1;h<=o;o--){for(e[o]==t[h-1]?r[o-h]=c:r[o-h]=Math.floor((e[o]*v+e[o-1])/t[h-1]);g=(i=(1<h?t[h-2]:0)*r[o-h])>>s,i&=c,g=(l=g+r[o-h]*t[h-1])>>s,l&=c,g==e[o]?l==e[o-1]?i>(1<o?e[o-2]:0):l>e[o-1]:g>e[o];)r[o-h]--;wn(e,t,-r[o-h],o-h),V(e)&&(function(n,t,r){var e,f,h,o;for(h=n.length<r+t.length?n.length:r+t.length,o=n.length,f=0,e=r;e<h;e++)f+=n[e]+t[e-r],n[e]=f&c,f>>=s;for(e=h;f&&e<o;e++)f+=n[e],n[e]=f&c,f>>=s}(e,t,o-h),r[o-h]--)}an(t,u),an(e,u)}function nn(n){for(var t,r=n.length,e=0,f=0;f<r;f++)(e+=n[f])<(t=0)&&(e+=(t=-(e>>s))*v),n[f]=e&c,e=(e>>s)-t}function tn(n,t){for(var r=0,e=n.length-1;0<=e;e--)r=(r*v+n[e])%t;return r}function rn(n,t,r){t=Math.ceil(t/s)+1;t=t<r?r:t;t=new Array(t);return gn(t,n),t}function en(n,t){var r;if(n[0]!=t)return 0;for(r=1;r<n.length;r++)if(n[r])return 0;return 1}function fn(n,t){for(var r=(n.length<t.length?n:t).length,e=0;e<r;e++)if(n[e]!=t[e])return 0;if(n.length>t.length){for(;e<n.length;e++)if(n[e])return 0}else for(;e<t.length;e++)if(t[e])return 0;return 1}function hn(n){for(var t=0;t<n.length;t++)if(n[t])return 0;return 1}function on(n){var t=new Array(n.length);return ln(t,n),t}function ln(n,t){for(var r=(n.length<t.length?n:t).length,e=0;e<r;e++)n[e]=t[e];if(t[t.length-1]==c)for(e=r;e<n.length;e++)n[e]=c;else for(e=r;e<n.length;e++)n[e]=0}function gn(n,t){for(var r=t,e=0;e<n.length;e++)n[e]=r&c,2147483647<r?r/=c+1:r>>=s}function un(n,t){var r,e,f,h;for(n[0]+=t,e=n.length,r=f=0;r<e;r++)if((f+=n[r])<(h=0)&&(f+=(h=-(f>>s))*v),n[r]=f&c,!(f=(f>>s)-h))return}function an(n,t){var r,e=Math.floor(t/s);if(e){for(r=0;r<n.length-e;r++)n[r]=n[r+e];for(;r<n.length;r++)n[r]=0;t%=s}for(r=0;r<n.length-1;r++)n[r]=c&(n[r+1]<<s-t|n[r]>>t);n[r]>>=t}function cn(n){for(var t=0;t<n.length-1;t++)n[t]=c&(n[t+1]<<s-1|n[t]>>1);n[t]=n[t]>>1|n[t]&v>>1}function sn(n,t){var r,e=Math.floor(t/s);if(e){for(r=n.length;e<=r;r--)n[r]=n[r-e];for(;0<=r;r--)n[r]=0;t%=s}if(t){for(r=n.length-1;0<r;r--)n[r]=c&(n[r]<<t|n[r-1]>>s-t);n[r]=c&n[r]<<t}}function vn(n,t){var r,e,f,h;if(t)for(e=n.length,r=f=0;r<e;r++)(f+=n[r]*t)<(h=0)&&(f+=(h=-(f>>s))*v),n[r]=f&c,f=(f>>s)-h}function dn(n,t){for(var r,e=0,f=n.length-1;0<=f;f--)r=e*v+n[f],n[f]=Math.floor(r/t),e=r%t;return e}function Mn(n,t,r,e){for(var f=(n.length<t.length?n:t).length,h=n.length,o=0,l=0;l<f;l++)o+=r*n[l]+e*t[l],n[l]=o&c,o>>=s;for(l=f;l<h;l++)o+=r*n[l],n[l]=o&c,o>>=s}function wn(n,t,r,e){for(var f=n.length<e+t.length?n.length:e+t.length,h=n.length,o=0,l=e;l<f;l++)o+=n[l]+r*t[l-e],n[l]=o&c,o>>=s;for(l=f;o&&l<h;l++)o+=n[l],n[l]=o&c,o>>=s}function yn(n,t){for(var r=(n.length<t.length?n:t).length,e=0,f=0;f<r;f++)e+=n[f]-t[f],n[f]=e&c,e>>=s;for(t[t.length-1]==c&&(e=e<0?0:1),f=r;e&&f<n.length;f++)e+=n[f],n[f]=e&c,e>>=s}function An(n,t){for(var r=(n.length<t.length?n:t).length,e=0,f=0;f<r;f++)e+=n[f]+t[f],n[f]=e&c,e>>=s;for(t[t.length-1]==c&&(e=0<e?0:-1),f=r;e&&f<n.length;f++)e+=n[f],n[f]=e&c,e>>=s}function bn(n){for(var t=n.length,r=0;r<t;r++)n[r]^=c}function mn(n,t){var r;for(e.length!=2*n.length&&(e=new Array(2*n.length)),gn(e,0),r=0;r<t.length;r++)t[r]&&wn(e,n,t[r],r);ln(n,e)}function In(n,t){r.length!=n.length?r=on(n):ln(r,n),f.length!=n.length&&(f=on(n)),$(r,t,f,n)}function kn(n,t,r){var e;for(i.length!=2*n.length&&(i=new Array(2*n.length)),gn(i,0),e=0;e<t.length;e++)t[e]&&wn(i,n,t[e],e);In(i,r),ln(n,i)}function pn(n,t){for(var r,e,f,h,o=n.length;0<o&&!n[o-1];o--);for(h=o>t.length?2*o:2*t.length,i.length!=h&&(i=new Array(h)),gn(i,0),r=0;r<o;r++){for(f=i[2*r]+n[r]*n[r],i[2*r]=f&c,f>>=s,e=r+1;e<o;e++)f=i[r+e]+2*n[r]*n[e]+f,i[r+e]=f&c,f>>=s;i[r+o]=f}In(i,t),ln(n,i)}function xn(n,t){var r;if(n[n.length-1]==c)for(r=n.length;0<r&&n[r-1]==c;r--);else for(r=n.length;0<r&&!n[r-1];r--);return ln(t=new Array(r+t),n),t}function En(n){return ans=on(n),bn(ans),xn(ans,1)}function Pn(n,t,r){var e,f,h,o;if(d.length!=r.length&&(d=on(r)),0!=(1&r[0])){for(gn(d,0),h=r.length;0<h&&!r[h-1];h--);for(o=v-Q(tn(r,v),v),d[h]=1,kn(n,d,r),u.length!=n.length?u=on(n):ln(u,n),e=t.length-1;0<e&!t[e];e--);if(0!=t[e]){for(f=1<<s-1;f&&!(t[e]&f);f>>=1);for(;;){if(!(f>>=1)){if(--e<0)return void Sn(n,l,r,o);f=1<<s-1}Sn(n,n,r,o),f&t[e]&&Sn(n,u,r,o)}}else gn(n,1)}else for(ln(d,n),gn(n,1);!en(t,0);)1&t[0]&&kn(n,d,r),dn(t,2),pn(d,r)}function Sn(n,t,r,e){var f,h,o,l,i,g,u=r.length,a=t.length;for(w.length!=u&&(w=new Array(u)),gn(w,0);0<u&&0==r[u-1];u--);for(;0<a&&0==t[a-1];a--);for(g=w.length-1,f=0;f<u;f++){for(o=(i=w[0]+n[f]*t[0])+(l=(i&c)*e&c)*r[0]>>s,i=n[f],h=1;h<a-4;)o+=w[h]+l*r[h]+i*t[h],w[h-1]=o&c,o>>=s,o+=w[++h]+l*r[h]+i*t[h],w[h-1]=o&c,o>>=s,o+=w[++h]+l*r[h]+i*t[h],w[h-1]=o&c,o>>=s,o+=w[++h]+l*r[h]+i*t[h],w[h-1]=o&c,o>>=s,o+=w[++h]+l*r[h]+i*t[h],w[h-1]=o&c,o>>=s,h++;for(;h<a;)o+=w[h]+l*r[h]+i*t[h],w[h-1]=o&c,o>>=s,h++;for(;h<u-4;)o+=w[h]+l*r[h],w[h-1]=o&c,o>>=s,o+=w[++h]+l*r[h],w[h-1]=o&c,o>>=s,o+=w[++h]+l*r[h],w[h-1]=o&c,o>>=s,o+=w[++h]+l*r[h],w[h-1]=o&c,o>>=s,o+=w[++h]+l*r[h],w[h-1]=o&c,o>>=s,h++;for(;h<u;)o+=w[h]+l*r[h],w[h-1]=o&c,o>>=s,h++;for(;h<g;)o+=w[h],w[h-1]=o&c,o>>=s,h++;w[h-1]=o&c}X(r,w)||yn(w,r),ln(n,w)}this.add=function(n,t){return An(n=F(n,n.length>t.length?n.length+1:t.length+1),t),xn(n,1)},this.addInt=function(n,t){return un(n=F(n,n.length+1),t),xn(n,1)},this.bigInt2str=function(n,t){var r,e,f="";if(h.length!=n.length?h=on(n):ln(h,n),-1==t){for(r=n.length-1;0<r;r--)f+=n[r]+",";f+=n[0]}else for(;!hn(h);)e=dn(h,t),f=g.substring(e,e+1)+f;return 0==f.length&&(f="0"),f},this.bitSize=j,this.divide_=$,this.dup=on,this.equals=fn,this.equalsInt=en,this.expand=F,this.findPrimes=G,this.GCD=function(n,t){return K(n=on(n),on(t)),n},this.greater=X,this.greaterShift=W,this.int2bigInt=rn,this.inverseMod=function(n,t){return function(n,t){var r=1+2*Math.max(n.length,t.length);if(!(1&n[0]||1&t[0]))return gn(n,0),0;m.length!=r&&(m=new Array(r),b=new Array(r),I=new Array(r),k=new Array(r),p=new Array(r),x=new Array(r));for(ln(m,n),ln(b,t),gn(I,1),gn(k,0),gn(p,0),gn(x,1);;){for(;!(1&m[0]);)cn(m),1&I[0]||1&k[0]?(An(I,t),cn(I),yn(k,n)):cn(I),cn(k);for(;!(1&b[0]);)cn(b),1&p[0]||1&x[0]?(An(p,t),cn(p),yn(x,n)):cn(p),cn(x);if(X(b,m)?(yn(b,m),yn(p,I),yn(x,k)):(yn(m,b),yn(I,p),yn(k,x)),en(m,0)){for(;V(p);)An(p,t);return ln(n,p),en(b,1)?1:(gn(n,0),0)}}}(n=F(n,t.length),t)?xn(n,1):null},this.inverseModInt=Q,this.isZero=hn,this.millerRabin=Z,this.millerRabinInt=Y,this.mod=function(n,t){return In(n=on(n),t),xn(n,1)},this.modInt=tn,this.mult=function(n,t){return mn(n=F(n,n.length+t.length),t),xn(n,1)},this.multMod=function(n,t,r){return kn(n=F(n,r.length),t,r),xn(n,1)},this.negative=V,this.powMod=function(n,t,r){return Pn(n=F(n,r.length),xn(t,2),xn(r,2)),xn(n,1)},this.randBigInt=function(n,t){var r=rn(0,0,Math.floor((n-1)/s)+2);return J(r,n,t),r},this.randTruePrime=function(n){var t=rn(0,n,0);return function n(t,r){var e,f,h,o,l,i,g,u,a,c;0==E.length&&(E=G(3e4));if(0==P.length)for(P=new Array(512),h=0;h<512;h++)P[h]=Math.pow(2,h/511-1);0;0;B.length!=t.length&&(B=on(t),L=on(t),T=on(t),q=on(t),z=on(t),on(t),on(t),U=on(t),O=on(t),S=on(t),N=on(t),R=on(t),_=on(t),C=on(t));if(r<=20){for(e=(1<<(r+2>>1))-1,gn(t,0),f=1;f;)for(t[f=0]=1|1<<r-1|Math.floor(Math.random()*(1<<r)),h=1;h<E.length&&(E[h]&e)==E[h];h++)if(0==t[0]%E[h]){f=1;break}return void nn(t)}l=.1*r*r;if(40<r)for(o=1;r-r*o<=20;)o=P[Math.floor(512*Math.random())];else o=.5;c=Math.floor(o*r)+1;n(R,c);gn(B,0);B[Math.floor((r-2)/s)]|=1<<(r-2)%s;$(B,R,S,N);u=j(S);for(;;){for(;J(L,u,0),!X(S,L););for(un(L,1),An(L,S),ln(O,R),mn(O,L),vn(O,2),un(O,1),ln(q,L),vn(q,2),h=i=0;h<E.length&&E[h]<l;h++)if(0==tn(O,E[h])&&!en(O,E[h])){i=1;break}if(i||Y(O,2)||(i=1),!i){for(un(O,-3),h=O.length-1;0==O[h]&&0<h;h--);for(a=0,g=O[h];g;g>>=1,a++);for(a+=s*h;J(_,a,0),!X(O,_););if(un(O,3),un(_,2),ln(U,_),ln(T,O),un(T,-1),Pn(U,T,O),un(U,-1),hn(U)&&(ln(U,_),Pn(U,q,O),un(U,-1),ln(C,O),ln(z,U),K(z,O),en(z,1)))return void ln(t,C)}}}(t,n),xn(t,1)},this.randProbPrime=function(n){return t(n,600<=n?2:550<=n?4:500<=n?5:400<=n?6:350<=n?7:300<=n?9:250<=n?12:200<=n?15:150<=n?18:100<=n?27:40)},this.str2bigInt=function(n,t,r){var e,f,h,o,l,i=n.length;if(-1==t){for(h=new Array(0);;){for(o=new Array(h.length+1),f=0;f<h.length;f++)o[f+1]=h[f];if(o[0]=parseInt(n,10),h=o,(e=n.indexOf(",",0))<1)break;if(0==(n=n.substring(e+1)).length)break}return h.length<r?(ln(o=new Array(r),h),o):h}for(h=rn(0,t*i,0),f=0;f<i&&(e=g.indexOf(n.substring(f,f+1),0),t<=36&&36<=e&&(e-=26),!(t<=e||e<0));f++)vn(h,t),un(h,e);for(i=h.length;0<i&&!h[i-1];i--);for(i=i+1<r?r:i+1,o=new Array(i),l=i<h.length?i:h.length,f=0;f<l;f++)o[f]=h[f];for(;f<i;f++)o[f]=0;return o},this.negate=H,this.sub=function(n,t){return yn(n=F(n,n.length>t.length?n.length+1:t.length+1),t),xn(n,1)},this.trim=xn,this.uint82bigInt=function(n){for(var t=n.length,r=8*n.BYTES_PER_ELEMENT,e=t*r,e=Math.trunc((e+s-1)/s),f=new Array(e+1),h=0,o=0,l=0,i=0,h=t-1;0<=h;--h)for(l|=n[h]<<i,i+=r;s<=i;)f[o++]=l&c,l>>=s,i-=s;for(;o<f.length;){if(0==(f[o++]=l)){f.length=o;break}l=0}return f},this.bigInt2uint8=function(n){var t;for(n[n.length-1]==c&&(n=H(n)),t=n.length;0<t&&!n[t-1];t--);for(var r=t*s,r=Math.trunc((8+r-1)/8),e=new Uint8Array(r),f=0,h=r,o=0,l=0,f=0;f<t;++f)for(o|=n[f]<<l,l+=s;8<=l;)e[--h]=o,o>>=8,l-=8;return 0<h&&(0==o?e=new Uint8Array(e.slice(h)):e[--h]=o),e},this.rightShift=function(n,t){var r=!1,e=V(n)?(r=!0,En(n)):on(n);if(t>e.length*s)e=[0];else{for(;s<=t;)an(e,s-1),t-=s-1;0<t&&an(e,t)}return r&&bn(e),xn(e,1)},this.leftShift=function(n,t){for(var r=F(n,n.length+Math.trunc((t+s)/s));s<=t;)sn(r,s-1),t-=s-1;return 0<t&&sn(r,t),xn(r,1)},this.and=function(n,t){return n=1==n.length&&n[0]==c?[c,c]:on(n),1==t.length&&t[0]==c&&(t=[c,c]),function(n,t){for(var r=(n.length<t.length?n:t).length,e=0;e<r;e++)n[e]&=t[e];for(e=r;e<n.length;e++)n[e]=0}(n,t),xn(n,1)},this.or=function(n,t){var r;return n.length<t.length&&(r=n,n=t,t=r),n=1==n.length&&n[0]==c?[c,c]:on(n),1==t.length&&t[0]==c&&(t=[c,c]),function(n,t){for(var r=(n.length<t.length?n:t).length,e=0;e<r;e++)n[e]|=t[e]}(n,t),xn(n,1)},this.xor=function(n,t){var r;return n.length<t.length&&(r=n,n=t,t=r),n=1==n.length&&n[0]==c?[c,c]:on(n),1==t.length&&t[0]==c&&(t=[c,c]),function(n,t){for(var r=(n.length<t.length?n:t).length,e=0;e<r;e++)n[e]^=t[e]&c}(n,t),xn(n,1)},this.not=En}}("undefined"==typeof exports?this.Naanlang||(this.Naanlang={}):exports);

/* Copyright (c) 2017-2022 by Zulch Laboratories, Inc. */
!function(il){il.NaanInterpreter=function(){"use strict";var e=il.LeemonBigIntegerLib?il:require("./bigint.js"),s=new e.LeemonBigIntegerLib,h=il.NaanChannel?il:require("./naan_io.js"),l={Number:Number,String:String,Date:Date,RegExp:RegExp,Array:Array,Math:Math,Promise:Promise},m={Number:Number,String:String,Date:Date,RegExp:RegExp},L;function B(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.apply(e)}function u(e){return e.prototype&&e.prototype.constructor.name}var i=Math.log2(Number.MAX_SAFE_INTEGER),a=Math.log2(Number.MAX_VALUE),o=131072,p="\b\f\n\0\r\t\v ~`@#$%^&*()_+-={}|[]\\:\";'<>?,./",b=this,D=1,X=2,z=3,G=4,Z=5,J=6,S=7,V=8,Q=9,k=10,r=10,g=0,O=1,N=2,f=2,U=3,H=4,Y=5,w=2,K=3,ee=3,re=3,ne=3,x=3,j=2,te=3,ie=4,v=N+1,P=Y+1,n=K+1,t=ee+1,c=re+1,d=N+1,y=x+1,ae=ie+1,T={},ue=null;function A(e){return e&&e!==ue&&e!==De&&e!==Xe}function I(e){return e===Qe||e===Ze||e===Je||e===Ve||e===Ue||e===He}function E(e){return e?ze:ue}function M(e){return e===L?De:null===e?Xe:e}function $(e){for(var r=ue,n=e.length-1;0<=n;--n)r=Ce(e[n],r);return r}function q(e){for(var r=[];e[g]===D;)r.push(e[O]),e=e[N];return r}function _(e){for(var r=Du();e[g]===D;){var n=e[O];n[g]===D&&yo(r,n[O],n[N]),e=e[N]}return r}function R(e,r){for(var n=Object.getOwnPropertyNames(r),t=0;t<n.length;++t){var i=n[t];e[i]=r[i]}}function F(e,r){return e===ue?ue:(r&&r!==ue||(r=Du()),Nc(e)!==ue&&R(r[x],e[x]),r)}var oe=[],fe=[],ce,se,le,pe,W=1e5;function ge(){oe=[],fe=[],ce=ve(Fe("NaanRoot")),se=ve(Fe("NaanCore")),le=ve(Fe("NaanConst")),oe.pop(),fe.push(se),pe=ce}function ve(e,r){return e===L?ue:(r===L&&(r=new Array(ae)),r[0]=k,(r[1]=r)[2]=e,r[3]=[],r[4]={},oe.push(r),r)}function C(e){e=e&&e[0]===k?ds(e[j]):"nowhere";return e}function de(e,r){for(var n=[],t=$(fe);e[g]===D;){var i=e[O];i===ue&&(i=ce),i[0]===k&&n.indexOf(i)<0&&n.push(i),e=e[N]}if(0<n.length){if(!r&&n[0]!==fe[0]&&pe!=n[0]&&pe!==ce)return Xa(Be(["internal","$"+ds(pe)+": no privileges to activate "+C(n[0])])),ue;fe=n}return t}function he(l){var e,r,n,p=new WeakMap,g={};function v(e){e=function e(r){var n;if("object"!=typeof r)return r;if(p.get(r))return p.get(r);switch(p.set(r,r),r[0]){case D:for(var t=r;;){var i=t[1],a=t[2];if(t[1]=v(i),a===ue)break;if(a[0]!==D){t[2]=v(a);break}if(t=a,p.get(t))break;p.set(t,t)}return r;case Q:if(r[H]===l)p.set(r,ue),r=ue;else if(Lu(r[x])){var u=r[x];if(B(r[x]))for(var o=0;o<u.length;++o)(n=e(u[o]))===g?u.splice(o,1):u[o]=n;else for(var f,c=Object.getOwnPropertyNames(u),s=0;s<c.length;++s)(n=e(u[f=c[s]]))===g?delete u[f]:u[f]=n}return r;case X:return r[H]===l?((r[1]=r)[2]=ue,r[3]=ue,r[4]=ue):(r[1]=v(r[1]),r[2]=v(r[2]),r[3]=v(r[3])),r}return r}(e);return e===g?ue:e}for(p.set(g,g),p.set(l,g),e=0;e<oe.length;++e)if(oe[e]!==l)for(n=oe[e][te],r=0;r<n.length;++r)v(n[r]);for(var t=1;t<=yt;++t)bt[t-1]=v(bt[t-1]);var i=fe.indexOf(l);0<=i&&fe.splice(i,1),0<=(i=oe.indexOf(l))&&oe.splice(i,1)}function be(o){var e,r,n,f=new WeakMap,c=[];function s(e){if("object"==typeof e&&!f.get(e))switch(f.set(e,e),e[0]){case D:for(var r=e;;){s(r[1]);var n=r[2];if(n===ue)break;if(n[0]!==D){s(n);break}if(r=n,f.get(r))break;f.set(r,r)}break;case Q:if(Lu(e[x])){var t=e[x];if(B(e[x]))for(var i=0;i<t.length;++i)s(t[i]);else for(var a=Object.getOwnPropertyNames(t),u=0;u<a.length;++u)s(t[a[u]])}break;case X:e[Y]===o&&c.push(e),s(e[1]),s(e[2]),s(e[3])}}for(e=0;e<oe.length;++e)for(n=oe[e][te],r=0;r<n.length;++r)s(n[r]);for(var t=1;t<=yt;++t)s(bt[t-1]);return c}function ye(e){for(var r=0;r<fe.length;++r){var n=fe[r];if(n[ie].hasOwnProperty(e)){var t=n[ie][e];return n[te][t]}}return!1}function me(e){if(e[H][0]!==k)return ue;var r,n=e[H][ie][e[Y]];if(e[H][te][n]!==e)return ue;for(r=0;r<fe.length;++r){var t=fe[r];if(t[ie].hasOwnProperty(e[Y]))return n=t[ie][e[Y]],t[te][n]===e?ue:e[H]}return e[H]}function ke(e,r){return!!r[ie].hasOwnProperty(e)&&r[te][r[ie][e]]}var we={};function xe(e){var r=new Array(P);return ue||(ue=r,ge()),r[0]=X,(r[1]=r)[2]=ue,r[3]=ue,r[4]=ue,r[5]=e,r}function Se(e,r){var n=e[Y],t=r[ie][n];return r[te][t]===e||((e[H]=r)[ie][n]=r[te].length,r[te].push(e)),e}function Oe(e){var r=ye(e);return r||Se(r=xe(e),fe[0])}function Ne(e){e=ye(e);return e||ue}function je(e,r){var n,t;for(n in r)if(t=ke(e,r[n]))return t;return ue}function Pe(e,r){return je(r,[e[H],ce,se])}function Te(e){if(e[H][0]!==k)return-1;var r=oe.indexOf(e[H]);if(r<0)return mu(pu,"can't find namespace for symbol \""+e[Y]+'"'),0;var n=r*W,r=oe[r][ie][e[Y]];return"number"!=typeof r?(mu(pu,"can't find interned symbol \""+e[Y]+'"'),0):n+r}function Ae(e,r){e=Oe(e);return e===ue&&mu(pu,"can't set that: "+r),e===ue?ue:(r===L?r=e:"string"==typeof r?r=Oe(r):"number"==typeof r&&(r=Eo(r)),e[1]=r,e)}function Ie(e,r){var n=new Array(d);return n[0]=r,(n[1]=n)[2]=ue,n[3]=e,n}function Ee(e,r,n,t){var i=(t?xe:Oe)(e);i===ue&&mu(pu,"can't add builtin \""+i+'"');var a=new Array(d);return a[0]=n,(a[1]=a)[2]=i,a[3]=r,i[U]=a,t||(we[e]=r),i}function Me(e){for(var r=Object.getOwnPropertyNames(we),n=0;n<r.length;++n)if(we[r[n]]===e)return r[n];return L}function $e(e,r){var n,t=Le(e);if(t===ue)return ue;for(n=0;n<r.length;++n){var i=r[n];if("object"!=typeof i)return ue;if(!(i.length<2)){var a=i[0];if("string"!=typeof a)return ue;Jc(t,Le(a),Le(i[1]))}}return t}function qe(e,r){e=Oe(e);return A(e)||mu(pu,"can't add that: "+r),e[U]=r,e}function _e(e){e=Lr(e,fe[0]);return"string"==typeof e?(mu(pu,"can't create closure: "+e),ue):e}function Re(e){return e[0]===X?e[Y]:e[0]===z?e[K]:""}function Fe(e){var r=new Array(n);return r[0]=z,(r[1]=r)[2]=ue,r[3]=e,r}function We(e){var r=new Array(y);return r[0]=Q,(r[1]=r)[2]=ue,r[3]=e,r[4]=ue,r}function Ce(e,r){var n=new Array(v);return n[0]=D,n[1]=e,n[2]=r,n}function Le(e){if("string"==typeof e)return 1<e.length&&"."==e.substring(0,1)?Mo(parseFloat(e.substring(1))):"$"==e.substring(0,1)?Fe(e.substring(1)):("\\"==e.substring(0,1)&&(e=e.substring(1)),Wr(e));if("number"==typeof e)return Eo(e);if("object"==typeof e){if(B(e)){for(var r=ue,n=r,t=0;t<e.length;++t){var i=new Array(v);i[0]=D,i[1]=Le(e[t]),n!==(i[2]=ue)?n[2]=i:r=i,n=i}return r}if(e.hasOwnProperty("dictionary")){var a=new Bu,u=e.dictionary,o=Object.getOwnPropertyNames(u);for(t=0;t<o.length;++t){var f=o[t];"$"!=f.substring(0,1)&&"\\"!=f.substring(0,1)||(f=f.substring(1)),a[f]=Le(u[o[t]])}var c=We(a);return e.tag!==L&&(c[2]=Le(e.tag)),c}if(e.hasOwnProperty("array")){var s=[];for(u=e.array,s[Ru]=Fu,t=0;t<u.length;++t)s[t]=Le(u[t]);return We(s)}if(e.hasOwnProperty("xobject"))return We(e.xobject)}return mu(vu,"naanParseJsValue warning: can't parse "+typeof e),ue}function Be(e){var r=fe;(fe=fe.slice()).push(ce);e=Le(e);return fe=r,e}Oe("false");var De=Oe("undefined"),Xe=Oe("null"),ze=Oe("true"),Ge=Oe("lambda"),Ze=Oe("function"),Je=Oe("function&"),Ve=Oe("macro"),Qe=Oe("closure"),Ue=Oe("let"),He=Oe("let&"),Ye=Oe("var"),Ke=Oe("exception"),er=Oe("escape"),rr=Oe("this"),nr=Oe("self"),tr=Oe("`"),ir=Oe("deref"),ar=Oe("."),ur=Oe("body"),or=Oe("loop"),fr=Oe("catch"),cr=Oe("interrupt"),sr=Oe("list"),lr=Oe("Naan"),pr=Oe("builtin"),gr=Oe("tuple"),vr=Oe("symbol"),dr=Oe("integer"),hr=Oe("float"),br=Oe("numeric"),yr=Oe("string"),mr=Oe("array"),kr=Oe("dictionary"),wr=Oe("object"),xr=Oe("xobject"),Sr=Oe("namespace"),Or=Oe("nonce"),Nr=Oe("weakmap"),jr=Oe("textstream"),Pr=Oe("$");Oe("driver"),Oe("App"),Oe("identity"),Oe("js"),function(){for(var e in l)l.hasOwnProperty(e)&&Oe(e)}();var Tr=Ae("cr","\n"),Ar=Oe("space");Ar[1]=Fe(" "),Ae("doublequote",'"'),Ae("rpar",")"),Ae("lpar","("),Ae("comma",","),Ae("quote","`"),Ae("period","."),fe=[ce,se];var Ir=Oe("throw"),Er=Oe("call"),Mr=Oe("arraycall"),$r=Oe("xget"),qr=Oe("xset"),_r=Oe("xcall"),Rr=Oe("xapply");function Fr(e){if(lr[1][0]!==Q)return ue;for(var r=Object.getOwnPropertyNames(lr[1][x]),n=0;n<r.length;++n){var t=lr[1][x][r[n]][x];if(t.hasOwnProperty(e)){if(t[e][0]===X)return t[e][U];break}}return ue}function Wr(e){var r=ye(e);if(r)return r;if(r=Oe(e),lr[1][0]!==Q)return r;e=Fr(e);return e!==ue&&(r[U]=e),r}function Cr(e,r){if((e[0]===X||r&&e[0]===Q)&&A(e)){if(e[H]===ue)return 1;if(pe==e[H])return 1;if(fe[0]===e[H])return 1;if(pe===ce)return 1;r=C(e[H])+Ts.NSinfix;e[0]===X?r+=e[Y]:r+=ds(e),Xa(Be(["internal","$can't modify "+r+" from "+C(pe)]),ue)}else Xa(Be(["internal","$attempt to modify constant "+ds(e)]),ue)}function Lr(e,r){try{return Br(e,r)}catch(e){return e}}function Br(e,b){var u,o,r,n={};function y(e,r,n){if(r[0]!==X||((a=r)===ue||a===De||a===Xe||a===Ge||I(a)))for(;r[0]===D;)y(e,r[1],n),r=r[2];else{var t=r[Y];if(n===Je||n===He){if(r[H]===b||b===ue)return;u!==Qe&&u!==Ve&&mu(vu,"warning: using "+Ts.NSinfix+t+" for parameter "+C(r[H])+Ts.NSinfix+t+" in "+C(b)+Ts.NSinfix+o[Y])}var i=xe(t);i[H]=b===ue?r[H]:b;a=e[t];a&&(i[U]=a[U]),e[t]=i}var a}function m(e,r){for(;r[0]===D;){if(r[1][0]===D&&r[1][1]!==tr)if(I(r[1][1])){var n=r[1][2][1];if(n!==ue&&n[Y]!==Ge[Y]){var t=n[Y],i=xe(t);if(i[H]=b===ue?n[H]:b,i[U]=r[1],e.hasOwnProperty(t))throw"duplicate procedure name "+t+" in "+o[Y];e[t]=i}}else m(e,r[1]);r=r[2]}}function k(e,r,n,t){if(e[0]!==D){if(e[0]===Q&&Lu(e[3])){var i=e[x];if(B(i)){for(var a=Cu(mr,ue),u=0;u<i.length;++u)a[x][u]=k(i[u],r,n,t);return a}var o,f=Object.getOwnPropertyNames(i),c=(e[3]instanceof Xu?zu:Du)();for(c[2]=e[2],o=0;o<f.length;++o)c[x][f[o]]=k(i[f[o]],r,n,t);return c}return e[0]!==X?e:r.hasOwnProperty(e[Y])?r[e[Y]]:e}if(!n&&I(e[1])){var s=k(e[2][1],r,!1,t);s[Y]===Ge[Y]&&((s=xe(s[Y]))[O]=Ge,s[H]=b!==ue?b:s[H]);var l=e[2][2][1],p=e[2][2][2],g={};m(g,p),y(g=Object.assign({},r,g),l,e[1]);p=Ce(k(l,g,!1,t),k(p,g,!1,s)),g=Ce(e[1],Ce(s,p));return s[U]=g,t&&(s[2]===ue&&(s[2]=Cu(kr,ue)),(s[2][3][".parent"]=t)[2]===ue&&(t[2]=Cu(kr,ue)),p=(p=t[2][3][".children"])||ue,t[2][3][".children"]=Ce(s,p)),g}e[1]===tr&&(n=!0);for(var v=ue,d=null;e[0]===D;){var h=Ce(k(e[1],r,n,t),ue);e.breakpoint&&(h.breakpoint=e.breakpoint),d?d[2]=h:v=h,d=h,e=e[2]}return e!==ue&&d&&(d[2]=e),v}if(e[0]!==D)return ue;if(u=e[1],(o=e[2][1])[0]!==X)return ue;var t=b!==ue?b:o[H];o[H]!==t||(u!==Ze&&u!==Je||o[U]!==e)&&o[U]!==ue?((r=xe(o[Y]))[O]=o,r[H]=t,r[f]=F(o[f]),u!==Qe&&u!==Ve||r[f][".base"]||(r[2]===ue&&(r[2]=Cu(kr,ue)),r[2][3][".base"]=o)):r=o,r[2]!=ue&&delete r[2][3][".children"],y(n,rr),n[rr[Y]][1]=r,m(n,e[2][2][2]),y(n,e[2][2][1],u),t=k(e[2][2][1],n,!1),n=k(e[2][2][2],n,!1,r);n=Ce(u,Ce(r,Ce(t,n)));return r[U]=n}var Dr=0,Xr=1,zr=2,Gr=3,Zr=4,Jr=5,Vr=6,Qr=7,Ur=8,Hr=9,Yr=10,Kr=11,en=12,rn=13,nn=14,tn=15,an=16,un=17,on=18,fn=19,cn=20,sn=21,ln=22,pn=23,gn=24,vn=25,dn=26,hn=27,bn=28,yn=29,mn=30,kn=31,wn=32,xn=33,Sn=34,On=35,Nn=36,jn=37,Pn=38,Tn=39,An=40,In=41,En=42,Mn=43,$n=44,qn=45,_n=46,Rn=47,Fn=48,Wn=49,Cn=50,Ln=51,Bn=52,Dn=53,Xn=54,zn=55,Gn=56,Zn=90,Jn=91,Vn=92,Qn=93,Un=94,Hn=0,Yn=1,Kn=2,et=3,rt=4,nt=5,tt=6,it=57,at=58,ut=59,ot=95,ft=96,ct=[],st,lt,pt,gt,vt;ct[Dr]=pi,ct[xn]=gi,ct[jn]=vi,ct[wn]=Ni,ct[it]=Ni,ct[Ur]=Ci,ct[tn]=ji,ct[an]=Pi,ct[un]=Ti,ct[zn]=Li,ct[Gn]=Bi,ct[Kr]=Di,ct[gn]=Xi,ct[bn]=zi,ct[yn]=Gi,ct[mn]=Gi,ct[kn]=Gi,ct[ut]=Zi,ct[vn]=Ji,ct[dn]=Vi,ct[hn]=Qi,ct[Hr]=Ui,ct[Yr]=Hi,ct[Cn]=Yi,ct[Ln]=Ki,ct[ln]=ea,ct[pn]=ra,ct[En]=na,ct[Mn]=ta,ct[$n]=ia,ct[cn]=aa,ct[sn]=ua,ct[Rn]=oa,ct[Fn]=fa,ct[Wn]=sa,ct[Zr]=ca,ct[Jr]=sa,ct[Vr]=la,ct[Qr]=ha,ct[en]=ya,ct[Xr]=ya,ct[Tn]=ma,ct[nn]=ka,ct[Bn]=wa,ct[Dn]=xa,ct[Xn]=Sa,ct[qn]=Ai,ct[_n]=Ii,ct[at]=Mi,ct[zr]=Si,ct[Gr]=Oi,ct[on]=di,ct[fn]=hi,ct[An]=bi,ct[In]=yi,ct[Pn]=mi,ct[rn]=mi,ct[Sn]=ki,ct[On]=wi,ct[Nn]=xi;var dt=[],ht=0,bt=[],yt=0,mt=-1,kt=0,wt=!1,xt=!1,St=6e3,Ot=0,Nt=0,jt=0,Pt,Tt=0,At,It,Et=[],Mt=[],$t=[],qt,_t,Rt=[],Ft,Wt,Ct=0,Lt=100,Bt=3e4,Dt=1e4,Xt=2e5,zt=Bt,Gt,Zt;function Jt(){return kt=yt=ht=0,vt=Dr,st=lt=pt=gt=nr[1]=ue,Ke[1]=Ke,Ou(),1}function Vt(e){return dt[ht++]=Dr,vt=xn,st=e}function Qt(e,r,n){return To(),bt[yt++]=xt,bt[yt++]=wt,bt[yt++]=e,bt[yt++]=r,bt[yt++]=pe,bt[yt++]=nr[1],bt[yt++]=gt,bt[yt++]=pt,bt[yt++]=lt,bt[yt++]=st,bt[yt++]=kt,bt[kt=yt++]=Zn,bt[yt++]=ht+2,bt[yt++]=!1,dt[ht++]=vt,dt[ht++]=n?Xr:en,vt=xn,It=ue,xt=wt=!1,st=e}function Ut(e){return Vt(e),Yt(!(jt=0)),st}function Ht(){return Tt<=0&&(vt!==Dr||0<ht)}function Yt(e){if(!(0<Tt)){var r=Pt,n=Ot;Gt=(new Date).getTime(),bt.length=yt,vt===Dr&&0<ht&&(vt=dt[--ht]),Ot=(e=e||Pt)?0:St,Pt=e;try{Kt()}catch(e){if(e!==Et){debugger;mu(pu,"caught: "+e.toString()),za(Be(["unknown","$"+e.toString()]))}To()}finally{Pt=r,Ot=n,bt.length=yt,Bt<zt&&yt<zt-Dt/2&&(zt-=Dt/2)<Bt&&(zt=Bt),ui()}0<vs.TextAvail()&&T.hasOwnProperty("console-out")&&T["console-out"](b,vs.TakeText())}}function Kt(){var e=0;do{if(yu!=bu[1]){debugger;mu(pu,bu[Y]+" changed: "+ds(yu)+" --\x3e "+ds(bu[1])),yu=bu[1]}if(zt<yt&&(za(Be(["internal","$maximum stack depth exceeded"])),zt=yt+Dt,Xt<yt))return mu(pu,"intractable recursion"),Jt(),void To();if(1e3<=++e){e=0;if(bt.length=yt,1e4<(new Date).getTime()-Gt)return void za(Be(["internal","$unresponsive"]));if(0<Ot&&(Ot-=1e3,Ot<=0&&(Ot=St,vt!==Dr))){dt[ht++]=vt,vt=Dr;break}}}while(ct[vt](),ct[vt](),ct[vt](),ct[vt](),ct[vt](),ct[vt](),ct[vt](),ct[vt](),ct[vt](),ct[vt](),ct[vt](),ct[vt](),ct[vt](),ct[vt](),ct[vt](),ct[vt](),ct[vt](),ct[vt](),ct[vt](),ct[vt](),ct[vt](),ct[vt](),ct[vt](),ct[vt](),ct[vt](),ct[vt](),ct[vt](),ct[vt](),ct[vt](),ct[vt](),ct[vt](),ct[vt](),vt!=Dr)}var ei=[],ri=[],ni=[],ti=[],ii=[],ai=[];function ui(){var e=(new Date).getTime(),r=e-Gt;Zt===L&&(ei[Zt=0]=Gt,ni[0]=0,ti[0]=0,ii[0]=0,ai[0]=0),++ni[Zt],ti[Zt]+=r,ii[Zt]<r&&(ii[Zt]=r),++ai[Zt],e>=ei[Zt]+1e3&&(ri[Zt]=e-ei[Zt],32<++Zt&&(Zt=0),ei[Zt]=e,ni[Zt]=0,ti[Zt]=0,ii[Zt]=0,ai[Zt]=0)}function oi(e){e=e||32;for(var r=1e3,n=[],t=[],i=ei.length-1,a=Zt-1,u=e*r;0<=--i&&(n.push({start:ei[a],width:ri[a],runtime:ti[a],peak:ii[a],runcount:ni[a],counter:ai[a]}),--a<0&&(a=ei.length-1),!((u-=ri[a])<0)););if(0===n.length)return[];var o=n[0];3e3<(new Date).getTime()-o.start&&t.push({start:o.start+r,width:r,cpu:0,peak:0,average:0,samples:0});for(var f=o.start+o.width-r,c=1;t.length<e;)if(f>=o.start){var s=o.peak;r<s&&(s=r);var l=Number((o.runtime/o.width).toFixed(3)),p=Math.round(o.runtime/o.runcount);s==r&&(l=1,p=1e3),t.push({start:f,width:r,cpu:l,peak:s,average:p,samples:o.counter}),f-=r}else{if(c>=n.length)break;o=n[c++]}return t}function fi(){return Mt}function ci(e,r,n,t){st=r,lt=n,pt=t,gt=e,dt[ht++]=Tn,vt=Dr,Tt=1}function si(e){if(e[U]!==ue)qt=e[U];else{if(e[1]===e)return ue;qt=e[1]}return _t=e,$t}function li(e,r){return Ft=e,Wt=r,Rt}function pi(){}function gi(){var e=st,r=0;if(e[0]!==D){if(e[0]===Q&&Lu(e[3])){if(B((st=e)[3]))return void(vt=on);if(e[3]instanceof Bu)return void(vt=An)}return st=e[1],void(vt=dt[--ht])}for(var n=e[1];n[0]===X;){if(++r>Lt)return vt=dt[--ht],void(st=ue);if(n[3]!==ue)n=n[3];else{if(n[1]===n)break;if((n=n[1])[0]===Q)return vt=wn,gt=n,pt=ze,lt=e[2],void(st=n)}}if(n[0]===D&&I(n[1])||n[0]===J||n[0]===S||n[0]===V)return vt=wn,gt=e[1],pt=ze,lt=e[2],void(st=n);vt=I(n)?dt[--ht]:vn}function vi(){for(var e=st,r=0;e[0]===X&&!(++r>Lt);)if(e[3]!==ue)e=e[3];else{if(e[1]===e)break;e=e[1]}gt=st[0]===D?e:Ge,pt=ue,st=e,vt=wn}function di(){if(pt=Cu(mr,ue),0===st[3].length)return st=pt,void(vt=dt[--ht]);bt[yt++]=st,bt[yt++]=pt,bt[yt++]=0,dt[ht++]=fn,(st=st[3][0])===L&&(st=De),vt=xn}function hi(){if(lt=bt[yt-1]++,pt=bt[yt-2],gt=bt[yt-3],pt[3][lt++]=st,lt<gt[3].length)return dt[ht++]=fn,st=gt[3][lt],void(vt=xn);yt-=3,st=pt,vt=dt[--ht]}function bi(){if(pt=Du(),0===(lt=ao(Object.getOwnPropertyNames(st[3]).reverse()))[3].length)return st=pt,void(vt=dt[--ht]);bt[yt++]=st,bt[yt++]=pt,bt[yt++]=lt,dt[ht++]=In,(st=st[3][lt[3][lt[3].length-1]])===L&&(st=De),vt=xn}function yi(){if(lt=bt[yt-1],pt=bt[yt-2],gt=bt[yt-3],st===De?lt[3].pop():pt[3][lt[3].pop()]=st,0<lt[3].length)return dt[ht++]=In,st=gt[3][lt[3][lt[3].length-1]],void(vt=xn);yt-=3,st=pt,vt=dt[--ht]}function mi(){if(bt[yt++]=vt===Pn?ze:ue,bt[yt++]=ue,bt[yt++]=st[1],bt[yt++]=st[2][1],bt[yt++]=st[2][2][1],(st=st[1])[0]===D){var e=st[1][U][ne];if(e===Fa&&st[2][2][2]===ue)st=st[2],vt=vn;else{if(e!==Wa)return yt-=5,st=ue,void(vt=dt[--ht]);st=st[2][1],vt=xn}dt[ht++]=Sn}else vt=Sn}function ki(){bt[yt-4]=st,st=bt[yt-2],dt[ht++]=On,vt=xn}function wi(){bt[yt-2]=st,st=bt[yt-1],dt[ht++]=Nn,vt=xn}function xi(){var e=bt[yt-5],r=st,n=bt[yt-2],t=bt[yt-3],i=bt[yt-4];t[0]===D&&t[1][U][ne]===Wa&&(i=Ce(i,t[2][2])),yt-=5,st=Gc(i,n,r,e),vt=dt[--ht]}function Si(){bt[yt++]=pt,bt[yt++]=lt,dt[ht++]=Gr,vt=xn}function Oi(){for(var e=0;st[0]===X&&!(++e>Lt);)if(st[3]!==ue)st=st[3];else{if(st[1]===st)break;st=st[1]}gt=st[0]===D?st[2][1]:Ge,lt=bt[--yt],pt=bt[--yt],vt=wn}function Ni(){var r,n,e,t,i=st,a=lt,u=pt!==ue;if(i[0]===J)return e=a[2][2][1],n=a[2][1],r=a[1],hu<=tu&&(wu(hu,ds(i,{quote:ze}),a,u),dt[ht++]=nn),u?r[0]!==D&&n[0]!==D&&e[0]!==D&&r[0]!==Q&&n[0]!==Q&&e[0]!==Q?(st=i[3](r[1],n[1],e[1],i))===Mt?void ci(i,r[1],n[1],e[1]):st===$t?(gt=_t,pt=ze,void(st=qt)):st===Rt?void ba(Ft,Wt,a,!0):void(vt=dt[--ht]):(bt[yt++]=i,bt[yt++]=e,bt[yt++]=n,st=r,dt[ht++]=tn,void(vt=xn)):(st=i[3](r,n,e,i))===Mt?void ci(i,r,n,e):st===$t?(gt=_t,void(st=qt)):st===Rt?void ba(Ft,Wt,a):void(vt=dt[--ht]);if(i[0]===S||i[0]===Q)if(hu<=tu&&(wu(hu,ds(i,{quote:ze}),a,u),dt[ht++]=nn),i[0]===S&&vt!==it&&u&&(st=!1,a[0]===D?(r=a[1])[0]!==D&&r[0]!==Q&&(a[2][0]===D?(n=a[2][1])[0]!==D&&n[0]!==Q&&a[2][2][0]!==D&&(st=i[3](2,function(e){return 0<=e&&e<2?[r[1],n[1]][e]:ue},i,ue)):st=i[3](1,function(e){return 0===e?r[1]:ue},i,ue)):st=i[3](0,function(e){return ue},i,ue),st&&st!==Mt&&st!==$t&&st!==Rt||dt[ht-1]===en))vt=dt[--ht];else{vt===it?(bt[yt]=bt[yt-1],++yt):bt[yt++]=ue,hu<=tu&&(wu(hu,ds(i,{quote:ze}),a,u),dt[ht++]=nn);for(var o=0;a[0]===D;)bt[yt++]=a[1],++o,a=a[2];bt[yt++]=o,bt[yt++]=u?0:o,bt[yt++]=i,vt=qn}else if(i[0]===V){if(hu<=tu&&(wu(hu,ds(i,{quote:ze}),a,!1),dt[ht++]=nn),(st=i[3](a,i))!==Mt)return st===$t?(gt=_t,pt=ue,void(st=qt)):void(st!==Rt?vt=dt[--ht]:ba(Ft,Wt,a));ci(i,a)}else i[0]!==D||i[1]!==Ve&&i[1]!==Ze&&i[1]!==Je&&i[1]!==Qe&&i[1]!==Ue&&i[1]!==He?(st=ue,vt=dt[--ht]):(t=i[2][1],du<=tu&&(wu(du,ds(gt),a,u),dt[ht++]=nn),bt[yt++]=pe,vt===it?(bt[yt]=yt-2,++yt):bt[yt++]=nr[1],t!==Ge&&t[0]===X&&t[H]!==ue?t[U]===i?(i[1]===Ve?(u=!1,pt=ue,t[H]!==ce&&(i=Lr(i,pe))):i[1]===Qe&&(i=Lr(i,t[H])),"string"!=typeof i?(t=i[2][1],e=i[2][2][1],t=t[H],e[0]!==D?e[0]===X?e[1]!==Ue?e===ue||e[H]===t?(bt[yt++]=gt,bt[yt++]=i,st=a,vt=u?(dt[ht++]=zn,vn):zn):za(Be(["internal","$parameter in foreign namespace: "+C(e[H])+Ts.NSinfix+e[Y]+" from: "+C(t)])):za(Be(["internal","$let parameter must be tuple"])):za(Be(["internal","$parameter is not a symbol"])):(a[0]!==D?r=ue:(r=a[1],a=a[2]),bt[yt++]=gt,bt[yt++]=i,bt[yt++]=pt,bt[yt++]=a,bt[yt++]=e,bt[yt++]=0,st=r,vt=u?r[0]===D||r[0]===Q?(dt[ht++]=Ur,xn):(st=r[O],Ur):Ur)):za(Be(["internal",i]))):za(Be(["internal","$privilege violation in "+ds(gt)])):za(Be(["internal","$namespace invalid in "+ds(gt)])))}function ji(){var e=bt[yt-1];bt[yt-1]=st,vt=(st=e)===ue?an:(dt[ht++]=an,xn)}function Pi(){var e=bt[yt-2];bt[yt-2]=st,vt=(st=e)===ue?un:(dt[ht++]=un,xn)}function Ti(){var e=bt[--yt],r=bt[--yt],n=st,t=bt[--yt];if((st=t[3](e,r,n,t))!==Mt)return st===$t?(st=_t,lt=Ce(e,Ce(r,Ce(n,ue))),void(vt=jn)):void(st!==Rt?vt=dt[--ht]:ba(Ft,Wt,Ce(e,Ce(r,Ce(n,ue)))));ci(t,e,r,n)}function Ai(){var e,r=bt[yt-3],n=yt-3-r,t=bt[yt-2],i=bt[yt-1];function a(e){return e<0||r<=e?ue:bt[n+e]}if(t<r)return st=bt[n+t],vt=pt===ar&&1==t||pt===mr&&(0===t||1===t)?_n:(dt[ht++]=_n,xn),void(bt[yt++]=pt);if(bt[yt++]=kt,bt[kt=yt++]=ot,dt[ht++]=at,bt[yt++]=ht,bt[yt++]=!1,(st=i[0]===Q?u(i[x])?So(i,r,0,a):ko(null,i,r,0,a):i[3]!==ue?i[3](r,a,i,bt[n-1]):ue)===Mt)return Ei(),dt[ht-1]=qn,vt=Dr,void(Tt=1);if(st!==$t)if(st!==Rt)vt=dt[--ht];else{for(lt=ue,e=r;0<=--e;)lt=Ce(bt[n+e],lt);ba(Ft,Wt,lt)}else{for(st=_t,lt=ue,e=r;0<=--e;)lt=Ce(bt[n+e],lt);vt=jn}}function Ii(){pt=bt[--yt];var e=bt[yt-3],r=bt[yt-2];bt[yt-3-e+r]=st,bt[yt-2]=r+1,vt=qn}function Ei(){yt-=2,bt[--yt]!==ot&&mu(pu,"naanUnlinkArbFrame: lost frame sync"),(kt=bt[--yt])<jt&&jo()}function Mi(){var e=bt[yt-1];e&&e[x].trap?ju(e,st):(Ei(),e=bt[yt-3],yt=yt-4-e,vt=dt[--ht])}function $i(){var e=kt;if(bt[e]!==Jn)return!1;for(var r=ht;;){var n=dt[--r];if(n!==mn){if(n===Kr||n===Gn)break;return!1}}for(;bt[e]===Jn;){if(bt[e+3]!==ue||bt[e+5][2][0]===D)return!1;e=bt[e-1]}return e}function qi(e,r){if(r[1]!==Ze&&r[1]!==Qe)return!1;var n,t;if(bt[e]===Qn)n=bt[e-3],t=_i;else{if(bt[e]!==Un)return!1;n=bt[e-bt[e-2]-6],t=Ri}if(bt[e+2])return!1;if(n[1]===Ze||n[1]===Ue){var i=n[2][1],r=r[2][1];if(i[H]!==r[H])return!1;for(var a=r;a=a[2][3][".parent"];)if(a===i)return!1}else if(n[1]!==Qe)return!1;return t(e)}function _i(e){var r=bt[e-3],n=r[2][2][1];return n!==ue&&r[1]!==Qe&&(n[1]=bt[e-2]),ht=bt[e+1]-1,e-4}function Ri(e){var r=bt[e-2],n=bt[e-6-r];if(n[1]!==Qe)for(var t=n[2][2][1],i=e-2-r,a=r;0<=--a&&t[0]===D;)t[1]!==ue&&(t[1][1]=bt[i]),++i,t=t[2];return ht=bt[e+1]-1,e-7-r}function Fi(){var e,r,n,t=$i();!t||(n=qi(t,r=bt[(e=yt)-1]))&&(kt=bt[t-1],bt[n+0]=bt[e-2],bt[n+1]=r,yt=n+2)}function Wi(e){var r=$i();if(r){var n=yt,t=bt[n-4-e],i=qi(r,t);if(i){for(kt=bt[r-1],bt[i+0]=bt[n-5-e],bt[i+1]=t,bt[i+2]=bt[n-3-e],bt[i+3]=bt[n-2-e],bt[i+4]=bt[n-1-e],n-=e,i+=5;0<=--e;)bt[i++]=bt[n++];yt=i}}}function Ci(){for(var e=bt[--yt],r=bt[yt-1-e],n=bt[yt-2-e],t=bt[yt-3-e],i=st;;){if(r[0]===D)bt[yt++]=i,++e,r=r[2];else if(n[0]!==D){Wi(e);for(var a=bt[yt-4-e],u=a[2][1][H],r=a[2][2][1],o=yt-e,f=!1;r[0]===D;){if(i=r[1][1],r[1]===ue)f=!0;else{if(r[1][0]!==X)return void za(Be(["internal","$parameter is not a symbol"]));if(r[1][H]!==u)return void za(Be(["internal","$parameters in foreign namespace: "+C(r[1][H])+Ts.NSinfix+r[1][Y]+" from: "+C(u)]));r[1][1]=f?ue:bt[o]}bt[o++]=i,r=r[2]}return bt[yt++]=e,pt=ue,lt=a[2][2][2],st=ue,bt[yt++]=kt,bt[kt=yt++]=Un,dt[ht++]=Kr,bt[yt++]=ht,bt[yt++]=!1,vt=bn,"number"==typeof(i=bt[yt-11-e])&&(a=nr[1],nr[1]=bt[i],bt[yt-11-e]=a),void(pe=u)}if(n[0]!==D?i=ue:(i=n[1],n=n[2]),t!==ue){if(i[0]===D||i[0]===Q)break;i=i[O]}}bt[yt-2-e]=n,bt[yt-1-e]=r,bt[yt++]=e,st=i,dt[ht++]=Ur,vt=xn}function Li(){var e;Fi();var r=bt[yt-1],n=r[2][2][1];bt[yt++]=n[1],A(n)&&(n[1]=st),pt=ue,lt=r[2][2][2],st=ue,bt[yt++]=kt,bt[kt=yt++]=Qn,dt[ht++]=Gn,bt[yt++]=ht,bt[yt++]=!1,vt=bn,"number"==typeof(e=bt[yt-8])&&(n=nr[1],nr[1]=bt[e],bt[yt-8]=n),pe=r[2][1][H]}function Bi(){var e,r=bt[yt-1];r&&r[x].trap?ju(r,st):(yt-=2,bt[--yt]!==Qn&&mu(pu,"nadiCallNoSpread2: lost frame sync"),(kt=bt[--yt])<jt&&jo(),(r=(e=bt[yt-2])[2][2][1])!==ue&&e[1]!==Qe&&(r[1]=bt[yt-1]),yt-=3,nr[1]=bt[--yt],pe=bt[--yt],vt=dt[--ht])}function Di(){var e=bt[yt-1];if(e&&e[x].trap)ju(e,st);else{yt-=2,bt[--yt]!==Un&&mu(pu,"nadiCallComplete: lost frame sync"),(kt=bt[--yt])<jt&&jo();var r=bt[--yt],e=bt[yt-4-r];if(e[1]!==Qe)for(var n=e[2][2][1],t=yt-r,i=r;0<=--i&&n[0]===D;)n[1]!==ue&&(n[1][1]=bt[t]),++t,n=n[2];yt-=r+5,nr[1]=bt[--yt],pe=bt[--yt],vt=dt[--ht]}}function Xi(){pt=ze,lt=st,At=st=ue,vt=bn}function zi(){bt[yt++]=kt,bt[kt=yt++]=Jn,bt[yt++]=ht,bt[yt++]=!1,bt[yt++]=pt,bt[yt++]=lt,bt[yt++]=lt,vt=yn}function Gi(){for(var e=bt[yt-1],r=bt[yt-3];;){if(At=st,vt===mn?(vt=yn,e=e[2],bt[yt-1]=e):vt===kn&&(vt=yn,A(At)?(r=ue,e=e[1][2],bt[yt-3]=r):e=e[2],bt[yt-1]=e),e[0]!==D){if(r!==ue)return e=bt[yt-2],void(bt[yt-1]=e);vt=dt[--ht]}else{if(wt&&0==--wt)return void Pu({state:Fe("task"),body:bt[yt-2],task:e,loop:r,value:At});if(e[1].breakpoint&&Nu(e))return;if(e[1][0]!==D){if((st=e[1])[0]===Q)return dt[ht++]=mn,void(vt=xn);st=st[1],vt=mn;continue}if(e[1][1][0]===D){if(e[1][1][1][0]!==D)return st=e[1][1],dt[ht++]=kn,void(vt=xn);r===ue&&e[2][0]!==D?(e=e[1],r=ue,bt[yt-1]=e,bt[yt-2]=e,bt[yt-3]=r):(wt&&++wt,bt[yt-1]=e[2],e=e[1],r=ue,bt[yt++]=kt,bt[kt=yt++]=Jn,bt[yt++]=ht,bt[yt++]=!1,bt[yt++]=r,bt[yt++]=e,bt[yt++]=e,dt[ht++]=yn),bt[yt-6]!==Jn&&mu(pu,"nadiBody1: lost frame sync");continue}if(st=e[1],vt=st[1][U]!==ue?(gt=st[1],pt=ze,lt=st[2],st=gt[U],wn):xn,!(tu<=lu&&r===ue&&e[2][0]!==D))return void(dt[ht++]=mn)}var n=bt[yt-4];return n&&n[x].trap?(dt[ht++]=vt,vt=ut,void ju(n,st)):(yt-=5,bt[--yt]!==Jn&&mu(pu,"nadiBody4: lost frame sync"),void(kt=bt[--yt]))}}function Zi(){yt-=5,bt[--yt]!==Jn&&mu(pu,"nadiBody4: lost frame sync"),kt=bt[--yt],vt=dt[--ht]}function Ji(){bt[yt++]=ue,bt[yt++]=ue,bt[yt++]=st,vt=dn}function Vi(){var e=bt[yt-1];if(e[0]!==D)return st=bt[yt-2],yt-=3,void(vt=dt[--ht]);st=e[1],dt[ht++]=hn,vt=xn}function Qi(){var e=bt[yt-1],r=bt[yt-3],n=Ce(st,ue);r!==ue?r[2]=n:bt[yt-2]=n,bt[yt-3]=n,bt[yt-1]=e[2],vt=dn}function Ui(){bt[yt++]=st,vt=Yr,st=ze}function Hi(){var e=bt[yt-1];if(!A(st)||e[0]!==D)return--yt,void(vt=dt[--ht]);st=e[1],bt[yt-1]=e[2],dt[ht++]=Yr,vt=xn}function Yi(){bt[yt++]=st,vt=Ln,st=ue}function Ki(){var e=bt[yt-1];if(A(st)||e[0]!==D)return--yt,void(vt=dt[--ht]);st=e[1],bt[yt-1]=e[2],dt[ht++]=Ln,vt=xn}function ea(){bt[yt++]=st,lt=st[2][1],st=lt,dt[ht++]=pn,vt=xn}function ra(){Xc(bt[--yt][1],st),vt=dt[--ht]}function na(){bt[yt++]=0,bt[yt++]=st,vt=Mn}function ta(){var e=bt[yt-1];if(e[0]!==D)return yt-=2,st=ue,void(vt=dt[--ht]);st=e[1][1],dt[ht++]=$n,vt=xn}function ia(){var e=bt[yt-1];vt=A(st)?(0!==bt[yt-2]&&(bt[bt[yt-2]]=Kn),yt-=2,lt=e[1][2],pt=ue,bn):(bt[yt-1]=e[2],Mn)}function aa(){st=(bt[yt++]=st)[1],dt[ht++]=sn,vt=xn}function ua(){var e=bt[--yt];st=e[2][1][1]=Ce(st,e[2][1][1]),vt=dt[--ht]}function oa(){bt[yt++]=st[2][2],bt[yt++]=st[2][1],st=st[1],bt[yt++]=st,dt[ht++]=Fn,vt=xn}function fa(){bt[yt-1]=st,st=bt[yt-2],dt[ht++]=Wn,vt=xn}function ca(){oa(),dt[ht-1]=Jr}function sa(){vt===Wn?bt[yt-2]=st:bt[yt-1]=st,lt=bt[--yt],st=bt[--yt],pt=bt[--yt],vt===Jr&&st[0]===D&&(st[2][0]!==D?st=st[1]:(bt[yt++]=pt,bt[yt++]=st[2],bt[yt++]=lt,dt[ht++]=Jr,st=st[1],pt=ue)),vt=Vr,bt[yt++]=pt,bt[yt++]=lt}function la(){var e=ue;if(lt=st,st=bt[--yt],pt=bt[--yt],!A(st))return st=ue,void(vt=dt[--ht]);switch(st[0]){case D:if(lt===ue)e=st;else if(lt[0]===G||lt[0]===Z){var r=Ro(lt,65535);if(null!==r){for(e=st,r=Math.abs(r);e[0]===D&&0<=--r;)e=e[2];s.negative(lt[3])||(e=e[1])}}else if(va(gr))return;break;case X:if(va(vr))return;if(pt===ue)return ga();e=ue;break;case k:if(va(Sr))return;if(pt===ue)return ga();e=ue;break;case z:if(lt[0]!==G)return va(yr)?void 0:pt===ue?ga():void da("String");var n=Ro(lt,Number.MAX_SAFE_INTEGER),e=Fe(n<0?st[3].charAt(st[3].length+n):st[3].charAt(n));break;case G:return pa()?void 0:va(dr)?void 0:pt===ue?ga():void da("Number");case Z:return pa()?void 0:va(hr)?void 0:pt===ue?ga():void da("Number");case Q:if(Lu(st[3])){if(e=ue,n=lt[0]===X?lt[Y]:lt[0]===z?lt[K]:(lt[0]===G||lt[0]===Z)&&Ro(lt,Number.MAX_SAFE_INTEGER),B(st[3]))if("length"==n)e=Eo(st[3].length);else{if(va(mr))return;if(lt[0]===G)(e=st[3][n])===L&&(e=ue);else if(pt!==ue)return lt=Ce(st,Ce(gt=lt,pt[1])),pt=mr,st=Mr[3],void(vt=wn)}else if(!1!==n)if(st[3].hasOwnProperty(n))e=st[3][n];else if(st[3]instanceof Xu)pt!==ue?(e=no(st,n))===ue&&(e=no(st,".undefined",!0))!==ue&&(pt=Ce(Ce(lt,pt[1]),ue)):(e=no(st,".."+n,!0))!==ue&&(pt=Ce(ue,ue));else if(va(kr))return}else if(e=bo(st,lt),pt!==ue)return lt=Ce(st,Ce(gt=lt,pt[1])),pt=ar,st=_r[3],void(vt=wn);break;default:return ga()}if(pt===ue)return st=e,void(vt=dt[--ht]);gt=lt;for(var t=0;e[0]===X&&!(++t>Lt);)if(e[3]!==ue)e=e[3];else{if(e[1]===e)break;e=e[1]}bt[yt++]=st,dt[ht++]=Qr,lt=pt[1],pt=ze,st=e,vt=it}function pa(){return(lt[0]===G||lt[0]===Z)&&(vt=dt[--ht],za(Be(["internal","numeric scalar dereference"]),ue),1)}function ga(){st=pt===ue&&st[0]===z&&(lt[0]===z&&"length"==lt[K]||lt[0]===X&&"length"==lt[Y])?Eo(st[K].length):st[0]===X?Ce(ar,Ce(st,Ce(lt,pt))):ue,vt=dt[--ht]}function va(e){var r=Zc(e,lt);if(!A(r)){if(st[0]===D)return;if(!A(r=Zc(st,lt)))return}gt=lt;for(var n=0;r[0]===X&&!(++n>Lt);)if(r[3]!==ue)r=r[3];else{if(r[1]===r)break;r=r[1]}return lt=Ce(Ce(tr,Ce(st,ue)),pt[1]),pt=ze,st=r,vt=wn,1}function da(e){e=je(e,[ce,se]);lt=Ce(e,Ce(gt=lt,Ce(st,pt[1]))),pt=ar,st=_r[3],vt=wn}function ha(){--yt,vt=dt[--ht]}function ba(e,r,n,t){var i=no(e,r);i===ue&&(i=no(e,".undefined",!0))!==ue&&(n=Ce(Ce(Fe(r),n),ue));for(var a=0;i[0]===X&&!(++a>Lt);)if(i[3]!==ue)i=i[3];else{if(i[1]===i)break;i=i[1]}bt[yt++]=e,dt[ht++]=Qr,lt=n,pt=t?ze:ue,st=i,vt=it}function ya(){It=st;var e=vt===Xr,r=bt[yt-1];if(r&&r[x].trap)return ju(r,st),bt[yt-13]=wt,void(bt[yt-14]=xt);vt=dt[--ht],yt-=2,bt[--yt]!==Zn&&mu(pu,"nadiInterruptRestore: lost frame sync"),(kt=bt[--yt])<jt&&jo(),st=bt[--yt],lt=bt[--yt],pt=bt[--yt],gt=bt[--yt],nr[1]=bt[--yt],pe=bt[--yt],yt-=2,xt?yt-=2:(wt=bt[--yt],xt=bt[--yt]),e&&(st=It)}function ma(){var e=gt,r=pt,n=lt,t=st,i=e[0]>=J&&e[0]<=V?e[3](t,n,r,e):ue;i===Mt?ci(e,t,n,r):(st=i,vt=dt[--ht])}function ka(){xu(st),vt=dt[--ht]}function wa(){bt[yt++]=ue,bt[yt++]=Hn,bt[yt++]=ue,bt[yt++]=st,bt[yt++]=kt,bt[kt=yt++]=Vn,bt[yt++]=ht,bt[yt++]=!1,pt=ue,lt=st[1],st=ue,dt[ht++]=Dn,vt=bn}function xa(){bt[yt-6]=st,bt[yt-3]=ft,kt<jt&&jo(),bt[yt-7]===Kn&&(Ke[1]=Ke),st=bt[yt-5],pt=ue,lt=st[2][2][1],st=ue,dt[ht++]=Xn,vt=bn}function Sa(){st=bt[yt-6],lt=bt[yt-7],pt=bt[yt-8],kt=bt[yt-4];var e=bt[yt-1];e&&e[x].trap?ju(e,st):(yt-=2,bt[--yt]!==ft&&mu(pu,"nadiCatch2: lost frame sync"),yt-=5,vt=(lt===Kn||lt===Hn||(lt===rt?(Ga(st),bt[kt]==Vn&&(Ke[1]=Ke)):lt===nt?Ja(pt):lt===tt?Va(pt):Xa(Ke[1],ze)),dt[--ht]))}function Oa(){return ue}function Na(e){return e[0]!==D&&e[0]!==Q?e[1]:(dt[ht++]=xn,e)}function ja(e,r){return dt[ht++]=jn,lt=r,e}function Pa(e){return dt[ht++]=zr,pt=ze,lt=e[2],e[1]}function Ta(e){return dt[ht++]=zr,pt=ue,lt=e[2],e[1]}Ee("undefined",Oa,J);var Aa=Ie(Ta,V);function Ia(e){return dt[ht++]=vn,e}function Ea(e){return dt[ht++]=Hr,e}function Ma(e){return dt[ht++]=Cn,e}function $a(e){return dt[ht++]=gn,e}function qa(e){return e[0]!==D?ue:(dt[ht++]=ln,e)}function _a(e){return dt[ht++]=En,e}function Ra(e){return e[2][1][0]!==X?ue:Cr(e[2][1])?(dt[ht++]=cn,e):st}function Fa(e){return dt[ht++]=Rn,e}function Wa(e){return dt[ht++]=Zr,e}function Ca(e){return dt[ht++]=Pn,e}function La(e){return dt[ht++]=rn,e}function Ba(e){return dt[ht++]=Bn,e}function Da(){if(void 0===st||void 0===lt||void 0===pt||void 0===gt)debugger;var e,r,n,t,i=kt;if(yt<kt||kt+50<yt)debugger;for(t=0;t<yt;++t)if(void 0===bt[t])debugger;for(;0<i;){switch(bt[i]){case Qn:if(!I((r=bt[i-3])[1]))debugger;if(bt[i-6][0]!=k)debugger;if((n=bt[i+1])<0||ht+1<n)debugger;if(dt[n-1]!=Gn)debugger;break;case Un:if((e=bt[i-2])<0||1e3<e)debugger;if(!I((r=bt[i-6-e])[1]))debugger;if(bt[i-9-e][0]!=k)debugger;if((n=bt[i+1])<0||ht+1<n)debugger;if(dt[n-1]!=Kr)debugger;break;case ot:if((e=bt[i-4])<0||1e3<e)debugger;if((r=bt[i-2])[0]!=S&&r[0]!=Q)debugger;if(n=bt[i+1],dt[n-1]!=at)debugger;break;case Jn:if((n=bt[i+1])<0||ht+1<n)debugger;break;case Vn:if(bt[i-4]<0||bt[i-4]>tt)debugger;if((n=bt[i+1])<0||ht+1<n)debugger;break;case ft:break;case Zn:if(bt[i-7][0]!=k)debugger;break;default:debugger}if(bt[i-1]<0||bt[i-1]>=i)debugger;i=bt[i-1]}}function Xa(e,r){var n,t,i,a=kt;if(Da(),e[0]===D&&e[1][0]===X&&"internal"==e[1][Y]&&e[2][1]===er&&er[U]!==ue)return Qt(Ce(er,ue),"escape"),dt[ht++]=vt,st;if(Ke[U]!==ue&&r===ue)return Ke[1]===Ke&&(Ke[1]=e),vt=dt[--ht],Qt(Ce(Ir,Ce(Ke[1],Ce(ze,ue))),"exception-rethrow"),Qt(Ce(Ke,Ce(e,ue)),"exception-hook"),dt[ht++]=vt,st;for(st=ue;0<a;){var u=bt[a];switch(u){case Qn:du<=tu&&Su(e),t=bt[a-2],(i=bt[a-3][2][2][1])!==ue&&(i[1]=t),nr[1]=bt[a-5],pe=bt[a-6];break;case Un:for(du<=tu&&Su(e),t=bt[a-2],i=bt[a-6-t][2][2][1],n=t-1;0<=n;--n)i[1][1]=bt[a-3-n],i=i[2];nr[1]=bt[a-8-t],pe=bt[a-9-t];break;case ot:du<=tu&&Su(e);break;case Jn:break;case Vn:return bt[(kt=a)-4]!==Hn?(bt[a-4]===Kn&&(Ke[1]=e),bt[a-4]=et,yt=a+3,ht=bt[a+1],dt[ht++]=Dn):(Ke[1]=e,kt<jt&&jo(),bt[a-4]=Yn,yt=a+3,ht=bt[a+1],st=bt[a-2],bt[yt++]=a-4,bt[yt++]=st[2][1],dt[ht++]=Dn,dt[ht++]=Mn),Ke;case ft:break;case Zn:if(nr[1]=bt[a-6],pe=bt[a-7],"future"==bt[a-8])bt[a-9][2][2][1][x][".exception"]=e;else{if("debugger"==ds(Ke[1]))break;if(!/fiberwake|escape|xcallback/.test(bt[a-8]))break}return Ke[1]=Ke,yt=a+3,ht=bt[a+1],ue;default:mu(pu,"nfuncThrow: unknown frame type on stack: "+u)}a=bt[a-1]}return Ke[1]!==Ke&&(e=Ke[1]),e[0]===D&&e[1][0]===X&&"internal"==e[1][Y]?e[2][1]!==er&&mu(pu,ds(e[2][1])):"debugger"!=ds(e)&&mu(pu,"uncaught exception: "+ds(e)),Jt(),Vt(Be(["driver",101])),dt[ht++]=vt,st}function za(e){Xa(e,ue),vt=dt[--ht]}function Ga(e,r){for(var n,t,i,a,u=kt;0<u;){var o=bt[u];switch(o){case Un:if(t=bt[u-2],(a=bt[u-6-t])[1]!==Ue)return ht=bt[u+1],(kt=u)<jt&&jo(),yt=u+3,e;for(i=a[2][2][1],n=t-1;0<=n;--n)i[1][1]=bt[u-3-n],i=i[2];nr[1]=bt[u-8-t],pe=bt[u-9-t];break;case Qn:if((a=bt[u-3])[1]!==Ue)return ht=bt[u+1],(kt=u)<jt&&jo(),yt=u+3,e;t=bt[u-2],(i=a[2][2][1])!==ue&&(i[1]=t),nr[1]=bt[u-5],pe=bt[u-6];break;case ot:case Jn:break;case Vn:if(r)break;return bt[(kt=u)-4]=rt,bt[u-3]=e,yt=u+3,ht=bt[u+1],dt[ht++]=Dn,e;case ft:case Zn:break;default:mu(pu,"naanReturn: unknown frame type on stack: "+o)}u=bt[u-1]}return Xa(Be(["internal","$orphaned return"]),ue)}function Za(e,r){return Ga(e?r(0):At)}function Ja(e){for(var r,n,t,i,a=kt;0<a;){var u=bt[a];switch(u){case Un:if(r=bt[a-2],(i=bt[a-6-r])[1]===Ue){for(t=i[2][2][1],n=r-1;0<=n;--n)t[1][1]=bt[a-3-n],t=t[2];nr[1]=bt[a-8-r],pe=bt[a-9-r];break}case Qn:a=-1;continue;case ot:break;case Jn:if(bt[a+3]!==ze)break;if(e!==ue&&qc(e,bt[a+4][O])===ue)break;return ht=bt[a+1],yt=(kt=a)+6,bt[a+3]=ue,bt[a+5]=ue,dt[ht++]=yn,At;case Vn:return bt[(kt=a)-5]=e,bt[a-4]=nt,yt=a+3,ht=bt[a+1],dt[ht++]=Dn,At;case ft:case Zn:break;default:mu(pu,"nfuncBreak: unknown frame type on stack: "+u)}a=bt[a-1]}return Xa(Be(["internal",'$break tag "'+ds(e)+'" not found']),ue)}function Va(e){for(var r,n,t,i,a=kt;0<a;){var u=bt[a];switch(u){case Un:if(r=bt[a-2],(i=bt[a-6-r])[1]===Ue){for(t=i[2][2][1],n=r-1;0<=n;--n)t[1][1]=bt[a-3-n],t=t[2];nr[1]=bt[a-8-r],pe=bt[a-9-r];break}case Qn:a=-1;continue;case ot:break;case Jn:if(bt[a+3]!==ze)break;if(e!==ue&&qc(e,bt[a+4][O])===ue)break;return ht=bt[a+1],yt=(kt=a)+6,bt[a+5]=bt[a+4],dt[ht++]=yn,ue;case Vn:return bt[(kt=a)-5]=e,bt[a-4]=tt,yt=a+3,ht=bt[a+1],dt[ht++]=Dn,At;case ft:case Zn:break;default:mu(pu,"nfuncContinue: unknown frame type on stack: "+u)}a=bt[a-1]}return Xa(Be(["internal",'$continue tag "'+ds(e)+'" not found']),ue)}function Qa(e){var n=[],t=[];function i(e){var r=dc(e)!==ue?e[H]:e,e=n.indexOf(r);return e<0&&(e=n.push(r)-1,t[e]={}),t[e]}function r(e,r){i(e)[e[Y]]=r}function a(e){return i(e)[e[Y]]}for(var u=ue;0<e;){var o,f,c,s,l,p,g,v,d,h,b,y=bt[e];switch(y){case Qn:p=bt[e-2],g=bt[e-3],v=bt[e-4],bt[e-5],b=bt[e-6],d=g[1],(o=a(h=g[2][2][1]))===L&&(o=h[1]),r(h,p),l=h===ue?ue:Ce(h,Ce(h[1],Ce(p,ue))),s=Ce(d,Ce(v,Ce(l,Ce(g,Ce(b,ue)))));break;case Un:for(f=bt[e-2],g=bt[e-6-f],v=bt[e-7-f],bt[e-8-f],b=bt[e-9-f],d=g[1],h=g[2][2][1],l=ue,c=f-1;0<=c;--c)(o=a(h[1]))===L&&(o=h[1][1]),l=Ce(Ce(h[1],Ce(o,Ce(bt[e-3-c],ue))),l),h=h[2];for(h=g[2][2][1],c=f-1;0<=c;--c)r(h[1],bt[e-3-c]),h=h[2];s=Ce(d,Ce(v,Ce(l=zf(l,ue),Ce(g,Ce(b,ue)))));break;case ot:for(f=bt[e-4],d=(g=bt[e-2])[0]===S?pr:xr,l=ue,c=f-1;0<=c;--c)l=Ce(bt[e-4-f+c],l);s=Ce(d,Ce(l,Ce(g,ue)));break;case Jn:s=Ce(d=bt[e+3]===ue?ur:or,Ce(bt[e+4],Ce(bt[e+5],ue)));break;case Vn:s=Ce(d=fr,Ce(bt[e-2],ue));break;case ft:break;case Zn:s=Ce(d=cr,Ce(bt[e-7],Ce(Fe(bt[e-8]),Ce(bt[e-9],ue))));break;default:return mu(pu,"nfuncStacktrace: unknown frame type on stack: "+y),ue}s[1]===ue&&mu(pu,"nfuncStacktrace: bad frameid"),u=Ce(s,u),e=bt[e-1]}return zf(u,ue)}function Ua(e,r){for(var n=kt;0<n;){var t=bt[n];switch(t){case Qn:case Un:case ot:case Jn:case Vn:case ft:case Zn:if(0<e--){n=bt[n-1];continue}var i=bt[n+2];return i=i||(r?bt[n+2]=Du():ue);default:return mu(pu,"naanFrameHook: unknown frame type on stack: "+t),ue}}return ue}function Ha(e){for(var r,n=kt;0<n;){var t=bt[n];switch(t){case Qn:return bt[n-3];case Un:return r=bt[n-2],bt[n-6-r];case ot:case Jn:case Vn:case ft:case Zn:break;default:return mu(pu,"nfuncCaller: unknown frame type on stack: "+t),ue}n=bt[n-1]}return ue}function Ya(e){for(var r,n=kt;0<n;){var t=bt[n];switch(t){case Qn:return bt[n-6];case Un:return r=bt[n-2],bt[n-9-r];case ot:case Jn:case Vn:case ft:case Zn:break;default:return mu(pu,"nfuncNscaller: unknown frame type on stack: "+t),ue}n=bt[n-1]}return ue}function Ka(e,r){var n,t,i,a,u,o,f,c,s;function l(e){switch(e){case Un:case Qn:case ot:case Vn:case ft:case Zn:return 3;case Jn:return 6}}(s=[]).saveSelf=nr[1],s.saveExecNS=pe,s.stephook=xt,s.stepping=wt,s.stack1=st,s.stack2=lt,s.stack3=pt,s.stack4=gt,a=kt,u=yt,f=ht;e:for(;0<a;){switch(n={},0!==jt&&jt<a&&(n.sprint=!0),n.ftype=bt[a],o=a+l(n.ftype),n.runargs=bt.slice(o,u),n.ftype){case Un:for(n.argcount=bt[a-2],u=a-9-n.argcount,n.execNS=bt[a-9-n.argcount],n.saveSelf=bt[a-8-n.argcount],n.fname=bt[a-7-n.argcount],n.fbind=bt[a-6-n.argcount],n.feval=bt[a-5-n.argcount],n.inarg=bt[a-4-n.argcount],n.inparm=bt[a-3-n.argcount],n.arglist=[],i=n.fbind[2][2][1],t=n.argcount-1;0<=t;--t)n.arglist.push(i[1][1]),i=i[2];if(c=bt[a+1]-1,n.runstates=dt.slice(c,f),n.hook=bt[a+2],s.push(n),r){if(n.fbind[1]===Je||n.fbind[1]===He)for(i=n.fbind[2][2][1],t=n.argcount-1;0<=t;--t)i[1]!==ue&&(i[1][1]=bt[a-3-t]),i=i[2];nr[1]=n.saveSelf,pe=n.execNS}if(!0===e&&n.fbind[1]!==Ue)break e;break;case Qn:if(u=a-6,n.execNS=bt[a-6],n.saveSelf=bt[a-5],n.fname=bt[a-4],n.fbind=bt[a-3],i=n.fbind[2][2][1],n.arg=i[1],c=bt[a+1]-1,n.runstates=dt.slice(c,f),n.hook=bt[a+2],s.push(n),r&&(n.fbind[1]!==Je&&n.fbind[1]!==He||i===ue||(i[1]=bt[a-2]),nr[1]=n.saveSelf,pe=n.execNS),!0===e)break e;break;case ot:for(n.argcount=bt[a-4],u=a-6-n.argcount,n.targetThis=bt[a-6-n.argcount],n.arglist=[],t=n.argcount-1;0<=t;--t)n.arglist.push(bt[a-5-t]);n.inarg=bt[a-3],n.fbind=bt[a-2],c=bt[a+1]-1,n.runstates=dt.slice(c,f),n.hook=bt[a+2],s.push(n),r&&(nr[1]=n.saveSelf,pe=n.execNS);break;case Jn:u=a-1,n.loop=bt[a+3],n.body=bt[a+4],n.task=bt[a+5],c=bt[a+1],n.runstates=dt.slice(c,f),n.hook=bt[a+2],s.push(n);break;case Vn:case ft:u=a-5,n.tag=bt[a-5],n.status=bt[a-4],n.result=bt[a-3],n.catchargs=bt[a-2],c=bt[a+1],n.runstates=dt.slice(c,f),n.hook=bt[a+2],s.push(n);break;case Zn:break e;default:mu(pu,"naanSaveProcState: unknown frame type on stack: "+n.ftype)}if(a=bt[a-1],f=c,"number"==typeof e&&a<=e)break e}return r&&((kt=a)<jt&&jo(),yt=0===kt?0:a+l(bt[kt]),ht=c),s}function eu(e){for(var r,n,t,i,a=e.length-1;0<=a;--a){switch((r=e[a]).ftype){case Un:for(bt[yt++]=r.execNS,bt[yt++]=r.saveSelf,bt[yt++]=r.fname,bt[yt++]=r.fbind,bt[yt++]=r.feval,bt[yt++]=r.inarg,bt[yt++]=r.inparm,t=r.fbind[2][2][1],n=0;n<r.argcount;++n)bt[yt++]=t[1][1],r.fbind[1]!==Je&&r.fbind[1]!==He||t[1]===ue||(t[1][1]=r.arglist[n]),t=t[2];bt[yt++]=r.argcount,bt[yt++]=kt,kt=yt,bt[yt++]=Un,bt[yt++]=ht+1,bt[yt++]=r.hook;break;case Qn:bt[yt++]=r.execNS,bt[yt++]=r.saveSelf,bt[yt++]=r.fname,bt[yt++]=r.fbind,t=r.fbind[2][2][1],bt[yt++]=t[1],r.fbind[1]!==Je&&r.fbind[1]!==He||t===ue||(t[1][1]=r.arg),bt[yt++]=kt,kt=yt,bt[yt++]=Qn,bt[yt++]=ht+1,bt[yt++]=r.hook;break;case ot:for(bt[yt++]=r.targetThis,n=0;n<r.argcount;++n)bt[yt++]=r.arglist[n];bt[yt++]=r.argcount,bt[yt++]=r.inarg,bt[yt++]=r.fbind,bt[yt++]=kt,kt=yt,bt[yt++]=ot,bt[yt++]=ht+1,bt[yt++]=r.hook;break;case Jn:bt[yt++]=kt,kt=yt,bt[yt++]=Jn,bt[yt++]=ht,bt[yt++]=r.hook,bt[yt++]=r.loop,bt[yt++]=r.body,bt[yt++]=r.task;break;case Vn:case ft:bt[yt++]=r.tag,bt[yt++]=r.status,bt[yt++]=r.result,bt[yt++]=r.catchargs,bt[yt++]=kt,kt=yt,bt[yt++]=r.ftype,bt[yt++]=ht,bt[yt++]=r.hook;break;case Zn:default:mu(pu,"naanRunProcState: unknown frame type on stack: "+r.ftype)}for(i=0;i<r.runstates.length;++i)dt[ht++]=r.runstates[i];for(n=0;n<r.runargs.length;++n)bt[yt++]=r.runargs[n];r.sprint&&(0===jt?No():kt<jt&&(jt=kt))}st=e.stack1,lt=e.stack2,pt=e.stack3,gt=e.stack4,xt=e.stephook,wt=e.stepping,nr[1]=e.saveSelf,pe=e.saveExecNS}function ru(){var e=xo(0);return e[w]=ue,e[x].execstate=Ka(!0),e}function nu(e,r){return e[0]!==Q||Lu(e[x])||!B(e[x].execstate)?ue:(eu(e[x].execstate),st=r)}var tu=pu,iu=0,au=0,uu=30,ou=0,fu=3*uu,cu="",su=0,lu=0,pu=1,gu=2,vu=3,du=4,hu=5,bu=ue,yu=bu[1];function mu(e,r){if(e<=tu&&T.hasOwnProperty("debug-write"))try{T["debug-write"](r,e)}catch(e){}}function ku(){var e="",r=0;for((fu<=iu||iu<ou)&&(au=Math.floor(iu/uu)*uu-2*uu,ou=au+uu,fu=au+3*uu,0<au&&(e="*")),0<au&&(e+=iu.toString(),e="     ".substring(e.length)+e+"   ",r=au);r++<iu;)e+=r%2==0?"|   ":"    ";return e}function wu(e,r,n,t){0<cu.length&&mu(su,cu);for(var i=n,a="";i[g]===D;)0<a.length&&(a+=" "),t&&i[1][0]===X?a+=ds(i[1][1],{quote:ze}):a+=ds(i[1],{quote:ze}),i=i[N];cu=ku()+r+"("+a+")",su=e,++iu}function xu(e){--iu<0&&(iu=0),0<cu.length?(mu(su,cu+"==> "+ds(e,{quote:ze})),cu=""):mu(du,ku()+"==> "+ds(e,{quote:ze}))}function Su(e){--iu<0&&(iu=0),0<cu.length?(mu(su,cu+"==> unknown"),cu=""):mu(du,ku()+"==> unknown"),mu(du,"==> proc terminated by throw: ",ds(e))}function Ou(){tu=gu,cu="",su=iu=0}function Nu(e){if(qu[1]===qu&&e[1].breakpoint[0]===Q){var r=e[1].breakpoint[x];if(Lu(r)&&A(r.enable))return qu[1]=e,Qt(Ce(Aa,Ce(r.proc,Ce(e[1].breakpoint,Ce(At,ue)))),"breakpoint"),1}}function ju(e,r){var n;e[x].steps?(0<=(n=Ro(e[x].steps,65535))&&(wt=n+1,xt=e[x].trap),delete e[x].steps):Qt(Ce(Aa,Ce(e[x].trap,Ce(r,ue))),"frametrap"),delete e[x].trap}function Pu(e){var r=xt;xt=wt=!1;var n=Du();R(n[x],e),Qt(Ce(Aa,Ce(r,Ce(n,ue))),"steptrap")}function Tu(){return Qa(kt)}function Au(e){return e[1][0]!==X?ue:(bu=e[1],yu=bu[1],e[1])}function Iu(e,r){for(var n="",t=0;t<e;++t)n+=ds(r(t)),t<e-1&&(n+=" ");return""!==n&&mu(gu,n),ze}function Eu(e,r){var n=tu;tu=gu,Iu(e,r),tu=n;debugger;return ze}function Mu(e){var r=tu;return null===(tu=Ro(e,9))&&(tu=r),Eo(r)}function $u(e,r){function i(e,r){if(e[0]===Q){var n,t=e[x];if(!B(t)||!Lu(t))return;for(n=0;n<t.length;++n)i(t[n],r)}else{if(e[0]!==D)return;r===De?delete e[1].breakpoint:e[1].breakpoint=r}return 1}if(0===e)return E(qu[1]===qu);var n=r(0);if(n[0]===X)return 1<e?ue:(n===ze?qu[1]=qu:n===ue&&(qu[1]=ue),E(qu[1]===qu));if(2<e)return ue;var t=r(1);if(t!==ue){if(t!==De){e=Du(),r=e[x];return r.enable=ze,r.proc=t,i(n,e)?e:ue}i(n,t)}else if(n[1].breakpoint)return n[1].breakpoint;return ue}var qu=Ee("breakpoint",$u,S);function _u(e,r,n){var t,i,e=Ro(e,65535);if(null===e||e<0)return ue;if(r===ue)return Ua(e);if(r[0]===G){if(s.negative(r[3]))return ue;t=r,i=n}else i=r;e=Ua(e,!0);return e!==ue&&(e[x].trap=i,t?e[x].steps=t:delete e[x].steps),e}var Ru="** Rcz **",Fu=function(){};function Wu(e){var p=new WeakMap;return function e(r){var n,t;if(p.get(r))return p.get(r);if(B(t=r[x])){n=Cu(mr,ue),p.set(r,n);for(var i,a=n[x],u=0;u<t.length;++u)(i=t[u])[0]===Q&&Lu(i[x])?a[u]=e(i):a[u]=i}else{n=(r[3]instanceof Xu?zu:Du)(),p.set(r,n),n[2]=r[2];for(var o,f=n[x],c=Object.getOwnPropertyNames(t),s=0;s<c.length;++s){var l=t[o=c[s]];l[0]===Q&&Lu(l[x])?f[o]=e(l):f[o]=l}}return n}(e)}function Cu(e,r,n){if(e===ue)return ue;if(e===kr)return r[0]!==Q||B(r[x])?_(r):(Lu(r[x])?Du:oo)(r[x]);if(e===wr){var t=zu();return r[0]===X&&r[3][1]===Qe&&Jc(t,Fe(".closure"),r),t}if(e===mr){var i;if(r[0]===Q&&B(r[x])){if(!Lu(r[x]))return uo(r[x],new WeakMap);i=r[x].slice()}else i=q(r);return i[Ru]=Fu,We(i)}if(e[0]===Q)return Lu(e[x])?Wu(e):uo(e[x],new WeakMap);if(e!==Sr)return e===Or?Qu():e===Nr?Ku():e===jr?Ns(r,n):ue;if(r[0]!==z&&r[0]!==G)return ue;r=ve(r);return fe.splice(0,0,r),r}function Lu(e){return B(e)?e[Ru]===Fu:e instanceof Fu}function Bu(){}function Du(e){var r=We(ue),n=new Bu;return e&&Object.assign(n,e),r[x]=n,r}function Xu(){}function zu(){var e=We(ue),r=new Xu;return e[x]=r,e}Bu.prototype=Object.create(Fu.prototype),Bu.prototype.constructor=Bu,Xu.prototype=Object.create(Fu.prototype),Xu.prototype.constructor=Xu;var Gu=0,Zu={};function Ju(e){return null===(e=Ro(e,Number.MAX_SAFE_INTEGER))||e<0?e=L:2147483647<e&&(e=2147483647),e}function Vu(i,n,t){var a,u,o=[],f=0,c=++Gu;function s(e,r){return r&&0<r?(l(),Zu[c].delay=r,setTimeout(e,r)):(Promise.resolve().then(e),-1)}function l(e){var r=Zu[c];(r=r||{nonce:i,start:(new Date).getTime(),waiting:[]}).count=f,n&&(r.execute=n),e&&r.waiting.push(e),Zu[c]=r}function p(e,r){r&&0<r&&clearTimeout(e)}function g(e){var r=i[x];if(r.hasOwnProperty(".exception")){var n=r[".exception"];return delete r[".exception"],e?Xa(n,ue):za(n)}return e}function v(e){var r=ze;for(u&&(!0===u?r=ue:(p(u,t),u=L)),a=e;0<o.length;)!function(n,t){var e;(e=Zu[c])&&e.waiting.pop(),s(function(){var e,r;e=n,r=t,Qt(Ce(tr,Ce(i,ue)),"fiberwake"),eu(e),st=r,g(),Yt(!0)})}(o.pop(),a);return To(),delete Zu[c],r}function r(e){var r=pe,n=nr[1];return function(){!0!==u&&(++f,u=!0,Qt(Ce(Aa,Ce(e,Ce(i,ue))),"future"),nr[1]=n,pe=r,Yt(!0),v(It),T.hasOwnProperty("interrupted")&&T.interrupted(b))}}n&&0<=t&&(u=s(r(n),t)),this.wait=Ee("wait",function(e){return a?g(a):(e===ue&&(e=Ha()),vt!==Tn&&l(e),o.push(Ka(!1,!0)),++Ct,ze)},J,!0)[U],this.signal=Ee("signal",v,J,!0)[U],this.reset=Ee("reset",function(e){return!0===u&&a===L?Xa(Be(["internal","$can't reschedule future within itself"]),ue):(a=L,n&&(u&&!0!==u&&p(u,t),e=Ju(e),t=e||t||0,u=s(r(n),t)),i)},J,!0)[U]}function Qu(){var e=We(!1),r=new Vu(e);return e[w]=ue,e[x]=r,e}function Uu(e){return E(e[0]===Q&&e[x]instanceof Vu)}function Hu(e,r){var n=We(!1),r=new Vu(n,e,Ju(r));return r.cancel=r.signal,r.run=r.reset,delete r.signal,delete r.reset,n[w]=ue,n[x]=r,n}function Yu(){for(var e=Object.getOwnPropertyNames(Zu),r=ue,n=0;n<e.length;++n){var t=Zu[e[n]],i=new Bu;i.nonce=t.nonce,i.start=Eo(t.start),i.count=Eo(t.count),t.delay&&(i.delay=Eo(t.delay)),t.execute&&(i.execute=t.execute),t.waiting&&(i.waiting=$(t.waiting)),r=Ce(We(i),r)}return r}function Ku(e){var r=We(new WeakMap);return r[w]=ue,r}function eo(e){return E(e[0]===Q&&e[x]instanceof WeakMap)}function ro(e,r){var b=[],y=[];function m(e,r){for(;;){if(e[0]!==D)return(e[0]===Q&&Lu(e[x])?k:_c)(e,r);if(r[0]!==D)return ue;if(m(e[1],r[1])===ue)return ue;e=e[2],r=r[2]}}function k(e,r){var n;if(e===r)return ze;if(b.push(e),B(e[x])){if(!B(r[x]))return ue;y.push(r);var t,i,a,u=e[x],o=r[x];if(u.length!=o.length)return ue;for(t=0;t<u.length;++t)if(i=u[t],a=o[t],"number"==typeof i){if(i!=a)return ue}else if(i[0]===Q&&Lu(i[x])){if((n=b.indexOf(i))!=y.indexOf(a))return ue;if(n<0&&(n=b.length,k(i,a)===ue))return ue;u[t]=n,o[t]=n}else if(m(i,a)===ue)return ue}else{if(B(r[x]))return ue;y.push(r);var f,c,s,l=e[x],p=r[x],g=Object.getOwnPropertyNames(l).sort(),v=Object.getOwnPropertyNames(p).sort();if(g.length!=v.length)return ue;for(f=0;f<g.length;++f){if((c=g[f])!=(s=v[f]))return ue;var d=l[c],h=p[s];if("number"==typeof d){if(d!=h)return ue}else if(d[0]===Q&&Lu(d[x])){if((n=b.indexOf(d))!=y.indexOf(h))return ue;if(n<0&&(n=b.length,k(d,h)===ue))return ue;l[c]=n,p[s]=n}else if(m(d,h)===ue)return ue}}return ze}function s(e,r){if(e[0]===Q&&Lu(e[x]))if(B(e[x]))for(var n,t=e[x],i=0;i<t.length;++i)"number"==typeof(n=t[i])&&(n=r[n],t[i]=n),s(n,r);else for(var a,u=e[x],o=Object.getOwnPropertyNames(u),f=0;f<o.length;++f){var c=u[a=o[f]];"number"==typeof c&&(c=r[c],u[a]=c),s(c,r)}else e[0]===D&&(s(e[1],r),s(e[2],r))}if(e[0]!==Q||!Lu(e[x]))return ue;if(r[0]!==Q||!Lu(r[x]))return ue;var n=k(e,r);return s(e,b),s(r,y),n}function no(e,r,n){for(var t,i=e;i[0]===Q;){var a,u=i[3];if(i[2][0]===Q&&i[2][3]instanceof Bu)a=i[2][3],n&&(u=a);else if(n)break;if(u.hasOwnProperty(r))return u[r];if(!t&&a&&a.hasOwnProperty(".class"))t=i=a[".class"];else{if(!a||!a.hasOwnProperty(".parent"))break;i=a[".parent"]}}return ue}function to(e,r,n){if(e[0]!==Q)return ue;if(e[3]instanceof Xu){var t=no(e,".="+fo(r),!0);if(t!==ue){if(!Cr(e,!0))return st;vt=dt[--ht];t=Qt(Ce(Aa,Ce(t,Ce(n,ue))),"setdot",!0);return dt[ht++]=vt,nr[1]=e,t}}return yo(e,r,n)}function io(e,r){for(var n=ue,t=n,i=0;i<e.length;++i){var a=new Array(v),u=(r?ao:M)(u=e[i]);a[0]=D,a[1]=u,t!==(a[2]=ue)?t[2]=a:n=a,t=a}return n}function ao(e){return"string"==typeof e?Fe(e):"number"==typeof e?(isFinite(e)&&Math.floor(e)==e?Eo:Mo)(e):"boolean"==typeof e?E(e):e===L?De:null===e?Xe:"object"==typeof e&&Lu(e)?e:We(e)}function uo(e,r){if(e===L)return De;if(null===e)return Xe;if("object"!=typeof e||Lu(e))return ao(e);if(r.get(e))return r.get(e);var n=We(e);if(r.set(e,n),B(e)){for(var t=e.length,i=[],a=0;a<t;++a)i.push(uo(e[a],r));i[Ru]=Fu}else{var u,o=Object.getOwnPropertyNames(e);if(0===o.length&&e.constructor!==Object)i=e;else if("0"===o[0]&&o[o.length-1]===(o.length-1).toString()&&"function"==typeof e.keys)i=e;else for(i=new Bu,u=0;u<o.length;++u)try{i[o[u]]=uo(e[o[u]],r)}catch(e){}}return n[x]=i,n}function oo(e){if(e===L)return De;if(null===e)return Xe;if("object"!=typeof e||Lu(e))return ao(e);for(var r=Object.getOwnPropertyNames(e),n=new Bu,t=0;t<r.length;++t)try{n[r[t]]=ao(e[r[t]])}catch(e){}return We(n)}function fo(e,r){if(e[0]===D){if(I(e[1])){var n,t=pe,i=nr[1];return function(){return n=io(arguments,!0),Qt(Ce(Aa,Ce(e,n)),"xcallback"),nr[1]=i,pe=t,Yt(!0),T.hasOwnProperty("interrupted")&&T.interrupted(b),fo(It)}}for(f=[];e[0]===D;)f.push(fo(e[1],r)),e=e[2];return f}if(e[0]===X)return e===ze||e!==ue&&(e===De?L:e===Xe?null:e[Y]);if(e[0]===z)return e[K];if(e[0]===G)return _o(e[3]);if(e[0]===Z)return e[re];if(e[0]===Q){var a=e[x];if(!Lu(a))return a;if(r){if(r.get(a))return r.get(a)}else r=new WeakMap;if(B(a)){var u,o=a.length,f=[];for(r.set(a,f),u=0;u<o;++u)f.push(fo(a[u],r))}else{var c,s=Object.getOwnPropertyNames(a);for(f={},r.set(a,f),c=0;c<s.length;++c)f[s[c]]=fo(a[s[c]],r)}}return f}function co(e){if(e[0]===D)return e;if(e[0]!==Q)return ue;var r=e[x],n=Lu(r);if(B(r))return io(r,!n);for(var t=Object.getOwnPropertyNames(r),i=ue,a=t.length-1;0<=a;--a)try{var u,o=t[a];o!==L&&r[o]!==L&&(u=r[o],n||(u=ao(u)),i=Ce(Ce(ao(o),u),i))}catch(e){}return i}function so(e,r){function u(){var e=Ke[1],r=Ct;if(Yt(!0),r!=Ct&&Xa(Be(["internal","fiber suspended during array callback"]),ue),e!==Ke[1])throw Et}function n(e,r,n){var t,i=pe,a=nr[1];return function(){return t=Ce(arguments[0],Ce(ao(arguments[1]),Ce(r,ue))),Qt(Ce(Aa,Ce(e,t)),"arrayfilter"),nr[1]=a,pe=i,u(),1===n?It:(2===n&&(It=E(A(It))),fo(It))}}function t(r){var n,t=pe,i=nr[1];return function(){var e=r?(n=io(arguments,!1),Qt(Ce(Aa,Ce(r,n)),"arraycompare"),nr[1]=i,pe=t,u(),fo(It)):Cc(arguments[0],arguments[1]);return e}}function i(e,r,n){var t;if(r){if(r[0]!==G)return ue;null===(t=_o(r[3],Number.MAX_SAFE_INTEGER))?t=n:(t<0&&(t=e-1+t),e<=t&&(t=e-1))}else t=n;return t}function a(e,r){var n="";r=r?fo(r):",";for(var t=0;t<e.length;++t){var i=fo(e[t]);0<t?n=n+r+i:n+=i}return ao(n)}if(e<2)return ue;var o=r(0),f=r(1);if(o[0]!==Q||f[0]===D||f[0]===Q&&Lu(f))return ue;var c=o[3];if(!Lu(c)||!B(c))return ue;for(var s,l,p=fo(f),g=[],v=0;v<e-2;++v)switch(p){case"every":case"filter":case"find":case"findIndex":case"forEach":case"some":0===v&&g.push(n(r(v+2),o,2));break;case"map":0===v&&g.push(n(r(v+2),o,1));break;case"indexOf":case"join":case"lastIndexOf":case"push":case"unshift":g.push(r(v+2));break;case"concat":(l=r(v+2))[0]===Q&&B(l[3])?(Lu(s=l[3])||(s=uo(s,new WeakMap)[3]),g.push(s)):g.push([l]);break;case"copyWithin":case"slice":g.push(fo(r(v+2)));break;case"pop":case"reverse":case"shift":break;case"reduce":case"reduceRight":0===v?g.push(function(e,r){var n,t=pe,i=nr[1];return function(){return n=Ce(arguments[0],Ce(arguments[1],Ce(ao(arguments[2]),Ce(r,ue)))),Qt(Ce(Aa,Ce(e,n)),"arrayreduce"),nr[1]=i,pe=t,u(),It}}(r(v+2),o)):1==v&&g.push(r(v+2));break;case"sort":0===v&&g.push(t(r(v+2)));break;case"fill":0===v?g.push(r(v+2)):g.push(fo(r(v+2)));break;case"splice":v<2?g.push(fo(r(v+2))):g.push(r(v+2));break;default:return ue}var d=!0;switch(p){case"find":d=!1;case"every":case"filter":case"findIndex":case"forEach":case"map":case"some":if(g.length<1)return ue;break;case"sort":0===g.length&&g.push(t());break;case"indexOf":return function(e,r,n){if((n=i(e.length,n,0))===ue)return ue;for(var t=n;t<e.length;++t)if(qc(e[t],r)!=ue)return Eo(t);return Eo(-1)}(c,g[0],g[1]);case"join":return g.length<1?a(c,!1):a(c,g[0]);case"lastIndexOf":return function(e,r,n){if((n=i(e.length,n,e.length-1))===ue)return ue;for(var t=n;0<=t;--t)if(qc(e[t],r)!=ue)return Eo(t);return Eo(-1)}(c,g[0],g[1]);case"pop":case"shift":d=!1;break;case"reduce":case"reduceRight":if(d=!1,g.length<1)return ue;if(g.length<2){if(c.length<1)return ue;g.push(c[0]),c=c.slice(1)}break;case"toString":return is(o,ue);case"push":case"unshift":case"concat":case"copyWithin":case"reverse":case"slice":case"fill":case"splice":break;default:return Xa(Be(["internal",'$arrayCall "'+p+'": not defined']),ue)}try{Tt=1,vt=Dr;var h=Array.prototype[p],b=ue;return h!==L&&(b=h.apply(c,g),!d&&B(b)||(b=b===c?o:B(b)?(b[Ru]=Fu,We(b)):ao(b))),Tt=-1,b}catch(e){if(e===Et)throw e;return Tt=-1,Xa(Be(["internal",'$arrayCall "'+p+'": '+e.toString()]),ue)}}function lo(e,r){if(e[0]!==Q)return ue;var n,e=e[x];if(r[0]===X)n=r[Y];else{if(r[0]!==z)return ue;n=r[K]}return E(e.hasOwnProperty(n))}function po(e){if(e[0]===k)return Gf(e);if(e[0]!==Q)return ue;e=e[x];return B(e)?ue:io(Object.getOwnPropertyNames(e),!0)}function go(e,r){for(var n=[{}],t=0;t<e;++t){var i=r(t);if(i[0]!==Q||B(i[x])){if(i[0]===D){var a=Object.assign.apply({},n);do{}while(delete a[fo(i[1])],(i=i[2])[0]===D);n=[a]}}else Lu(i[x])?n.push(i[x]):n.push(oo(i[x])[x])}return Du(Object.assign.apply({},n))}function vo(e){return E(e[0]===Q&&!Lu(e[3]))}function ho(e,r){if(r===ue&&(r=le),e[0]!==Q||r[0]!==k)return ue;if(pe!==ce){if(e[H]!==ue)return e[H]==r?e:ue;if(r!==le&&r!==pe&&r!==fe[0])return Xa(Be(["internal","$can't lock "+ds(e)+" to "+C(r)]),ue),ue}return e[H]=r,e}function bo(e,r){if(e[0]!==Q)return ue;var n=e[3];if(n instanceof WeakMap&&r[0]!==z&&r[0]!==G&&r[0]!==Z){e=n.get(r);return e===L&&(e=ue),M(e)}if(r[0]===D||r[0]===Q&&Lu(r))return ue;var t=fo(r);try{return Lu(n)||n instanceof WeakMap?B(n)&&"length"==t?ao(n.length):n.hasOwnProperty(t)?M(n[t]):ue:ao(n[t])}catch(e){return Xa(Be(["internal",'$xget "'+t+'": '+e.toString()]),ue)}}function yo(e,r,n){if(e[0]!==Q)return ue;var t=e[3];if(t instanceof WeakMap&&r[0]!==z&&r[0]!==G&&r[0]!==Z)return Cr(e,!0)?(n===De?t.delete(r):t.set(r,n),n):st;if(r[0]===D||r[0]===Q&&Lu(r))return ue;if(!Cr(e,!0))return st;var i=fo(r);try{if(Tt=1,vt=Dr,n===De)delete t[i];else if(Lu(t)||t instanceof WeakMap)if(B(t))if("length"==i)t.length=fo(n);else{var a,u=parseInt(i);if(u!=u+"")return Tt=-1,Xa(Be(["internal","$non-numeric array index"]),ue);for(t[i]=n,a=0;a<i;++a)t[a]===L&&(t[a]=ue)}else t[i]=n;else t[i]=fo(n);return Tt=-1,n}catch(e){return Tt=-1,Xa(Be(["internal",'$xset "'+i+'": '+e.toString()]),ue)}}function mo(e,r){return e<2?ue:ko(r(0),r(1),e-2,2,r)}function ko(e,r,n,t,i){if(r[0]===D||r[0]===Q&&Lu(r[3]))return ue;var a=fo(r),u=null;if(e&&e[0]===Q){if(Lu(u=e[3]))return ue;if(u instanceof WeakMap)return ue}for(var o,f=ue,c=u===Number||u===String||u===Boolean,s=[],l=0;l<n;++l)s[l]=fo(i(l+t));try{return Tt=1,vt=Dr,r[0]===Q?f=ao(r[3].apply(u,s)):(!u||u.prototype!==L&&(o=u.prototype[a])!==L||(c=!1,o=u[a]),o!==L&&(f=ao(c?o.apply(s[0],s.slice(1)):o.apply(u,s)))),Tt=-1,f}catch(e){return Tt=-1,Xa(Be(["internal",'$xcall "'+a+'": '+e.toString()]),ue)}}function wo(e,r,n){if(e[0]!==Q||r[0]===D||r[0]===Q&&Lu(r))return ue;var t=n===ue?[]:fo(n);if(!B(t))return ue;var i=fo(r),a=null;if(e[0]===Q){if(Lu(a=e[3])){if(a.hasOwnProperty(i)){e=a[i];if(B(e))return ja(e,n)}return ue}if(a instanceof WeakMap)return ue}var u,o=ue,f=a===Number||a===String||a===Boolean;try{return Tt=1,vt=Dr,r[0]===Q?o=ao(r[3].apply(a,t)):(a.prototype!==L&&(u=a.prototype[i])!==L||(f=!1,u=a[i]),u!==L&&(o=ao(f?u.apply(t[0],t.slice(1)):u.apply(a,t)))),Tt=-1,o}catch(e){return Tt=-1,Xa(Be(["internal",'$xapply "'+i+'": '+e.toString()]),ue)}}function xo(e,r){return No(),0<e?So(r(0),e-1,1,r):So(L,0,0,r)}function So(e,r,n,t){var i;if(e===L)return(i=ao({}))[w]=oo({persist:!0}),i;if(e[0]===z||e[0]===X)return ao(l[Re(e)]);if(e[0]===G)return We(s.bigInt2uint8(e[ee]));if(e[0]===D)return We(fo(e));if(e[0]!==Q)return ue;var a,u=e[3];if(Lu(u))return ao(fo(e));if(u===WeakMap)return ue;try{if("function"==typeof u){for(var o=[null],f=0;f<r;++f)o.push(fo(t(f+n)));Tt=1,vt=Dr;var c=new(Function.prototype.bind.apply(u,o));return Tt=-1,We(c)}if(1<r)return ue;c=t(n);return Tt=1,vt=Dr,i=0===r?("object"==typeof(a=Object.create(u))?We:ao)(a):c[0]!==Q?ue:("object"==typeof(a=Object.create(u,c[3]))?We:ao)(a),Tt=-1,i}catch(e){return Tt=-1,Xa(Be(["internal","$xnew: "+e.toString()]),ue)}}function Oo(){return No(),ze}function No(){0===jt&&(Nt=Ot,jt=kt,Ot=0)}function jo(){kt<jt&&(Pt||(Ot=Nt),jt=0)}function Po(e){return Tt<0?(Tt=0,ze):(Tt=1,fi())}function To(){Tt=-1}function Ao(){return Po()}function Io(e,r){var n=new Array(t);return n[0]=G,(n[1]=n)[2]=r,n[3]=e,n}function Eo(e,r){return"number"!=typeof e||isNaN(e)?ue:(r=r||ue,Io($o(e),r))}function Mo(e){var r=new Array(c);return r[0]=Z,(r[1]=r)[2]=ue,r[3]=e,r}function $o(e){var r=Math.abs(e);"number"==typeof r&&!isNaN(r)||(r=0);r=s.int2bigInt(r,a,1);return e<0&&(r=s.negate(r)),s.trim(r,1)}function qo(e,r){var n=s.int2bigInt(r,64,1),t=1;return s.negative(e)&&(e=s.negate(e),t=-1),s.greater(e,n)?null:t*s.modInt(e,r+1)}function _o(e){var r=s.negative(e);r&&(e=s.negate(e));var n,t=s.bitSize(e);return e=a<t?Number.POSITIVE_INFINITY:i<t?(n=s.rightShift(e,t-i),s.modInt(n,Number.MAX_VALUE)*Math.pow(2,t-i)):s.modInt(e,Number.MAX_SAFE_INTEGER+1),r?-e:e}function Ro(e,r){if(e[0]===G)return qo(e[3],r);if(e[0]===Z){e=e[3];if(-r<=e&&e<=r)return e}return null}function Fo(e){if(s.bitSize(e)<=i)return _o(e);var r="";return s.negative(e)&&(e=s.negate(e),r="-"),r+s.bigInt2str(e,10)}function Wo(e){if("string"!=typeof e)return $o(e);e="-"==e.charAt(0)?s.negate(s.str2bigInt(e.substring(1),10,1)):s.str2bigInt(e,10,1);return e}function Co(e,r,n,t){return e[0]===G?Io(s.negate(e[3]),ue):e[0]===Z?Mo(-e[3]):e[0]===Q&&e[3]instanceof Xu?li(e,".negate"):si(Pe(t[2][1],"extendNegate"))}function Lo(e,r){return e[0]===G&&r[0]===G?Io(s.add(e[3],r[3]),ue):e[0]===Z&&r[0]===Z?Mo(e[3]+r[3]):e[0]===G&&r[0]===Z?Mo(_o(e[3])+r[3]):e[0]===Z&&r[0]===G?Mo(e[3]+_o(r[3])):ue}function Bo(e,r,n){var t;if(2==e&&(t=Lo(r(0),r(1)))!==ue)return t;if(1==e)return r(0);for(var i=0;i<e;++i){var a=r(i);if(a[0]===Q&&a[3]instanceof Xu)return li(a,".plus")}return si(Pe(n[2][1],"extend+"))}function Do(e,r){return e[0]===G&&r[0]===G?Io(s.sub(e[3],r[3]),ue):e[0]===Z&&r[0]===Z?Mo(e[3]-r[3]):e[0]===G&&r[0]===Z?Mo(_o(e[3])-r[3]):e[0]===Z&&r[0]===G?Mo(e[3]-_o(r[3])):ue}function Xo(e,r,n){var t;if(2==e&&(t=Do(r(0),r(1)))!==ue)return t;if(1==e)return Co(r(0),null,null,n);for(var i=0;i<e;++i){var a=r(i);if(a[0]===Q&&a[3]instanceof Xu)return li(a,".difference")}return si(Pe(n[2][1],"extend-"))}function zo(e,r){if(e[0]!==G||r[0]!==G)return e[0]===Z&&r[0]===Z?Mo(e[3]*r[3]):e[0]===G&&r[0]===Z?Mo(_o(e[3])*r[3]):e[0]===Z&&r[0]===G?Mo(e[3]*_o(r[3])):ue;var n=e[3],t=r[3],i=s.negative(n),e=s.negative(t);return i&&(n=s.negate(n)),e&&(t=s.negate(t)),n=s.greater(n,r[3])?s.mult(n,t):s.mult(t,n),i!=e&&(n=s.negate(n)),Io(n,ue)}function Go(e,r,n){var t;if(2==e&&(t=zo(r(0),r(1)))!==ue)return t;if(1==e)return r(0);for(var i=0;i<e;++i){var a=r(i);if(a[0]===Q&&a[3]instanceof Xu)return li(a,".times")}return si(Pe(n[2][1],"extend*"))}function Zo(e,r,n,t){if(e[0]!==G||r[0]!==G)return e[0]===Z&&r[0]===Z?Mo(e[3]/r[3]):e[0]===G&&r[0]===Z?Mo(_o(e[3])/r[3]):e[0]===Z&&r[0]===G?Mo(e[3]/_o(r[3])):e[0]===Q&&e[3]instanceof Xu?li(e,".quotient"):r[0]===Q&&r[3]instanceof Xu?li(r,".quotient"):si(Pe(t[2][1],"extend/"));if(s.isZero(r[3]))return Xa(Be(["internal","$divide by zero"]),ue);var i=e[3],a=r[3],u=s.negative(i),o=s.negative(a);u&&(i=s.negate(i)),o&&(a=s.negate(a));t=s.dup(i),e=s.dup(i),r=o;return s.divide_(i,a,t,e),u&&(r=!o,s.isZero(e)||(t=s.addInt(t,1),e=s.sub(a,e))),r&&(t=s.negate(t)),Io(s.trim(t,1),ue)}function Jo(e,r,n,t){if(e[0]!==G||r[0]!==G)return e[0]===Z&&r[0]===Z?Mo(e[3]%r[3]):e[0]===G&&r[0]===Z?Mo(_o(e[3])%r[3]):e[0]===Z&&r[0]===G?Mo(e[3]%_o(r[3])):e[0]===Q&&e[3]instanceof Xu?li(e,".modulo"):r[0]===Q&&r[3]instanceof Xu?li(r,".modulo"):si(Pe(t[2][1],"extendMod"));if(s.isZero(r[3]))return Xa(Be(["internal","$divide by zero"]),ue);var i=e[3],a=r[3],t=s.negative(i),e=s.negative(a);t&&(i=s.negate(i)),e&&(a=s.negate(a));r=s.dup(i),e=s.dup(i);return s.divide_(i,a,r,e),t&&(s.isZero(e)||(e=s.sub(a,e))),Io(s.trim(e,1),ue)}function Vo(e,r,n,t){if(e[0]!==G||r[0]!==G)return e[0]===Q&&e[3]instanceof Xu?li(e,".divide"):r[0]===Q&&r[3]instanceof Xu?li(r,".divide"):si(Pe(t[2][1],"extendDivide"));if(s.isZero(r[3]))return Xa(Be(["internal","$divide by zero"]),ue);var i=e[3],a=r[3],u=s.negative(i),t=s.negative(a);u&&(i=s.negate(i)),t&&(a=s.negate(a));e=s.dup(i),r=s.dup(i);return s.divide_(i,a,e,r),u&&(s.isZero(r)||(e=s.addInt(e,1),r=s.sub(a,r))),Ce(Io(s.trim(e,1),ue),Io(s.trim(r,1),ue))}function Qo(e,r,n,t){return e[0]===G?Io(s.not(e[3]),ue):e[0]===Z?Mo(~e[3]):e[0]===Q&&e[3]instanceof Xu?li(e,".bitnot"):si(Pe(t[2][1],"extendBitNot"))}function Uo(e,r){return e[0]===G&&r[0]===G?Io(s.and(e[3],r[3]),ue):e[0]===Z&&r[0]===Z?Mo(e[3]&r[3]):e[0]===G&&r[0]===Z?Mo(_o(e[3])&r[3]):e[0]===Z&&r[0]===G?Mo(e[3]&_o(r[3])):ue}function Ho(e,r,n){var t;if(2==e&&(t=Uo(r(0),r(1)))!==ue)return t;if(1==e)return r(0);for(var i=0;i<e;++i){var a=r(i);if(a[0]===Q&&a[3]instanceof Xu)return li(a,".bitand")}return si(Pe(n[2][1],"extendBitAnd"))}function Yo(e,r){return e[0]===G&&r[0]===G?Io(s.or(e[3],r[3]),ue):e[0]===Z&&r[0]===Z?Mo(e[3]|r[3]):e[0]===G&&r[0]===Z?Mo(_o(e[3])|r[3]):e[0]===Z&&r[0]===G?Mo(e[3]|_o(r[3])):ue}function Ko(e,r,n){var t;if(2==e&&(t=Yo(r(0),r(1)))!==ue)return t;if(1==e)return r(0);for(var i=0;i<e;++i){var a=r(i);if(a[0]===Q&&a[3]instanceof Xu)return li(a,".bitor")}return si(Pe(n[2][1],"extendBitOr"))}function ef(e,r){return e[0]===G&&r[0]===G?Io(s.xor(e[3],r[3]),ue):e[0]===Z&&r[0]===Z?Mo(e[3]^r[3]):e[0]===G&&r[0]===Z?Mo(_o(e[3])^r[3]):e[0]===Z&&r[0]===G?Mo(e[3]^_o(r[3])):ue}function rf(e,r,n){var t;if(2==e&&(t=ef(r(0),r(1)))!==ue)return t;if(1==e)return r(0);for(var i=0;i<e;++i){var a=r(i);if(a[0]===Q&&a[3]instanceof Xu)return li(a,".bitxor")}return si(Pe(n[2][1],"extendBitXor"))}function nf(e,r,n,t){if(e[0]!==G||r[0]!==G)return e[0]===Z&&r[0]===Z?Mo(e[3]<<r[3]):e[0]===G&&r[0]===Z?Mo(_o(e[3])<<r[3]):e[0]===Z&&r[0]===G?Mo(e[3]<<_o(r[3])):e[0]===Q&&e[3]instanceof Xu?li(e,".shiftleft"):r[0]===Q&&r[3]instanceof Xu?li(r,".shiftleft"):si(Pe(t[2][1],"extendShiftLeft"));r=_o(r[3]);if(r<0)r=0;else if(o<r)return Xa(Be(["internal","shiftleft > ".concat(o)]),ue);return Io(s.leftShift(e[3],r),ue)}function tf(e,r,n,t){if(e[0]!==G||r[0]!==G)return e[0]===Z&&r[0]===Z?Mo(e[3]>>r[3]):e[0]===G&&r[0]===Z?Mo(_o(e[3])>>r[3]):e[0]===Z&&r[0]===G?Mo(e[3]>>_o(r[3])):e[0]===Q&&e[3]instanceof Xu?li(e,".shiftright"):r[0]===Q&&r[3]instanceof Xu?li(r,".shiftright"):si(Pe(t[2][1],"extendShiftRight"));r=_o(r[3]);return r<0&&(r=0),Io(s.rightShift(e[3],r),ue)}function af(e,r,n,t){if(e[0]!==G||r[0]!==G)return e[0]===Z&&r[0]===Z?E(e[3]>r[3]):e[0]===G&&r[0]===Z?E(_o(e[3])>r[3]):e[0]===Z&&r[0]===G?E(e[3]>_o(r[3])):e[0]===z&&r[0]===z?E(e[K]>r[K]):e[0]===Q&&e[3]instanceof Xu?li(e,".greater"):r[0]===Q&&r[3]instanceof Xu?li(r,".greater"):t?si(Pe(t[2][1],"extend>")):ue;if(s.equals(e[3],r[3]))return ue;if(s.negative(e[3])){if(!s.negative(r[3]))return ue}else if(s.negative(r[3]))return ze;return E(s.greater(e[3],r[3]))}function uf(e,r,n,t){if(e[0]!==G||r[0]!==G)return e[0]===Z&&r[0]===Z?E(e[3]<r[3]):e[0]===G&&r[0]===Z?E(_o(e[3])<r[3]):e[0]===Z&&r[0]===G?E(e[3]<_o(r[3])):e[0]===z&&r[0]===z?E(e[K]<r[K]):e[0]===Q&&e[3]instanceof Xu?li(e,".lesser"):r[0]===Q&&r[3]instanceof Xu?li(r,".lesser"):t?si(Pe(t[2][1],"extend<")):ue;if(s.equals(e[3],r[3]))return ue;if(s.negative(e[3])){if(!s.negative(r[3]))return ze}else if(s.negative(r[3]))return ue;return E(!s.greater(e[3],r[3]))}function of(e,r,n,t){return e[0]===Z?e:e[0]===G?Mo(_o(e[3])):e[0]===z?Mo(parseFloat(e[3])):e[0]===Q&&"number"==typeof e[x]?Mo(e[x]):e[0]===Q&&e[3]instanceof Xu?li(e,".tofloat"):si(Pe(t[2][1],"extendTofloat"))}function ff(e){return null!==(e=Ro(e,36))&&2<=e?e:-1}function cf(e,r){if(e[0]===Z)return Eo(Math.floor(e[3]));if(e[0]===G)return Io(e[x],ue);if(e[0]===z){if(0!==e[3].indexOf("0x"))return r===ue?Eo(parseInt(e[3])):((n=ff(r[3]))<0&&(n=10),Eo(parseInt(e[3],n)));n=Eo(parseInt(e[3],16));return n[w]=oo({hexcon:!0}),n}if(e[0]===Q){var n=e[x].valueOf();if("number"==typeof n)return isFinite(n)?Eo(n):ue;try{if(e[x]instanceof Uint8Array)return Io(s.uint82bigInt(e[x]),ue)}catch(e){return ue}}return ue}function sf(e){return e[w]!==ue&&A(e[w][x].hexcon)}function lf(e){return e[1]}function pf(e){return e[1]}function gf(e){return e[2]}function vf(e){return e[1][1]}function df(e){return e[2][1]}function hf(e){return e[1][2]}function bf(e){return e[2][2]}function yf(e){return e[1][1][1]}function mf(e){return e[2][1][1]}function kf(e){return e[1][2][1]}function wf(e){return e[2][2][1]}function xf(e){return e[1][1][2]}function Sf(e){return e[2][1][2]}function Of(e){return e[1][2][2]}function Nf(e){return e[2][2][2]}function jf(e){return e[1][1][1][1]}function Pf(e){return e[2][1][1][1]}function Tf(e){return e[1][2][1][1]}function Af(e){return e[2][2][1][1]}function If(e){return e[1][1][2][1]}function Ef(e){return e[2][1][2][1]}function Mf(e){return e[1][2][2][1]}function $f(e){return e[2][2][2][1]}function qf(e){return e[1][1][1][2]}function _f(e){return e[2][1][1][2]}function Rf(e){return e[1][2][1][2]}function Ff(e){return e[2][2][1][2]}function Wf(e){return e[1][1][2][2]}function Cf(e){return e[2][1][2][2]}function Lf(e){return e[1][2][2][2]}function Bf(e){return e[2][2][2][2]}function Df(e,r){if(0===e)return ue;if(1==e)return Ce(r(0),ue);for(var n=r(--e);0<=--e;)n=Ce(r(e,r),n);return n}function Xf(e,r){if(0===e)return ue;for(var n=r(0);0<--e;)n=Ce(r(e,r),n);return n}function zf(e,r){for(;e[0]===D;)r=Ce(e[1],r),e=e[2];return r}function Gf(e){var r,n;if(e[0]===k&&0<=(n=oe.indexOf(e)))r=oe[n][te];else{if(e!==ue)return ue;r=fe[0][te]}for(var t=ue,i=null,a=0;a<r.length;++a){var u=Ce(r[a],ue);i?i[2]=u:t=u,i=u}return t}function Zf(e,r){var n;r===ue&&(r=(n=e[2][1])===Ge?fe[0]:n!==ue?n[H]:ue);r=Lr(e,r);return"string"==typeof r?Xa(Be(["internal",r]),ue):Cr(r[2][1])?r:st}function Jf(e){function r(e){for(var r=-1;++r<Lt;){var n=e[2][3][".parent"];if(!n)return[e,r];e=n}return[ue,r]}function n(e){var r=e[2][3][".base"];return r||e}if(e[0]!==X||e[3]===ue)return ue;var t,i;[t,i]=r(e=e[3][2][1]);var a=n(t);if(a===ue)return ue;for(var u=be(e[Y]),o=ue,f=0;f<u.length;++f){var c,s,l=u[f];[c,s]=r(l),s==i&&n(c)===a&&(o=Ce(l,o))}return o}function Vf(e){var r=e[1];if(r[0]!==X||r[1][0]!==D)return ue;e=r[1][1];return r[1]=r[1][2],e}function Qf(e,r){return Cr(e,!0)?(e[2]=r,e):st}function Uf(e){return Pr[1]=e}function Hf(e,i){return function e(r){if(qc(r,i)!==ue)return ue;for(var n,t=0;;){if(qc(r,i)!==ue){t=-t,n=ue;break}if(r[0]!==D)return!1;if(n=e(r[1]))break;r=r[2],++t}return Ce(Eo(t),n)}(e)||ue}Vu.prototype=Object.create(Fu.prototype),Vu.prototype.constructor=Vu;var Yf=100,Kf=101,ec=102,rc=103,nc=104,tc=105,ic=106,ac=107,uc=108,oc=109,fc=110;function cc(e,r){if(!e)return-1;for(var n=!1,t=0;t<e;++t){var i=r(t),a=i[0];if(a===Q&&Lu(i[x])?a=B(i[x])?Kf:i[x]instanceof Xu?rc:i[x]instanceof Vu?nc:i[x]instanceof WeakMap?tc:i[x]instanceof Ss?ic:ec:a===D?a=I(i[1])?oc:fc:J<=a&&a<=V&&(a=uc),n){if(a!==n)if(n===G&&a===Z||n===Z&&a===G)n=Yf;else if(n!==Yf||n!==Z&&a!==G)if(n===X&&a===z||n===z&&a===X)n=ac;else if(n!==ac||n!==X&&a!==z){if(!(n===oc&&a===fc||a===fc&&a===oc))return-1;n=fc}else;else;}else n=a}return n}function sc(e,r){switch(cc(e,r)){case D:return gr;case X:return vr;case z:return yr;case G:return dr;case Z:return hr;case J:case S:return pr;case V:return Ve;case Q:return xr;case k:return Sr;case Yf:return br;case Kf:return mr;case ec:return kr;case rc:return wr;case nc:return Or;case tc:return Nr;case ic:return jr;case uc:return pr;case fc:return gr}return ue}function lc(e){return E(e[0]===X&&e[Y]==Ge[Y])}function pc(e,r,n){var t=cc(e,r);if(t===Z||t===G||t===Yf)return ze;for(var i=0;i<e;++i){var a=r(i);if(a[0]===Q&&a[3]instanceof Xu)return li(a,".numeric")}return si(Pe(n[2][1],"extendNumeric"))}function gc(e,r){return E(cc(e,r)===G)}function vc(e,r){return E(cc(e,r)===Z)}function dc(e){return e[0]===X&&e[H][te][e[H][ie][e[Y]]]===e?e:e[0]===z?Ne(e[K]):ue}function hc(e){var r;if(e[0]===X)r=e[Y];else{if(e[0]!==z)return ue;r=e[K]}return Fr(r)}function bc(e,r){return E(cc(e,r)===X)}function yc(e,r){return E(cc(e,r)===z)}function mc(e,r){r=cc(e,r);return E(r===X||r===z||r===ac)}function kc(e,r){return E(cc(e,r)===uc)}function wc(e,r){return E(cc(e,r)===oc)}function xc(e,r){return E(cc(e,r)===Kf)}function Sc(e){return E(e[0]===Q&&Lu(e[3])&&B(e[3]))}function Oc(e,r){return E(cc(e,r)===ec)}function Nc(e){return E(e[0]===Q&&e[3]instanceof Bu)}function jc(e,r){return E(cc(e,r)===rc)}function Pc(e,r){r=cc(e,r);return E(r===D||r===oc||r===fc)}function Tc(e,r){if(0===e)return ue;for(var n=0;n<e;++n)if(r(n)[0]===D)return ue;return ze}function Ac(e,r){return Tc(e,r)}function Ic(e){return e[0]===G?E(!s.negative(e[3])&&!s.isZero(e[3])):e[0]===Z?E(0<e[3]):ue}function Ec(e){return e[0]===G?E(s.negative(e[3])):e[0]===Z?E(e[3]<0):ue}function Mc(e){return e[0]===G?E(s.isZero(e[3])):e[0]===Z?E(0===e[3]):ue}function $c(e){if(e[0]===G)return E(0===s.modInt(e[3],2));if(e[0]!==Z)return ue;e=e[3]/2;return E(e==Math.floor(e))}function qc(e,r,n,t){return e[0]===G&&r[0]===G?E(s.equals(e[3],r[3])):e[0]===Z&&r[0]===Z?E(e[3]===r[3]):e[0]===G&&r[0]===Z||e[0]===Z&&r[0]===G?e[0]===Q&&e[3]instanceof Xu?li(e,".eq"):r[0]===Q&&r[3]instanceof Xu?li(r,".eq"):si(Pe(t[2][1],"extendEq")):e[0]===z&&r[0]===z||e[0]===Q&&r[0]===Q?E(e[3]===r[3]):E(e==r)}function _c(e,r,n,t){return e[0]===X&&r[0]===X?e===r||e[Y]===r[Y]?ze:ue:e[0]===G&&r[0]===Z?E(_o(e[3])==r[3]):e[0]===Z&&r[0]===G?E(e[3]==_o(r[3])):e[0]===J&&r[0]===J||e[0]===S&&r[0]===S||e[0]===V&&r[0]===V?E(e[ne]===r[ne]):qc(e,r,n,t)}function Rc(e,r){for(;;){if(e[0]!==D)return(e[0]===Q&&Lu(e[x])?ro:_c)(e,r);if(r[0]!==D)return ue;if(Rc(e[1],r[1])===ue)return ue;e=e[2],r=r[2]}}function Fc(e,r){for(;;){if(r[0]!==D)return ue;if(Rc(e,r[1])===ze)return r;r=r[2]}}function Wc(e,r){for(var n;;){if(r[0]!==D)return ue;if(Rc(e,r[1])===ze)return r;if(r[1][0]===D&&(n=Wc(e,r[1]))!==ue)return n;r=r[2]}}function Cc(e,r){if(e===r)return 0;if(!A(r))return A(e)?-1:0;if(!A(e))return 1;if(!(e[0]!==Z&&e[0]!==G||r[0]!==Z&&r[0]!==G))return uf(e,r)===ze?-1:af(e,r)===ze?1:0;var n=!1;if(e[0]===r[0]&&(n=e[0]),n===X){if(e[Y]<r[Y])return-1;if(e[Y]>r[Y])return 1;var t=Te(e),i=Te(r);return 0<=t&&0<=i?t<i?-1:i<t?1:0:0<=t&&i<0?-1:t<0&&0<=i?1:0}if(n===z)return e[K]==r[K]?0:e[K]<r[K]?-1:1;if(n===k)return Cc(e[j],r[j]);if(n===D)for(;;){var a=Cc(e[1],r[1]);if(0!==a)return a;if(e=e[2],r=r[2],e[0]!==D)return r[0]!==D?0:-1;if(r[0]!==D)return 1}return e[0]<r[0]?-1:e[0]>r[0]?1:0}function Lc(e,r){return Eo(Cc(e,r))}function Bc(e,r){return makeBoolean(Cc(e,r)<0)}function Dc(e){return E(!A(e))}function Xc(e,r){if(e[0]===D){for(var n=e;n[0]===D;){if(n[O]!==ue&&!Cr(n[O]))return;n=n[N]}n=e;for(var t=r;n[0]===D;)t[0]!==D?n[O]!==ue&&(n[O][1]=t):(n[O]!==ue&&(n[O][1]=t[O]),t=t[N]),n=n[N]}else{if(!Cr(e))return;e[1]=r}return 1}function zc(e,r){return Xc(e,r)?r:st}function Gc(e,r,n,t){function i(e){if(e[0]===X&&(e=e[U]),e[0]===J)return e[ne];if(e[0]===S){if((e=e[ne])===Bo)return Lo;if(e===Xo)return Do;if(e===Go)return zo}return function(){return ue}}function a(e){return e[0]===Q&&e[3]instanceof Xu&&(ba(e,t!==ue?".preadjust":".postadjust",Ce(e,Ce(r,Ce(n,ue)))),dt[ht++]=vt,1)}if(e[0]===D){var u,o=e[1],f=e[2][1];if(a(u=bo(o,f)))return st;f=yo(o,f,i(r)(u,n))}else{if(e[0]!==X)return Xa(Be(["internal","$invalid adjust target"]),ue);if(a(u=e[1]))return st;f=zc(e,i(r)(u,n))}return t!==ue?f:u}function Zc(e,r){e=e[2];return Nc(e)===ue?ue:bo(e,r)}function Jc(e,r,n){if(!Cr(e,!0))return st;var t=e[2];if(t===ue)e[2]=t=Cu(kr,ue);else if(Nc(t)===ue)return Xa(Be(["internal","$invalid put annotation target"]),ue);return r===ue?ue:yo(t,r,n)}function Vc(e,r,n){return Cr(e,!0)?r[0]!==X?ue:(n===ue&&(t=e[2]),e[2]=F(r[2],t),e):st;var t}function Qc(e){return e[0]>=J&&e[0]<=V&&qs()===ue?Fe(e[3].name):e[0]!==X?ue:e[3]}function Uc(e,r){if(e[0]!==X)return ue;if(!Cr(e))return st;if(r[0]>=J&&r[0]<=V||r[0]===X)return e[3]=r;if(r[0]===D){var n=r[2][1][2];return e[2]!==n&&(e[2]=F(n)),e[3]=r}if(r[0]===z)try{var t=function(e,r,n){return eval(e)}(r[K],{j2n:ao,n2j:fo,nanu:Cu,pl:hs,ns:e[H]},ue);if("function"!=typeof t)return Fe("compile: not a function");var i=[S,null,e,t];return i[1]=i,e[3]=i}catch(e){return mu(vu,"compile: "+e.toString()),Fe(e)}return ue}function Hc(e,r){if(r[0]!==X||e[0]!==X)return ue;if(!Cr(e))return st;if(r[3][0]>=J&&r[3][0]<=V)return Ee(e[Y],r[3][3],r[3][0]);if(r[3][0]!==D)return e[3]=r[3];var n=xe(r[Y]),t=r[3][2][1];t[Y]===Ge[Y]&&(n[O]=Ge),n[H]=t[H];r=Ce(r[3][1],Ce(n,r[3][2][2]));return n[3]=r,e[3]=r}var Yc=!1;function Kc(e,r){return!Yc&&vu<=tu&&(Yc=!0,mu(vu,"warning: moveproc() is deprecated in favor of copyproc()")),Hc(r,e)}function es(e){return e===ue?ce:e[0]===X||e[0]===Q?e[H]:e[0]===k?e[j]:ue}function rs(e){return e===ue?$(fe):e[0]===D?de(e):e[0]===X&&e===ze?$(oe):ue}function ns(e,r){if(0===e)return pe;var n=r(0);if(1==e&&n[0]===k){var t=pe;return pe===ce&&(pe=n),t}for(var i=0;i<e;++i){var a=r(i);if(a[0]===k)n=a;else{if(a[0]!==X&&a[0]!==Q)return ue;if(!A(a))return ue;n=a[H]}if(n!==ue&&(n!=pe&&pe!==ce))return ue}return ze}function ts(e,r){for(var n=[],t=0;t<e;++t)n.push(r(t));for(var i,a=ue,u=0;u<n.length;++u)(i=n[u])[0]===k?he(i):a=Ce(i,a);return a}function is(e,r){var n;Nc(r)===ze&&(n=r[x]);e=Fe(ds(e,n));return n&&A(n.noquote)&&(e[w]=oo({noquote:!0})),e}function as(e,r){for(var n="",t=0;t<e;++t)n+=ds(r(t));return Fe(n)}function us(e){var r;if(e[0]===X)r=e[Y];else{if(e[0]!==z){if(e[0]!==G)return ue;if(s.negative(e[3])||s.greater(e[3],s.int2bigInt(1114111,16,1)))return ue;var n=s.modInt(e[3],1114111);if(n<65536)r=String.fromCharCode(n);else try{r=String.fromCodePoint(n)}catch(e){return mu(vu,"warning: couldn't fromCodePoint("+n+")"),ue}return Fe(r)}r=e[K]}try{return Eo(r.codePointAt(0),oo({hexcon:!0}))}catch(e){return mu(vu,"warning: couldn't codePointAt(\""+r.substring(0,1)+'")'),Eo(r.charCodeAt(0))}}function os(e){var r;if(e[0]===X)r=xe(e[Y]);else{if(e[0]!==z)return ue;r=xe(e[K])}return r[H]=fe[0],r}function fs(e,r){var n,t;if(e[0]===z)t=e[K];else if(e[0]===X)t=e[Y];else{if(e[0]!==Q||!RegExp.prototype.isPrototypeOf(e[x]))return ue;t=e[x]}if(r===ue)n=fe;else if(r===ze)n=oe;else{if(r[0]!==k)return ue;n=[r]}for(var i,a=[],u=0;u<n.length;++u){var o=n[u];if("string"==typeof t){if(o[ie].hasOwnProperty(t))return i=o[ie][t],o[te][i]}else if(e[0]===Q)for(i=0;i<o[te].length;++i){var f=o[te][i];t.test(f[Y])&&a.push(f)}}return $(a)}function cs(e){if(e[0]!==D)return e[0]===X?e[Y]:e[0]===z?e[K]:e[0]===G?Ts.IntToString(e[ee],sf(e)):"";for(var r="";e[0]===D;)r+=cs(e[1]),e=e[2];return r}function ss(e,r){for(var n="",t=0;t<e;++t)n+=cs(r(t));return Wr(n)}function ls(e){var r;if(e[0]===X)r=e[Y];else if(e[0]===z)r=e[K];else{if(e[0]!==G)return ue;r=Ts.IntToString(e[ee],sf(e))}var n,t=ue,i=null;if(0===r.length)return ue;for(n=0;n<r.length;++n){var a=Ce(Fe(r.charAt(n)),ue);i?i[2]=a:t=a,i=a}return t}function ps(e){if(e===ue)return Eo(0);if(e[0]===X)return Eo(e[Y].length);if(e[0]===z)return Eo(e[K].length);if(e[0]===G||e[0]===Z)return Eo(ds(e).length);if(e[0]===Q){var r=e[x];return Lu(r)?B(r)?Eo(r.length):Eo(Object.getOwnPropertyNames(r).length):ao(e[x].length)}if(e[0]!==D)return Eo(ds(e).length);for(var n=1;e[2][0]===D;)++n,e=e[2];return Eo(n)}var gs=new h.NaanChannel(this),vs=new h.NaanChannel(this);function ds(e,r,n){var t;r&&r.radix&&(t=ff(r.radix))<2&&(t=L),n===L&&(n=Ts);var i="";if(e===L)return De[Y];if(null===e)return Xe[Y];if(e[g]===D){if(e[N][0]!==D&&e[N]!==ue)i=n.ListToString([n.DottedPairToString(ds(e[1],r,n),ds(e[2],r,n))]);else{for(var a=e,u=[];a[g]===D;)a[N][0]!==D&&a[N]!==ue?u.push(n.DottedPairToString(ds(a[1],r,n),ds(a[2],r,n))):u.push(ds(a[1],r,n)),a=a[N];i=n.ListToString(u)}return i}if(e[g]===X){var o=e[Y];if(r&&A(r.quote)&&(1!=o.length||p.indexOf(o)<0)){if(!A(r.nonamespace)){i=me(e);if(i[0]===k)return o=n.QuoteSymbol(o),ds(i[j],!1,n)+n.NSinfix+o}return n.QuoteSymbol(o)}return o}if(e[g]===z)return!r||!A(r.quote)||e[w]!==ue&&A(e[w][x].noquote)?e[K]:n.QuoteString(e[K]);if(e[g]===G)return n.IntToString(e[ee],sf(e),t);if(e[g]===Z)return n.FloatToString(e[re],t);if(e[g]>=J&&e[g]<=V){if(du<=tu){var f=e[U]+"";return f.substring(9,f.indexOf("("))}f=Me(e[3]);return f?"[Builtin "+f+"]":e[2][0]===X?"[Compiled "+e[2][Y]+"]":"[Compiled Function]"}if(e[g]===Q){var c,s=e[x];if(Lu(s)){if(B(s))return"Array["+s.length+"]";var l=Object.getOwnPropertyNames(s).length;return s instanceof Vu?"Nonce{"+l+"}":s instanceof Ss?"TextStream{"+l+"}":s instanceof WeakMap?"WeakMap{}":e[3]instanceof Xu?"Object{"+l+"}":"Dictionary{"+l+"}"}try{if("function"==typeof s)return""!==s.name&&s.name?"[Function "+s.name+"]":"[Function ()]";if(B(s))c=JSON.stringify(s).slice(1,-1);else if("["===(c=s.toString()).substring(0,1))return c;return"["+Object.prototype.toString.call(s).slice(8,-1)+" "+c+"]"}catch(e){l=s[Symbol.toStringTag];return l?"[object "+l+"]":"[private object]"}}else if(e[g]===k)return"Namespace<"+ds(e[j],!1,n)+">";debugger;return"unknown: "+e}function hs(e,r){return Is[x].printline[3](e,r)}function bs(e,r){return Is[x].print[3](e,r)}function ys(e,r){return Is[x].printq[3](e,r)}function ms(e){return Is[x].printloc[3](e)}function ks(e){return Is[x].newline[3](e)}function ws(e){return Is[x].spaces[3](e)}function xs(e){return Is[x].isbreak[3](e)}function Ss(e,r,n,t){var i,a,u=ue,o=!1,f=ue,c=ue,s=ue;function l(e){if(i.EOF())return e!==ue?ue:Xa(Be(["internal","$end-of-file"]),ue);if(s===ue)return fi();e=s;return s=ue,Xa(e)}function p(){if(c[0]===D){var e=c[1];return c=c[2],f=e,1}e=function(e){var r,n;e:for(;;){if(null===(n=e.ReadToken()))return null;switch(n.type){case e.kTTNewline:case e.kTTSymbol:o&&(r=o[n.token])!==L||(r=Wr(n.token));break e;case e.kTTInteger:r=Io(n.token,ue);break e;case e.kTTHexInteger:r=Io(n.token,oo({hexcon:!0}));break e;case e.kTTString:r=Fe(n.token);break e;case e.kTTComment:case e.kTTCommentLine:var t=Du();if(t[x].text=Fe(n.token),t[x].loc=Ce(Eo(n.loc.line),Ce(Eo(n.loc.column),ue)),u=Ce(t,u),n.type!=e.kTTCommentLine)continue;r=Oe("\n");break e;case e.kTTFloat:r=Mo(parseFloat(n.token));break e}}return n.atom=r,n}(i);return null!==e&&((f=Du())[x].atom=e.atom,f[x].loc=Ce(Eo(e.loc.line),Ce(Eo(e.loc.column),ue)),1)}function g(e,r){var n=e[x].atom;if(r[0]!==D)return r===yr?n[0]===z:r===vr?n[0]===X:Rc(n,r)===ze;for(;;){if(r[0]!==D)return;if(r[1][0]===D)return;if(g(e,r[1]))return 1;r=r[2]}}function v(e,r){if(!Pt&&a.Full())return fi();for(var n,t=ue,i=0;i<e;++i)n=ds(t=r(i),!1,a),a.WriteString(n);return t}function d(e){return c=Ce(f,c),f=e}this.addtext=Ee("addtext",function(e){return e[0]===z?(i.AddText(e[K]),i.SetEOF(),e):ue},J,!0)[U],this.comments=Ee("comments",function(){var e=u;return u=ue,e},J,!0)[U],this.isbreak=Ee("isbreak",function(e){return E(e[0]===X&&a.IsBreak(e[Y].substring(0,1)))},J,!0)[U],this.linelength=Ee("linelength",function(){return 80},J,!0)[U],this.newline=Ee("newline",function(e){if(!Pt&&a.Full())return fi();var r=1;if(e===ue||null!==(r=Ro(e,255))&&0<=r){for(;0<r--;)a.WriteString("\n");return ze}return ue},J,!0)[U],this.spaces=Ee("spaces",function(e){if(!Pt&&a.Full())return fi();var r;if(null!==(r=Ro(e,255))&&0<=r)for(var n=Ar[1][Ar[1][0]===X?Y:K];0<r--;)a.WriteString(n);return Eo(a.Column())},J,!0)[U],this.printline=Ee("printline",function(e,r){return r=v(e,r),a.WriteString("\n"),r},S,!0)[U],this.print=Ee("print",v,S,!0)[U],this.printloc=Ee("printloc",function(e){return Ce(Eo(a.Line()),Ce(Eo(a.Column()),ue))},J,!0)[U],this.printq=Ee("printq",function(e,r){if(!Pt&&a.Full())return fi();for(var n,t=ue,i=0;i<e;++i)n=ds(t=r(i),t!==Ar[1]&&{quote:ze},a),a.WriteString(n);return t},S,!0)[U],this.radix=Ee("radix",function(e){var r,n=Ce(Eo(i.Radix()),Ce(Eo(a.Radix()),ue));return e[0]===D&&(0<=(r=ff(e[1]))&&i.SetRadix(r),0<=(e=ff(e[2][1]))&&i.SetRadix(e)),n},J,!0)[U],this.readchar=Ee("readchar",function(){var e=i.ReadChar();return null!==e?Fe(e):s===ue?i.EOF()?ue:fi():(e=s,s=ue,Xa(e))},J,!0)[U],this.readready=Ee("readready",function(){return Eo(i.ReadReady())},J,!0)[U],this.reset=Ee("reset",function(){i.Reset(),a.Reset()},J,!0)[U],this.setsymbols=Ee("setsymbols",function(e){if(e===ue){if(o)return io(Object.values(o),o=!1)}else{if(e[0]!==D)return ue;for(var r={},n=e;n[0]===D;){if(n[1][0]!==X)return ue;r[n[1][Y]]=n[1],n=n[2]}o=r}return vr},J,!0)[U],this.taketext=Ee("taketext",function(){return Fe(a.TakeText())},J,!0)[U],this.tokenread=Ee("tokenread",function(e){return p()?f:l(e)},J,!0)[U],this.tokenlast=Ee("tokenlast",function(e){return e===ze&&(f=ue),f},J,!0)[U],this.tokenpush=Ee("tokenpush",d,J,!0)[U],this.tokenmatch=Ee("tokenmatch",function(e,r){var n=f;if(n[0]!==Q||!n[x].atom)return ue;if(Rc(n[x].atom,Tr[1])!==ze)return g(n,e)?n:ue;for(var t=n;;){if(!p())return l(r);if((n=f)[0]!==Q||!n[x].atom)return ue;if(Rc(n[x].atom,Tr[1])!==ze)break;t=n}return g(n,e)?n:(d(t),ue)},J,!0)[U],this.tokenpass=Ee("tokenpass",function(e,r){for(var n=f;;){if(n!=ue&&!g(n,e))return n;if(!p())return l(r);n=f}},J,!0)[U],this.readex=Ee("readex",function(e){return s=e},J,!0)[U],r===ue?i=gs:B(r)?r[0]===z&&((i=new h.NaanChannel(b,t)).ScanReset(),i.SetText(r[K]),i.SetEOF()):i=r,n===ue?a=vs:B(n)?n===yr&&(a=new h.NaanChannel(b)).SetWriteLimit(0):a=n,this.raw=We({read:i,write:a})}function Os(e,r,n){var t=We(!1),n=new Ss(t,e,r,n);return t[w]=ue,t[x]=n,t}function Ns(e,r){return e!==ue&&e[0]!==z||r!==ue&&r!==yr&&r[0]!==D?ue:(e[0]===z&&r[0]===D&&(n=Ro(r[1],Number.MAX_SAFE_INTEGER),t=Ro(r[2][1],Number.MAX_SAFE_INTEGER),r=ue,t={Line:n,Column:t}),Os(e,r,t));var n,t}Ss.prototype=Object.create(Fu.prototype),Ss.prototype.constructor=Ss;var js=Os(gs,vs),Ps=gs,Ts=vs,As=js,Is=js;function Es(e){var r=As,n=Is;if(r===js&&(r=ue),n===js&&(n=ue),e[0]===D){if(e[2][0]!==D)return ue;var t=e[1],e=e[2][1];if(t===ue)t=js;else if(t===ze)t=As;else if(Ms(t)!==ze)return ue;if(e===ue)e=js;else if(e===ze)e=Is;else if(Ms(e)!==ze)return ue;Ps=(As=t)[x].raw[x].read,Ts=(Is=e)[x].raw[x].write}return Ce(r,Ce(n,ue))}function Ms(e){return E(e[0]===Q&&e[x]instanceof Ss)}function $s(){return Eo((new Date).getTime())}function qs(){return/param/.test(function(e){})?ue:ze}function _s(e){var r;if(e===ue)r=!1;else if(null===(r=Ro(e,32))||r<0)return ue;return uo(oi(r),new WeakMap)}function Rs(e){return T.hasOwnProperty("edit-set-string")?(T["edit-set-string"](ds(e)),e):ue}function Fs(e){return T.hasOwnProperty("edit-get-string")?Fe(T["edit-get-string"]()):ue}var Ws=90,Cs=r+1,Ls=Ws+1;function Bs(){var c=new Array(1),s=[];function l(e){var r;if(e===L)return Ls;if("object"!=typeof e)return e;var n,t,i=e[0];if(Cs<i)return Math.floor(i/Cs);if(i===Q&&!(Lu(t=(n=e)[x])?!(t instanceof Vu||t instanceof Ss):!!(n[w]!==ue&&A(n[w][x].persist)||t.constructor&&m.hasOwnProperty(t.constructor.name)||t.NaanPersist)))return Ls;var a=c.length+Ws;s.push(e),e[0]=i+a*Cs;var u,o,f=Array(e.length);switch(c.push(f),(f[0]=i)===Q&&(r=function(e){var r,n,t=e[x],i=l(e[w]);if(Lu(t))if(B(t)){for(var a=[],u=0;u<t.length;++u)a.push(l(t[u]));r={na:a}}else{for(var o={},f=Object.getOwnPropertyNames(t),c=0;c<f.length;++c)o[f[c]]=l(t[f[c]],f[c]);r=e[3]instanceof Xu?{no:o}:{nd:o},e[2]!==ue&&(r.tag=l(e[2]))}else try{r=t instanceof RegExp?{tag:i,type:t.constructor.name,state:[t.source,t.flags]}:t.StateSave!==L?{tag:i,type:t.constructor.name,state:t.StateSave()}:{tag:i,type:t.constructor.name,object:t}}catch(e){r={type:t.constructor.name}}return e[H]&&e[H]!==ue&&(n=oe.indexOf(e[H]))<0&&(n=oe.length),0<=n&&(r.xns=n),r}(e)),i){case D:f[2]=l(e[2]),f[1]=l(e[1]);break;case X:f[1]=l(e[1]),f[2]=l(e[2]),f[3]=l(e[3]),f[4]=oe.indexOf(e[4]).toString(),f[5]=e[5];break;case z:f[1]=l(e[1]),f[2]=l(e[2]),f[3]=e[3];break;case Z:f[1]=l(e[1]),f[2]=l(e[2]),f[3]=e[3].toString();break;case G:f[1]=l(e[1]),f[2]=l(e[2]),f[3]=Fo(e[3]);break;case J:case S:case V:if(!(u=Me(e[3])))return c.pop(),e[0]=i,Ls;f[1]=l(e[1]),f[2]=l(e[2]),(o=je(u,[ce,se]))[0]===X&&o[Y]===u?f[3]=l(o):f[3]=u;break;case Q:f[1]=l(e[1]),f[2]=l(e[2]),f[3]=r;break;case k:f[1]=oe.indexOf(e).toString(),f.length=2;break;default:mu(pu,"save-state warning: invalid element type "+i+" at "+a)}return a}for(var e,r=[],n=0;n<oe.length;++n){var t=n;t<=1&&(t=1-t),e=oe[t][te];for(var i=0,a=0;a<e.length;++a)!function(e,r){if("object"==typeof e&&e[0]==X){var n=c.length+Ws;s.push(e),e[0]=X+n*Cs;n=Array(P);return c.push(n),n[0]=X,n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=r.toString(),n[5]=e[5],1}}(e[a],t)||++i;r[t]=i,l(oe[t])}!function(){for(var e=1;e<c.length;++e){var r=c[e];r[0]===X&&(r[1]=l(r[1]),r[2]=l(r[2]),r[3]=l(r[3]))}}();var u=[];for(n=0;n<oe.length;++n){e=oe[n][te];var o=[];o.push(l(oe[n][j])),o.push(l(Eo(r[n]))),o.push(l(e[0])),u.push(o)}c[0]=u;var f=[l(pe)];for(n=0;n<fe.length;++n)f.push(l(fe[n]));var p,g=new Array(yt);for(g[0]=kt,p=1;p<=yt;++p){var v=bt[p-1];"object"==typeof v?g[p]=l(v):"number"==typeof v?g[p]=-v:v===L?mu(pu,"savestate: corrupt argstack"):g[p]=v}g[p++]=l(gt),g[p++]=l(pt),g[p++]=l(lt),g[p++]=l(st),function(){for(var e=0;e<s.length;++e)s[e][0]%=Cs}();var d,h=new Array(ht);for(h[0]=vt,d=1;d<=ht;++d)h[d]=dt[d-1];var b=[];b[0]=g,b[1]=h,b[2]=mt,b[3]=f,b[4]=tu;var y=new Array("Naan",900,12002,Ls);return new Array(y,c,b)}function Ds(e){var r,n,t,i,a,u,o,f=e[1],c=[],s=[];function l(e){if("number"!=typeof e)return B(e)?e.length===P?mu(pu,"save-state warning: unexpected symbol "+e[Y]):mu(pu,"save-state warning: unexpected element "+e[0]):mu(pu,"save-state warning: invalid item encountered"),Ls;var r,n=f[e-Ws];switch(n[0]){case D:break;case z:case G:case Z:if(r=n[0].toString()+"/"+n[2].toString()+"/"+n[3],s.hasOwnProperty(r))return s[r];s[r]=e,n[0]+=Cs;case D+Cs:case z+Cs:case G+Cs:case Z+Cs:default:return e}var t=l(n[O]),i=l(n[N]),a=t+i/(f.length+Ws+1);return c.hasOwnProperty(a)?c[a]:(c[a]=e,n[0]=D+Cs,n[O]=t,n[N]=i,e)}for(m=1;m<f.length;++m)switch((r=f[m])[0]){case D:case z:case G:case Z:r[1]=l(r[1]),r[2]=l(r[2]);break;case X:r[1]=l(r[1]),r[2]=l(r[2]),r[3]=l(r[3]);break;case J:case S:case V:r[1]=l(r[1]),r[2]=l(r[2]),"number"==typeof r[3]&&(r[3]=l(r[3]));break;case Q:if(r[1]=l(r[1]),r[2]=l(r[2]),r[3].na!==L)for(i=r[3].na,n=0;n<i.length;++n)i[n]=l(i[n]);else if(r[3].nd!==L||r[3].no!==L){for(a=r[3].nd||r[3].no,u=Object.getOwnPropertyNames(a),t=0;t<u.length;++t)a[u[t]]=l(a[u[t]]);r[3].tag&&(r[3].tag=l(r[3].tag))}}for(var p,g=f[0],v=0;v<g.length;++v)for(p=g[v],o=0;o<p.length;++o)p[o]=l(p[o]);for(var d=e[2][0],h=1;h<d.length;++h)d[h]>Ws&&(d[h]=l(d[h]));for(var b=[],y=0,m=1;m<f.length;++m)switch(f[m][0]){case D:case z:case G:case Z:++y;break;default:b[m+Ws]=m+Ws-y}for(v=0;v<g.length;++v)for(p=g[v],o=0;o<p.length;++o)p[o]=b[p[o]];for(h=1;h<d.length;++h)d[h]>Ws&&(d[h]=b[d[h]]);for(var k=e[2][3],w=0;w<k.length;++w)k[w]>Ws&&(k[w]=b[k[w]]);var x=new Array(1);for(m=1;m<f.length;++m){switch((r=f[m])[0]){case D:case z:case G:case Z:continue;case D+Cs:case z+Cs:case G+Cs:case Z+Cs:r[0]-=Cs,r[1]=b[r[1]],r[2]=b[r[2]];break;case X:r[1]=b[r[1]],r[2]=b[r[2]],r[3]=b[r[3]];break;case J:case S:case V:r[1]=b[r[1]],r[2]=b[r[2]],"number"==typeof r[3]&&(r[3]=b[r[3]]);break;case Q:if(r[1]=b[r[1]],r[2]=b[r[2]],r[3].na!==L)for(i=r[3].na,n=0;n<i.length;++n)i[n]=b[i[n]];else if(r[3].nd!==L||r[3].no!==L){for(a=r[3].nd||r[3].no,u=Object.getOwnPropertyNames(a),t=0;t<u.length;++t)a[u[t]]=b[a[u[t]]];r[3].tag&&(r[3].tag=b[r[3].tag])}}x.push(r)}return x[0]=g,e[1]=x,e}function Xs(e){var r,n=e[1];function t(e,r){e+=Ws;return r-e<=Ws&&(-9<=r-e||999<r&&-99<=r-e)?r-e:r}for(r=1;r<n.length;++r){var i=n[r];switch(i[0]){case D:case z:case G:case Z:i[1]=t(r,i[1]),i[2]=t(r,i[2]);break;case X:i[1]=t(r,i[1]),i[2]=t(r,i[2]),i[3]=t(r,i[3]);break;case J:case S:case V:i[1]=t(r,i[1]),i[2]=t(r,i[2]),"number"==typeof i[3]&&(i[3]=t(r,i[3]));break;case Q:i[1]=t(r,i[1]),i[2]=t(r,i[2])}}}function zs(e,r){function n(e){return r.QuoteString(e)}function t(e){return"$"==e.substring(0,1)&&(e="\\".concat(e)),n(e)}if(0===e.length)return"";r===L&&(r=Ts);for(var i,a,u,o,f="[",c=!1,s=0;s<e.length;++s)c&&(f+=","),"object"==typeof e[s]?((u=e[s])[0]===D?1===u[2]?f+=u[1]:u[2]===Ls?1!==u[1]?f+="["+u[1]+"]":f+="0":f+="["+u[1]+","+u[2]+"]":u[0]===X&&0===u[1]&&u[2]===Ls?(o=t(u[Y]),i==u[4]?u[3]===Ls?f+=o:u[3]==a+1?f+="["+o+"]":f+="["+o+","+u[3]+"]":f+="["+o+","+u[3]+","+u[4]+"]"):u[0]===z&&0===u[1]&&u[2]===Ls?f+=n("$"+u[K]):u[0]===Q?f+=JSON.stringify(u[x]):u[0]===k?f+=JSON.stringify({ns:u[1]}):f+=zs(e[s]),u[0]===X&&(i=u[4],a=u[3])):"string"==typeof e[s]?e[0]===X&&s===Y?f+=t(e[s]):e[0]===z&&s===K?f+=n("$"+e[s]):f+=n(e[s]):e[s]!==L&&(f+=e[s]),c=!0;return f+="]"}function Gs(e){var r,n=e[0];if(!("Naan"!==n[0]||900<n[1])){var t=e[1],o=t[0],i=n[3],a=e[2],u=a[0],f=u[0],c=a[1],s=a[2],l=c[0],p=a[3],g=a[4];if(t!==L&&o!==L&&i!==L&&a!==L&&u!==L&&f!==L&&c!==L&&l!==L&&p!==L){for(var v=i-1,d=new Array(t.length),h=[],b=0;b<o.length;++b)h[b]=new Array(ae);for(w=1;w<t.length;++w)"object"==typeof(r=t[w])&&r.ns!==L?d[w]=h[r.ns]:d[w]=new Array(3);for(var y,m=h[1],k=1,w=1;w<t.length;++w)if("number"!=typeof(r=t[w]))if("string"!=typeof r){if("object"!=typeof r||0===r.length)return void mu(pu,"loadstate: unexpected token: "+typeof r);if(B(r))if(1!=r.length)if(2!=r.length)if(3!=r.length){var x,S,O,N,j=r[0];for(d[w][0]=j,x=1;x<r.length;++x)if(S=r[x],j===X&&(x===U&&(k=W(S)),x===H&&(m=(m=h[parseInt(S)])||ue)),j===G&&x===ee)d[w][x]=Wo(S);else if(j===Z&&x===re)d[w][x]=parseFloat(S);else if(J<=j&&j<=V&&x===ne)if((N="string"==typeof S?we[S]:(N="string"==typeof(O=t[W(S)])?O:3<O.length?O[Y]:O[0],we[C(N)]))===L){debugger;mu(pu,"state-load warning: undefined builtin: "+S+"("+O+")"),d[w][x]=Oa}else d[w][x]=N;else d[w][x]=j===z&&x===K?S:j===X&&x===Y?C(S):j===X&&x===H?h[parseInt(S)]:d[W(S)]}else{if("string"!=typeof r[0])return void mu(pu,"loadstate: malformed obj3: "+typeof r[0]);d[w][0]=X,d[w][1]=d[w],d[w][2]=d[1],k=W(r[1]),d[w][3]=d[k],m=(m=h[parseInt(r[2])])||ue,d[w][4]=m,d[w][5]=C(r[0])}else if("string"==typeof r[0])d[w][0]=X,d[w][1]=d[w],d[w][2]=d[1],k=W(r[1]),d[w][3]=d[k],d[w][4]=m,d[w][5]=C(r[0]);else{if("number"!=typeof r[0])return void mu(pu,"loadstate: malformed obj2: "+typeof r[0]);d[w][0]=D,d[w][1]=d[W(r[0])],d[w][2]=d[W(r[1])]}else if("string"==typeof r[0])d[w][0]=X,d[w][1]=d[w],d[w][2]=d[1],d[w][3]=d[++k],d[w][4]=m,d[w][5]=C(r[0]);else{if("number"!=typeof r[0])return void mu(pu,"loadstate: malformed obj1: "+typeof r[0]);d[w][0]=D,d[w][1]=d[W(r[0])],d[w][2]=d[1]}else{d[w][0]=Q,d[w][1]=d[w],d[w][2]=d[1],d[w][4]=d[1];try{if(r.na!==L){var P,T=[];for(T[Ru]=Fu,P=0;P<r.na.length;++P)T.push(d[W(r.na[P])]);d[w][3]=T,0<=r.xns&&!(d[w][4]=h[r.xns])&&(d[w][4]=le)}else if(r.nd!==L||r.no!==L){for(var A=new(r.nd?Bu:Xu),I=r.nd||r.no,E=Object.getOwnPropertyNames(I),M=0;M<E.length;++M)A[E[M]]=d[W(I[E[M]])];r.tag!==L&&(d[w][2]=d[W(r.tag)]),d[w][3]=A,0<=r.xns&&!(d[w][4]=h[r.xns])&&(d[w][4]=le)}else r.ns!==L||(y="undefined"!=typeof window?window:global,r.tag&&(d[w][2]=d[W(r.tag)]),r.type&&r.state!==L?d[w][3]=new(Function.prototype.bind.apply(y[r.type],[null].concat(r.state))):r.object!==L?r.type&&"Object"!==r.type&&y[r.type]!==L?d[w][3]=new y[r.type](r.object):d[w][3]=r.object:d[w][3]={})}catch(e){d[w][3]={}}}}else"$"==r.substring(0,1)?(d[w][0]=z,d[w][1]=d[w],d[w][2]=d[1],d[w][3]=r.substring(1)):(d[w][0]=X,d[w][1]=d[w],d[w][2]=d[1],d[w][3]=d[1],d[w][4]=m,d[w][5]=C(r));else d[w][0]=D,0===r?(d[w][1]=d[w+1],d[w][2]=d[1]):(d[w][1]=d[W(r)],d[w][2]=d[w+1]);var $,q=new Array(u.length),_=oe,R=fe,n=ce,e=se,a=le,i=pe;if(!function(){try{for(ge(),oe=[],fe=[],ce=h[0],se=h[1],b=0;b<o.length;++b){for(var e=o[b],r=d[e[0]-v],n=qo(d[e[1]-v][3],99999),t=e[2]-v,i=ve(r,h[b]),a=0;a<n;++a){var u=d[t+a];(u[H]=i)[te].push(u),i[ie][u[Y]]=a}if(i[te].length!=n)return void mu(pu,"loadstate: symbol table sync: "+r[K]+" "+i[te].length+" "+n)}return se[te].length<50||$<0||f<0||$<f?void mu(pu,"loadstate: unqualified "+se[te].length):1}catch(e){return void mu(pu,"loadstate failed: "+e.toString())}}())return oe=_,fe=R,ce=n,se=e,le=a,void(pe=i);for(fe=[ce,se],pe=ce,el(),rl(),fe=[],b=1;b<p.length;++b)fe.push(d[p[b]-v]);for(pe=d[p[0]-v],$=1;$<u.length;++$){var F=u[$],F="number"==typeof F?F<=0?-F:d[F-v]:F;q[$-1]=F}return c.splice(0,1),vt=l,ht=(dt=c).length,yt=$-1,kt=f,mt=s,st=(bt=q)[--yt],lt=bt[--yt],pt=bt[--yt],gt=bt[--yt],tu=g,1}mu(pu,"cannot load malformed state")}function W(e){return e<=v?w+e:e-v}function C(e){return"\\$"===e.substring(0,2)?e.substring(1):e}}function Zs(e){var r,n=je("SaveTrap",oe);if(n!==ue&&n[U]!==ue&&(Tt=-1,Qt(Ce(n,ue),"savetrap"),Yt(!0),It!==ze))return r;n=Bs();return e&&Ds(n),Xs(n),r=zs(n)}function Js(e){if(!Gs(e))return ue;nl(),tl();e=je("LoadTrap",oe);if(e===ue)return Hs;e=Qt(Ce(e,ue),"loadtrap");return dt[ht++]=vt,e}function Vs(e){e=Zs(e!=ue);return"string"==typeof e?Fe(e):e}var Qs=Ee("save",Vs,J);function Us(e){if(e[0]!==z)return ue;e=JSON.parse(e[K]);return e&&0!==e.length?Js(e):ue}var Hs=Ee("load",Us,J),Ys=[["global","`",lf,V],["global","deref",Fa,V],["global",".",Wa,V],["global","quote",lf,V],["global","$",Uf,J],["exec","and",Ea,V],["exec","apply",ja,J],["exec","break",Ja,J],["exec","call",Pa,V],["exec","catch",Ba,V],["exec","cond",_a,V],["exec","continue",Va,J],["exec","eval",Na,J],["exec","lambda",lc,J],["exec","loop",$a,V],["exec","or",Ma,V],["exec","return",Za,S],["exec","throw",Xa,J],["exec","yield",ru,J],["exec","resume",nu,J],["info","builtin",kc,S],["info","procedure",wc,S],["info","eq",qc,J],["info","equal",Rc,J],["info","length",ps,J],["info","not",Dc,J],["info","typeof",sc,S],["info","relate",Lc,J],["symbol","setq",qa,V],["symbol","assign",zc,J],["symbol","compress",ss,S],["symbol","copyproc",Hc,J],["symbol","copyann",Vc,J],["symbol","exists",fs,J],["symbol","get",Zc,J],["symbol","getproc",Qc,J],["symbol","interned",dc,J],["symbol","defbinding",hc,J],["symbol","moveproc",Kc,J],["symbol","name",mc,S],["symbol","ordered",Bc,J],["symbol","preadjust",Ca,V],["symbol","postadjust",La,V],["symbol","put",Jc,J],["symbol","putproc",Uc,J],["symbol","replacer",Qf,J],["symbol","symbol",bc,S],["symbol","unintern",os,J],["tuple","atom",Tc,S],["tuple","car",pf,J],["tuple","cdr",gf,J],["tuple","caar",vf,J],["tuple","cadr",df,J],["tuple","cdar",hf,J],["tuple","cddr",bf,J],["tuple","caaar",yf,J],["tuple","caadr",mf,J],["tuple","cadar",kf,J],["tuple","caddr",wf,J],["tuple","cdaar",xf,J],["tuple","cdadr",Sf,J],["tuple","cddar",Of,J],["tuple","cdddr",Nf,J],["tuple","caaaar",jf,J],["tuple","caaadr",Pf,J],["tuple","caadar",Tf,J],["tuple","caaddr",Af,J],["tuple","cadaar",If,J],["tuple","cadadr",Ef,J],["tuple","caddar",Mf,J],["tuple","cadddr",$f,J],["tuple","cdaaar",qf,J],["tuple","cdaadr",_f,J],["tuple","cdadar",Rf,J],["tuple","cdaddr",Ff,J],["tuple","cddaar",Wf,J],["tuple","cddadr",Cf,J],["tuple","cdddar",Lf,J],["tuple","cddddr",Bf,J],["tuple","cons",Df,S],["tuple","insert",Xf,S],["tuple","empty",Ac,S],["tuple","first",pf,J],["tuple","ffirst",vf,J],["tuple","fsecond",mf,J],["tuple","list",Ia,V],["tuple","member",Fc,J],["tuple","within",Wc,J],["tuple","pop",Vf,V],["tuple","push",Ra,V],["tuple","rest",gf,J],["tuple","reverse",zf,J],["tuple","rrest",bf,J],["tuple","rrrest",Nf,J],["tuple","second",df,J],["tuple","third",wf,J],["tuple","totuple",co,J],["tuple","tuple",Pc,S],["tuple","tuplepath",Hf,J],["number","bitand",Ho,S],["number","bitnot",Qo,J],["number","bitor",Ko,S],["number","bitxor",rf,S],["number","difference",Xo,S],["number","divide",Vo,J],["number","even",$c,J],["number","float",vc,S],["number","greater",af,J],["number","integer",gc,S],["number","lesser",uf,J],["number","mod",Jo,J],["number","negate",Co,J],["number","negative",Ec,J],["number","numeric",pc,S],["number","plus",Bo,S],["number","positive",Ic,J],["number","quotient",Zo,J],["number","shiftleft",nf,J],["number","shiftright",tf,J],["number","times",Go,S],["number","tofloat",of,J],["number","toint",cf,J],["number","zero",Mc,J],["string","explode",ls,J],["string","strcat",as,S],["string","string",yc,S],["string","tostring",is,J],["string","unicode",us,J],["array","array",xc,S],["array","arraycall",so,S],["dictionary","dictionary",Oc,S],["dictionary","set.",to,J],["dictionary","set[",to,J],["dictionary","merge",go,S],["dictionary","keys",po,J],["dictionary","defined",lo,J],["dictionary","object",jc,S],["local","instances",Jf,J],["local","delete",ts,S],["local","enclose",Zf,J],["local","namespace",es,J],["local","new",Cu,J],["local","nonce",Uu,J],["local","nsactive",rs,J],["local","nscaller",Ya,J],["local","nsrights",ns,S],["local","symlist",Gf,J],["local","weakmap",eo,J],["host","editget",Fs,J],["host","editset",Rs,J],["host","future",Hu,J],["host","futures",Yu,J],["host","loadstate",Us,J],["host","milliseconds",$s,J],["host","mangled",qs,J],["host","runaverage",_s,J],["host","savestate",Vs,J],["host","sprint",Oo,J],["host","wait",Ao,J],["stdio","textstream",Ms,J],["stdio","textstreams",Es,J],["stdio","isbreak",xs,J],["stdio","newline",ks,J],["stdio","spaces",ws,J],["stdio","printline",hs,S],["stdio","print",bs,S],["stdio","printloc",ms,J],["stdio","printq",ys,S],["external","xapply",wo,J],["external","xcall",mo,S],["external","xget",bo,J],["external","xdefined",lo,J],["external","xkeys",po,J],["external","xlock",ho,J],["external","xnew",xo,S],["external","xobject",vo,J],["external","xset",yo,J],["debug","breakpoint",$u,S],["debug","debuglog",Iu,S],["debug","jsdebugger",Eu,S],["debug","loglevel",Mu,J],["debug","stacktrace",Tu,J],["debug","stacktrap",_u,J],["debug","symtrace",Au,V]];function Ks(e,r,n){var t=lr[O],i=t[x][e];i||(i=Du(),ho(t[x][e]=i,ce)),i[x][r]||(i[x][r]=n)}function el(){var e=lr[O];e!==ue&&e[0]===Q&&Lu(e[x])||(ho(e=Du(),ce),lr[O]=e);var r,n=Ne("App"),t=n[O];for(t!==ue&&t[0]===Q&&Lu(t[x])||(t=Du(),n[O]=t),r=0;r<Ys.length;++r){var i=Ys[r][0],a=Ys[r][1],u=Ys[r][2],o=Ys[r][3],f=(Ys[r][4],Ne(a));f!==ue&&f[U]!==ue||(f=Ee(a,u,o)),ke(a,se)||Ks(i,a,f)}e[x].module||(e[x].module=Du()),lr=Ne("Naan"),ir=Ne("deref"),ar=Ne("."),Ke=Ne("exception"),er=Ne("escape"),ue=Ne("false"),tr=Ne("`"),rr=Ne("this"),nr=Ne("self"),De=Ne("undefined"),Xe=Ne("null"),ze=Ne("true"),Ge=Ne("lambda"),ur=Ne("body"),Er=Ne("call"),fr=Ne("catch"),Qe=Ne("closure"),Ze=Ne("function"),Je=Ne("function&"),Ue=Ne("let"),He=Ne("let&"),or=Ne("loop"),Ve=Ne("macro"),Ye=Ne("var"),pr=Ne("builtin"),sr=Ne("list"),gr=Ne("tuple"),vr=Ne("symbol"),dr=Ne("integer"),hr=Ne("float"),br=Ne("numeric"),yr=Ne("string"),mr=Ne("array"),Mr=Ne("arraycall"),kr=Ne("dictionary"),wr=Ne("object"),Sr=Ne("namespace"),Or=Ne("nonce"),Qs=Ne("save"),Hs=Ne("load"),Pr=Ne("$"),Nr=Ne("weakmap"),$r=Ne("xget"),qr=Ne("xset"),_r=Ne("xcall"),Rr=Ne("xapply"),xr=Ne("xobject"),jr=Ne("textstream"),Ar=Ne("space"),Tr=Ne("cr"),qu=Ne("breakpoint"),cr=Ne("interrupt")}function rl(){function e(e,r){Jc(gr,Fe(e),Ne(r||e)[U])}function r(e,r){Jc(gr,Fe(e),r)}function n(e,r){Jc(vr,Fe(e),Ne(r||e)[U])}function t(e,r){Jc(yr,Fe(e),Ne(r||e)[U])}function i(e,r){Jc(dr,Fe(e),Ne(r||e)[U])}function a(e,r){Jc(hr,Fe(e),Ne(r||e)[U])}function u(e,r){Jc(mr,Fe(e),Ne(r||e)[U])}function o(e,r){Jc(Sr,Fe(e),Ne(r||e)[U])}function f(e,r){Jc(Sr,Fe(e),r)}e("atom"),e("insert"),e("length"),e("reverse"),e("tostring"),e("tuple"),e("typeof"),r("member",Ee("member",function(e,r){return Fc(r,e)},J,!0)),r("toarray",Ee("toarray",function(e){return Cu(mr,e)},J,!0)),r("within",Ee("within",function(e,r){return Wc(r,e)},J,!0)),n("atom"),n("copyproc"),n("copyann"),n("interned"),n("length"),n("namespace"),n("proc","getproc"),n("putproc"),n("symbol"),n("tostring"),n("typeof"),n("value","car"),t("append","strcat"),t("atom"),t("interned"),t("length"),t("string"),t("tostring"),t("unicode"),t("typeof"),i("atom"),i("even"),i("integer"),i("negate"),i("negative"),i("numeric"),i("length"),i("positive"),i("tofloat"),i("toint"),i("tostring"),i("typeof"),i("unicode"),i("zero"),a("atom"),a("even"),a("float"),a("negate"),a("negative"),a("numeric"),a("length"),a("positive"),a("tofloat"),a("toint"),a("tostring"),a("typeof"),a("zero"),u("atom"),u("tostring"),u("totuple"),u("typeof"),o("atom"),o("typeof"),f("tostring",Ee("tostring",function(e){return e[0]===k?e[j]:ue},J,!0)),f("length",Ee("length",function(e){var r;return e[0]===k&&0<=(r=oe.indexOf(e))?Eo(oe[r][te].length):ue},J,!0)),f("symbols",Ee("symbols",function(e){if(e[0]===k&&0<=(r=oe.indexOf(e))){var r=oe[r][te].slice();return r[Ru]=Fu,We(r)}return ue},J,!0)),f("index",Ee("index",function(e){var r;return e[0]===k&&0<=(r=oe.indexOf(e))?Cu(ao(oe[r][ie]),ue):ue},J,!0)),f("lookup",Ee("lookup",function(e,r){var n,r=cs(r);if(e[0]===k&&0<=(n=oe.indexOf(e))){r=oe[n][ie][r],r=oe[n][te][r];if(r)return r}return ue},J,!0))}function nl(){for(var e in l)l.hasOwnProperty(e)&&Ae(e,ao(l[e]))}function tl(){T.hasOwnProperty("init-load")&&T["init-load"]()}Jt(),el(),rl(),nl(),this.Process=function(e,r,n){try{return n=n||"false",0<e.length&&(To(),Ps.SetText(e),r&&Ts.WriteString("\r")),Ht()||(Jt(),Vt(Be(["loop",["catch",[["driver",n]],[[["equal","exception","driver"]]],"false"]])),n="false"),jt=0,Yt(!1),Ht()}catch(e){return mu(pu,"Naan internal error (101): "+e.toString()),!1}},this.GetOutput=function(){return Ts.TakeText()},this.SetInput=function(e,r){Ps.WriteString(e),r&&Ps.SetEOF()},this.RunOutput=function(){try{return jt=0,Yt(!1),Ts.TakeText()}catch(e){return mu(pu,"Naan internal error (102): "+e.toString()),null}},this.Run=function(){try{return jt=0,Yt(!1),Ht()}catch(e){return mu(pu,"Naan internal error (103): "+e.toString()),!1}},this.Escape=function(){try{return To(),Ps.ScanReset(),Ps.SetText(""),Ts.TakeText(),za(Be(["internal","escape"])),!1}catch(e){return mu(pu,"Naan internal error (104): "+e.toString()),null}},this.Banner=function(){return Ts.WriteString("\r[34m[1mWelcome to Naan v1.1.0+1[0m\n"),!0},this.StateSave=function(e){e=Zs(e);return"string"==typeof e&&e},this.StateLoad=function(e){try{return Js(JSON.parse(e))!==ue}catch(e){return mu(pu,"Naan StateLoad failed: "+e.toString()),!1}},this.StateDefault=function(){return tl(),!0},this.On=function(e,r){T[e]=r},this.Signal=function(){To()},this.Status=function(e){return oi(e)},this._InheritNamespace=function(e){for(var r=fe,n=0;n<oe.length;++n){var t,i=oe[n];if(Re(i[j])==e){fe.indexOf(i)<0&&(t=fe.shift(),fe.unshift(i),t&&fe.unshift(t));break}}return r},this._SetNamespace=function(e,r){var n,t=fe;return"string"==typeof e?de(Ce(ve(Fe(e)),$(fe)),!0):B(e)?(n=fe[0],fe=e,!r&&fe.indexOf(n)<0&&fe.push(n)):mu(pu,"_SetNamespace: invalid argument: "+e),t},this._AddNamedObject=function(e,r){if("string"!=typeof e||0===e.length||"object"!=typeof r)return!1;r=We(r);return Wr(e)[1]=r,!0},this._SetValue=function(e,r){if("string"!=typeof e||0===e.length)return!1;r=r===L?Wr(e):Ae(e,Le(r));return r!==ue},this._AddSymbolWithTarget=function(e,r){if("string"!=typeof e||0===e.length)return!1;if("string"!=typeof r||0===r.length)return!1;var n=Ne(r);return n===ue&&(n=Wr(r)),Wr(e),Ae(e,n)!==ue},this._AddPropertyList=function(e,r){return"string"==typeof e&&0!==e.length&&("object"==typeof r&&$e(e,r)[Y])},this._SetBindingList=function(e,r){if("string"!=typeof e||0===e.length)return!1;if("object"!=typeof r)return!1;r=_e(Le(r));return r!==ue&&(qe(e,r),!0)},this._CopyBinding=function(e,r){if("string"!=typeof e||0===e.length)return!1;if("string"!=typeof r||0===r.length)return!1;e=Ne(e);return e!==ue&&(qe(r,e[U]),!0)},this._Execute=function(e){if("object"!=typeof e)return!1;var r=Le(e);if(r===ue)return!1;e=Tt;Tt=-1;r=fo(Ut(r));return Tt=e,r},this._Export=function(e,r){if(!lr)return!1;if("string"!=typeof r||0===r.length)return!1;var n=Ne(r);return n!==ue&&(Ks(e,r,n),!0)},this._Import=function(e,r,n){if(!lr)return!1;if(r===L){var t=lr[O][x][e];if(t===L)return!1;for(var i=Object.getOwnPropertyNames(t[x]),a=0;a<i.length;++a)this._Import(e,i[a]);return!0}if("string"!=typeof r||0===r.length)return!1;if(n===L)n=r;else if("string"!=typeof n||0===n.length)return!1;var u,t=fe.indexOf(ce);0<=t&&fe.splice(t,1);try{u=lr[O][x][e][x][r]}catch(e){u=!1}return!!u&&(qe(n,u[U]),!0)}}}("undefined"==typeof exports?this.Naanlang||(this.Naanlang={}):exports);

/* Copyright (c) 2017-2022 by Zulch Laboratories, Inc. */
!function(St){St.NaanChannel=function(t,e){"use strict";var r,s,o,a,u,n,c=t,i=new(St.LeemonBigIntegerLib?St:require("./bigint.js")).LeemonBigIntegerLib,h="",f=!1,d=0,l=!1,g=0,v=10,T=[],x=null,S=!1,b=[],k="\n!@^&*()+-={}[]|\\:;'<>?,./~`%",m="0123456789",C="0123456789abcdefghijklmnopqrstuvwxyz",O="bfnrt",L="\b\f\n\r\t",I=1e3,p=!1,w=new Array("::","++","--","~=","..","->","==","!=","<=",">=","=?","=!","+=","-=","*=","/=","%=","||","&&","^^",">>","<<","**","/.",".*","@[","@*",";;",";>","===","!==","...","..<","<=>");function R(t){T.push(t),--d}e&&e.Line&&(g=e.Line),e&&e.Column&&(d=e.Column),this.Reset=function(){h="",l=f=!1,g=d=0,v=10,T=[],x=null,I=1e3,this.ScanReset()},this.SetHTML=function(t){p=t},this.Radix=function(){return v},this.SetRadix=function(t){var e=v;return v=t,e},this.NSinfix="::",this.IsBreak=function(t){return"\\"!=t&&0<=k.indexOf(t)},this.QuoteString=function(t){for(var e,n='"',i=0;i<t.length;++i){if("\\"==(e=t.substring(i,i+1))||'"'==e)n+="\\";else{if(0<=(r=L.indexOf(e))){n+="\\"+O.substring(r,r+1);continue}if(e.charCodeAt(0)<32){var r=e.charCodeAt(0).toString(16).toLowerCase();0===r.length?r="00":1==r.length&&(r="0"+r),n+="\\u00"+r;continue}}n+=e}return n+'"'},this.QuoteSymbol=function(t){var e=!1,n=!1;if(1<t.length){if(0<=w.indexOf(t))return t;for(var i,r="",s=0;s<t.length;++s)"#"==(i=t.substring(s,s+1))?(n&&(r+="\\"),n=!(e=!0)):e?n=e=!1:(" "==i||"\\"==i||'"'==i||0<=k.indexOf(i))&&(r+="\\",n=!0),r+=i;return r}return"\\"==t.charAt(0)||'"'==t.charAt(0)?"\\"+t.charAt(0):t},this.IntToString=function(t,e,n){if(e)return"0x"+i.bigInt2str(t,16).toLowerCase();n=n||v;e="";i.negative(t)&&(t=i.negate(t),e="-");n=i.bigInt2str(t,n).toLowerCase();return m.indexOf(n.substring(0,1))<0&&(e+="0"),e+n},this.FloatToString=function(t,e){e=t.toString(e);return!isNaN(t)&&isFinite(t)&&e.indexOf(".")<0&&e.indexOf("e")<0?e+".0":e},this.ListQuote=function(t){return"("==t||")"==t||","==t||"`"==t||"."==t?"`"+t:t},this.DottedPairToString=function(t,e){return this.ListQuote(t)+" . "+this.ListQuote(e)},this.ListToString=function(t){for(var e="(",n=0;n<t.length;++n)1<e.length&&(e+=" "),e+=this.ListQuote(t[n]);return e+=")"},this.EOF=function(){return 0===h.length&&f},this.SetEOF=function(){f||(f=!0,c.Signal(this))},this.Full=function(){return I&&h.length>I},this.SetWriteLimit=function(t){I="number"==typeof t?t:1e3},this.WriteString=function(t){var e,n,i=0===h.length;if(p)for(n=0;n<t.length;++n)"\n"===(e=t.substring(n,n+1))?(h+="<br>",d=0,++g):(h+=e,++d);else for(h+=t,n=0;n<t.length;++n)"\n"===(e=t.substring(n,n+1))?(d=0,++g):"\r"===e?d=0:++d;i&&c.Signal(this)},this.TextAvail=function(){return h.length},this.TakeText=function(){var t=h,e=this.Full();return h="",e&&c.Signal(),t},this.SetText=function(t){h=t,S&&c.Signal(this)},this.AddText=function(t){f=!1,h+=t,S&&c.Signal(this)},this.ReadChar=function(){var t;if(0<T.length)++d,t=T.pop();else{if(S=0===h.length)return null;if(t=h.substring(0,1),h=h.substring(1),"\r"==t||"\n"==t){if("\r"==x&&"\n"==t)return x=t,this.ReadChar();d=0,l=!(t="\n"),++g}else!l&&t.trim()&&(l=d),++d}return x=t},this.UnreadChar=function(t){R(t)},this.ReadReady=function(){var t=h.length;return t+=T.length},this.LastChar=function(t){return T.slice(-1)[0]},this.Line=function(){return g},this.Column=function(){return d},this.CommentLoc=function(){return b};this.Save=function(){var t={magic:"NaanIO_1.0"};return t.text=h,t.inputEOF=f,t.column=d,t.lineIndent=l,t.line=g,t.radix=v,t.scanLast=T,t.lastread=x,t.scanState=r,t.scanSkipQuote=s,t.token=o,t.codeString=a,t.nofloat=u,t.commentLoc=b,t.tokenStart=n,t},this.Load=function(t){return t.version!=kMagic?(Reset(),!1):(h=t.text,f=t.inputEOF,d=t.column,l=t.lineIndent,g=t.line,v=t.radix,T=t.scanLast,x=t.lastread,r=sstate.scanState,s=t.scanSkipQuote,o=t.token,a=t.codeString,u=t.nofloat,b=t.commentLoc,n=t.tokenStart,!0)};var A=34,F=39,y=42,N=47,Q=92,E=32,B=13,H=10,j=9,q=117,M=120,W=120,z=46,D=43,P=45,U=101,_=69,G=35,J=0,K=1,V=2,X=3,Y=4,Z=5,$=6,tt=7,et=8,nt=9,it=10,rt=11,st=12,ot=13,at=14,ut=15,ct=16,ht=17,ft=18,dt=19,lt=20,gt=21,vt=22,Tt=23,xt=24;this.ScanReset=function(){r=J,a=o="",u=!(T=[])},this.ScanReset(),this.kTTSymbol=1,this.kTTInteger=2,this.kTTHexInteger=3,this.kTTString=4,this.kTTComment=5,this.kTTCommentLine=6,this.kTTFloat=7,this.kTTNewline=8,this.ReadToken=function(){for(var t=null;;){if(r==J&&0===o.length&&(n={line:g,column:d}),null===(e=this.ReadChar())&&0===o.length)return null;if(null===e&&!f)return null;if(null===e||function(t){var e,n,i=t.charCodeAt(0);switch(i==B&&(i=H),r){case J:switch(i){case E:case j:return u=!1,0<o.length?1:void 0;case H:return u=!1,0===o.length?o="\n":R(t),1;case N:return 0<o.length?(R(t),1):(r=V,void(o=t));case Q:return void(r=$);case A:return r=nt,void(s=l);case F:return void(r=ot);case G:return o+=t,void(r=et);case P:if(u&&0===o.length)return o=t,void(r=xt)}return 0<=k.indexOf(t)?0===o.length?(o=t,void(r=K)):(R(t),1):(0===o.length&&0<=m.indexOf(t)&&(r=ht),void(o+=t));case V:if(i==N)return r=Z,o+=t,void(b=[g,d-2]);if(i==y)return r=X,o+=t,void(b=[g,d-2]);r=K;case K:return 0<=w.indexOf(o+t)?void(o+=t):(R(t),1);case X:return o+=t,void(i==y&&(r=Y));case Y:return(o+=t,i==N)?1:void(i!=y&&(r=X));case Z:return i==H?1:void(o+=t);case $:return i==H?void(r=J):0<=(e=O.indexOf(t))?(o+=L.substring(e,e+1),void(r=J)):(o+=t,void(r=i==G?et:tt));case tt:if(i==Q)r=$;else{if(0<=k.indexOf(t)||i==E||i==j||i==H)return R(t),r=J,1;o+=t,r=J}return;case et:return o+=t,void(r=0<=k.indexOf(t)?tt:J);case xt:if("0"==t)return r=J,R(t),1;if(0<=m.indexOf(t))r=ht;else{if(!(0<=w.indexOf(o+t)))return r=J,R(t),1;r=K}return void(o+=t);case nt:return i==Q?void(r=it):i==A||(0===d&&i===H||!(d<=s)||t.trim())&&void(o+=t);case it:return i==M?(r=rt,void(a="")):i==q?(r=st,void(a="")):(0<=(e=O.indexOf(t))?o+=L.substring(e,e+1):o+=t,void(r=nt));case rt:return void(2<=(a+=t).length&&(o+=String.fromCharCode(parseInt(a,16)),r=nt));case st:return void(4<=(a+=t).length&&(o+=String.fromCharCode(parseInt(a,16)),r=nt));case ot:return i==Q?void(r=at):i==F||void(o+=t);case at:return i==M?(r=ut,void(a="")):i==q?(r=ct,void(a="")):(0<=(e=O.indexOf(t))?o+=L.substring(e,e+1):o+=t,void(r=ot));case ut:return void(2<=(a+=t).length&&(o+=String.fromCharCode(parseInt(a,16)),r=ot));case ct:return void(4<=(a+=t).length&&(o+=String.fromCharCode(parseInt(a,16)),r=ot));case ht:if(m.indexOf(t)<0)if(i==z){if(u)return R(t),1;r=lt}else if(i==U||i==_)r=vt;else if(0<=(n=C.indexOf(t.toLowerCase()))&&n<v)r=ft;else{if("0"!=o||i!=W)return R(t),1;r=dt}return void(o+=t);case ft:return(n=C.indexOf(t.toLowerCase()))<0||v<=n?(R(t),1):void(o+=t);case dt:return(n=C.indexOf(t.toLowerCase()))<0||16<=n?(R(t),1):void(o+=t);case lt:return m.indexOf(t)<0?(r=ht,R(t),R("."),1):(o+=t,void(r=gt));case gt:if(m.indexOf(t)<0){if(i!=U&&i!=_)return R(t),1;r=vt}return void(o+=t);case vt:return(r=Tt,m.indexOf(t)<0&&i!=D&&i!=P)?(R(t),1):void(o+=t);case Tt:return m.indexOf(t)<0?(R(t),1):void(o+=t)}}(e)){switch(r){case K:case J:case V:u="."==o,t="\n"==o?this.kTTNewline:this.kTTSymbol;break;case ht:case ft:o=o.charCodeAt(0)==P?i.negate(i.str2bigInt(o.substring(1),v,1)):i.str2bigInt(o,v,1),t=this.kTTInteger;break;case dt:o=i.str2bigInt(o.substring(2),16,1),t=this.kTTHexInteger;break;case nt:case ot:t=this.kTTString;break;case X:if(!f)return null;t=!1;break;case Y:t=this.kTTComment;break;case Z:t=this.kTTCommentLine;break;case lt:case gt:case vt:case Tt:t=this.kTTFloat;break;default:t=!1}r=J;var e={token:o,type:t,loc:n};return o="",e}}}}}("undefined"==typeof exports?this.Naanlang||(this.Naanlang={}):exports);

/* Copyright (c) 2017-2022 by Zulch Laboratories, Inc. */
!function(e){e.BootLingo=function(e){"use strict";var t=e._SetNamespace("Lib");e._CopyBinding("equal","=="),e._CopyBinding("setq","="),e._CopyBinding("and","&&"),e._CopyBinding("or","||"),e._CopyBinding("loop","while"),e._Import("number","difference","-"),e._Import("number","greater",">"),e._Import("number","lesser","<"),e._Import("number","times","*"),e._Import("number","plus","+"),e._Import("number","quotient","/"),e._Import("number","quotient","/."),e._SetValue("echo",[]),e._SetValue("err",[]),e._SetValue("rdsDriver"),e._SetBindingList("^",["macro","^",["ex1","ex2"],["list",["`","^"],"ex1","ex2"]]),e._SetBindingList("!",["macro","!",["ex1"],["list",["`","!"],"ex1"]]),e._SetBindingList("~",["macro","~",["ex1"],["list",["`","~"],"ex1"]]),e._SetBindingList("~=",["macro","~=",["ex1","ex2"],["list",["`","~="],"ex1","ex2"]]),e._SetBindingList("tr",["macro","tr",["ex1"],["list",["`","tr"],"ex1"]]),e._SetBindingList("matdiv",["macro","matdiv",["ex1","ex2"],["list",["`","matdiv"],"ex1","ex2"]]),e._SetBindingList("#[",["macro","#[",["ex1","ex2"],["list",["`","#["],"ex1","ex2"]]),e._SetBindingList("[",["macro","[",["ex1","ex2"],["list","[","ex1","ex2"]]),e._SetBindingList("dereflist",["macro","dereflist","x",["cons","dereflist","x"]]),e._SetBindingList("!=",["function","!=",["ex1","ex2"],["not",["equal","ex1","ex2"]]]),e._SetBindingList(">=",["function",">=",["ex1","ex2"],["or",["greater","ex1","ex2"],["equal","ex1","ex2"]]]),e._SetBindingList("<=",["function","<=",["ex1","ex2"],["or",["lesser","ex1","ex2"],["equal","ex1","ex2"]]]),e._SetBindingList("\\.*",["function","\\.*",["expr"],["keys","expr"]]),e._SetBindingList("@",["macro","@",["sym","write"],["=","sym",["eval","sym"]],[[["eval","write"],["put","sym"]]],["cdr","sym"]]),e._SetBindingList("@*",["function","@*",["sym"],["keys",["cdr","sym"]]]),e._SetBindingList("!==",["function","!==",["ex1","ex2"],["not",["eq","ex1","ex2"]]]),e._SetBindingList("<=>",["function","<=>",["ex1","ex2"],[["not",["||","ex1","ex2"]],0],[["||",["<","ex1","ex2"],["not","ex2"]],-1],[["||",[">","ex1","ex2"],["not","ex1"]],1],0]),e._SetBindingList("\\..",["macro","\\..",["ex1","ex2"],["list",["`","\\.."],"ex1","ex2"]]),e._SetBindingList("\\..<",["macro","\\..<",["ex1","ex2"],["list",["`","\\..<"],"ex1","ex2"]]),e._SetBindingList("append",["function","append","lists",["function","append1",["items","result"],[["atom","items"],"result"],["cons",["car","items"],["append1",["cdr","items"],"result"]]],["function","append2",["lists","result"],[["atom","lists"],"result"],[["atom",["car","lists"]],["cons",["car","lists"],["append2",["cdr","lists"],"result"]]],["append1",["car","lists"],["append2",["cdr","lists"],"result"]]],["append2","lists"]]),e._SetBindingList("prepad",["function","prepad",["value","length","padstr"],[[["not","padstr"],["=","padstr","$ "]]],["=","value",["tostring","value"]],[".",["strcat",[".","padstr","repeat",["length"]],"value"],"slice",[["-","length"]]]]),e._SetBindingList("postpad",["function","postpad",["value","length","padstr"],[[["not","padstr"],["=","padstr","$ "]]],["=","value",["tostring","value"]],[".",["strcat","value",[".","padstr","repeat",["length"]]],"slice",[0,"length"]]]),e._SetBindingList("map",["function","map",["targex","func","false","result","item","keylist"],[["array","targex"],["arraycall","targex","map","func"]],[["or",["dictionary","targex"],["xobject","targex"]],["=","result",["new","dictionary"]],["=","keylist",["keys","targex"]],["for",["let","lambda",["iter"],["=","iter",["iterate","keylist",["`","item"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","item",[".","iter","$value"]],["xset","result","item",["call","func",["deref","targex","item"],"item","targex"]]]]],"result"],[["atom","targex"],"false"],["for",["let","lambda",["iter"],["=","iter",["iterate","targex",["`","item"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","item",[".","iter","$value"]],["=","result",["cons",["call","func","item",["length","result"],"targex"],"result"]]]]],["reverse","result"]]),e._SetBindingList("iterate",["function","iterate",["target","varsym","false","iterdict","keysym"],[[["not",["||",["symbol","varsym"],["tuple","varsym"]]],["throw",["list","internal",["strcat","$iteration variable invalid: ","varsym"]]]]],["=","iterdict",{dictionary:{$target:"target",$final:"final_value"}}],["function","final_value",["dict"],"dict"],[[["tuple","target"],["=","keysym",["car","target"]],[[["&&",["symbol","keysym"],["deref",["@","keysym"],["`","\\.iterate"]]],["return",["call",["deref",["@","target"],["`","\\.iterate"]],"target","varsym"]]],[["&&",["symbol","keysym"],["deref",["@","iterate"],"keysym"]],["return",["call",["deref",["@","iterate"],"keysym"],"target","varsym"]]]],["set.","iterdict",["`","traverse"],"target"],["set.","iterdict",["`","index"],-1],["set.","iterdict",["`","last"],["-",["length","target"],1]],[[["symbol","varsym"],["set.","iterdict",["`","next"],"tuple_next_value"]],["set.","iterdict",["`","next"],"tuple_next"]],["function","tuple_next_value",["dict"],[["empty",[".","dict","traverse"]],["set.","dict",["`","done"],"true"]],["preadjust",[".","dict","index"],"+",1],["set.","dict",["`","value"],["car",[".","dict","traverse"]]],["set.","dict",["`","traverse"],["cdr",[".","dict","traverse"]]],"false"],["function","tuple_next",["dict"],[["empty",[".","dict","traverse"]],["set.","dict",["`","done"],"true"]],["set.","dict",["`","value"],["list",["car",[".","dict","traverse"]],["preadjust",[".","dict","index"],"+",1]]],["set.","dict",["`","traverse"],["cdr",[".","dict","traverse"]]],"false"]],[["||",["array","target"],["&&",["xobject","target"],["not",["xkeys","target"]]]],["set.","iterdict",["`","index"],-1],["set.","iterdict",["`","last"],["-",[".","target","length"],1]],[[["not",[".","iterdict","last"]],["set.","iterdict",["`","last"],-1]]],[[["symbol","varsym"],["set.","iterdict",["`","next"],"array_next_value"]],["set.","iterdict",["`","next"],"array_next"]],["function","array_next_value",["dict"],[[">=",[".","dict","index"],[".","dict","last"]],["set.","dict",["`","done"],"true"]],["set.","dict",["`","value"],["deref",[".","dict","target"],["preadjust",[".","dict","index"],"+",1]]],"false"],["function","array_next",["dict"],[[">=",[".","dict","index"],[".","dict","last"]],["set.","dict",["`","done"],"true"]],["preadjust",[".","dict","index"],"+",1],["set.","dict",["`","value"],["list",["deref",[".","dict","target"],[".","dict","index"]],[".","dict","index"]]],"false"]],[["&&",["object","target"],[".","target","\\.iterate"]],["return",[".","target","\\.iterate",["target","varsym"]]]],[["||",["dictionary","target"],["object","target"],["xobject","target"]],["set.","iterdict",["`","index"],-1],["set.","iterdict",["`","keys"],[".",["keys","target"],"toarray"]],["set.","iterdict",["`","last"],["-",[".",[".","iterdict","keys"],"length"],1]],[[["not",[".","iterdict","last"]],["set.","iterdict",["`","last"],-1]]],[[["symbol","varsym"],["set.","iterdict",["`","next"],"dict_next_key"]],["set.","iterdict",["`","next"],"dict_next"]],["function","dict_next_key",["dict"],[[">=",[".","dict","index"],[".","dict","last"]],["set.","dict",["`","done"],"true"]],["set.","dict",["`","value"],["deref",[".","dict","keys"],["preadjust",[".","dict","index"],"+",1]]],"false"],["function","dict_next",["dict","false","index"],[[">=",[".","dict","index"],[".","dict","last"]],["set.","dict",["`","done"],"true"]],["=","key",["deref",[".","dict","keys"],["=","index",["preadjust",[".","dict","index"],"+",1]]]],["set.","dict",["`","value"],["list","key",["deref",[".","dict","target"],"key"],"index"]],"false"]],[["not","target"],["set.","iterdict",["`","last"],["set.","iterdict",["`","index"],-1]],["set.","iterdict",["`","next"],"empty_next"],["set.","dict",["`","done"],"true"],["function","empty_next",["dict"],"true"]],["throw",["list","internal",["strcat","$don't know how to iterate ",["typeof","target"]]]]],"iterdict"]),e._SetBindingList("sleep",["closure","sleep",["msec"],["=","msec",["||","msec",0]],[".",["future",["function","sleep","false","true"],"msec"],"wait","false"]]),e._SetBindingList("await",["closure","await",["promise","false","pending"],["=","pending",["new","nonce"]],[".","promise","then",[["function","success",["value"],[".","pending","signal",[["list","false","value"]]]],["function","failure",["error"],[".","pending","signal",[["list","error"]]]]]],[".","pending","wait","false"]]),e._SetBindingList("asyncArray",["closure","asyncArray",["elements","maxActive","worker","false","pending","results"],[[["not",["numeric",[".","elements","length"]]],["return","false"]]],["=","results",{array:[]}],["=","pending",["new","nonce"]],["set.","pending",["`","active"],0],["set.","pending",["`","index"],0],["set.","pending",["`","running"],{array:[]}],["closure","processOne",["index","false","entry"],["preadjust",[".","pending","active"],"+",1],["set[",[".","pending","running"],"index","true"],["=","entry",["deref","elements","index"]],["function","cancel",["result"],["sprint"],["done","index","result"]],["future",["function","coProcess",["false","result"],["catch",[["=","result",["worker","entry","index","cancel"]]],"false",[["sprint"],["done","index","result"]]]],0]],["function","done",["index","result"],[[["deref",[".","pending","running"],"index"],["set[","results","index","result"],["preadjust",[".","pending","active"],"-",1],["set[",[".","pending","running"],"index","false"]]],["doMore"]],["function","doMore","false",[["&&",["==",[".","pending","active"],0],[">=",[".","pending","index"],[".","elements","length"]]],[".","pending","signal",["results"]]],["while","false",[["not",["&&",["<",[".","pending","active"],"maxActive"],["<",[".","pending","index"],[".","elements","length"]]]]],["processOne",["postadjust",[".","pending","index"],"+",1]]]],["doMore"],"pending"]),e._SetBindingList("syncAdapter",["function","syncAdapter","args",["call",["closure","syncWaiter",["proc","arglist","false","pending"],["=","pending",["new","nonce"]],["apply","proc",["reverse",["reverse","arglist"],["list",["function","lambda",["error","data"],[".","pending","signal",[["list","error","data"]]]]]]],[".","pending","wait",["proc"]]],["pop","args"],"args"]]),e._SetBindingList("asyncResult",["closure","asyncResult","args",[".",["future",["function","asyncResultF","false",["apply",["pop","args"],"args"]]],"run","false"]]),e._SetBindingList("jsInstanceOf",["function","jsInstanceOf",["item","constructor"],[["xobject","item","constructor"],["loop","false",[[["not","item"],"false",["break"]],[["eq","item",[".","constructor","prototype"]],["break"]],["=","item",[".",[".","js","o"],"getPrototypeOf",["item"]]]]]]]),e._SetBindingList("jsTypedArray",["function","jsTypedArray",["item"],[[["not",["xobject","jsTypedArrayType"]],[[".","js","w"],["=","jsTypedArrayType",[".",[".","js","o"],"getPrototypeOf",[[".",[".","js","w"],"Uint8Array"]]]]],["=","jsTypedArrayType",[".",[".","js","o"],"getPrototypeOf",[[".",[".","js","g"],"Uint8Array"]]]]]],["||",["jsInstanceOf","item","jsTypedArrayType"],["jsInstanceOf",[".","item","constructor"],"jsTypedArrayType"]]]),e._SetBindingList("makeActivator",["closure","makeActivator",["nslist","false","checkns","targns"],["=","checkns",["nscaller"]],[[["not","nslist"],["=","nslist",["nsactive"]]]],["=","targns",["car","nslist"]],["enclose",["function","lambda","false",[["eq","checkns",["nscaller"]],["nsactive","nslist"]],["throw",[".","$activate ","concat",[[".","nslist","tostring"],"$ needs ",[".","checkns","tostring"],"$ not ",[".",["nscaller"],"tostring"]]]]],"targns"]]),e._SetBindingList("dialect",["function","dialect",["id"],[["identity","id"],[[["==","id",0],["=","id",[".",["dialect"],0]]]],[".",[".",[".","module","exports"],"Registry"],"findName",["id"]]],[".",[".",[".","module","exports"],"Registry"],"dialects","false"]]),e._SetBindingList("RuntimeOperators",["function","RuntimeOperators","false",[".",[".","module","exports"],"operators"]]),e._AddPropertyList("RuntimeLibInit",[["$.lingoInit","true"]]),e._SetBindingList("RuntimeLibInit",["function","RuntimeLibInit",["modname","false","manifest","operlist","runtimelib"],["=","manifest",["`",["=","+","-","*","/","/.","<",">","&&","and","||","or","^","!","~","~=","tr","matdiv","`","#[","[","dereflist","==","!=",">=","<=","\\.*","@","@*","eq","not","while","for","===","!==","<=>","=?","=!","\\..","\\..<","\\...","append","prepad","postpad","map","iterate","sleep","await","asyncArray","syncAdapter","asyncResult","jsInstanceOf","jsTypedArray","makeActivator","dialect","RuntimeOperators","RuntimeLibInit"]]],["=","operlist",["`",["=","+","-","*","/","/.","<",">","&&","and","||","or","^","!","~","~=","tr","matdiv","`","#[","[","==","!=",">=","<=","\\.*","@","@*","eq","not","while","for","===","!==","<=>","=?","=!","\\..","\\..<"]]],["=","runtimelib",["`",["dereflist","prepad","postpad","map","iterate","defproc","defprop","sleep","await","asyncArray","syncAdapter","asyncResult","jsInstanceOf","jsTypedArray","makeActivator","dialect"]]],["function","nsCopyproc",["sym","proc"],[["nsrights","sym"],["copyproc","sym","proc"]],[["!=",[".","sym","proc"],"proc"],["debuglog","$no rights to set sym from proc","sym","proc"]]],[[["symbol","NideBuild"],["nsCopyproc",["`","="],"setq"],["nsCopyproc",["`","=?"],"setq"],["nsCopyproc",["`","=!"],"setq"],["nsCopyproc",["`","+"],"plus"],["nsCopyproc",["`","-"],"difference"],["nsCopyproc",["`","*"],"times"],["nsCopyproc",["`","/"],"quotient"],["nsCopyproc",["`","/."],"quotient"],["nsCopyproc",["`","<"],"lesser"],["nsCopyproc",["`",">"],"greater"],["nsCopyproc",["`","&&"],["`","and"]],["nsCopyproc",["`","||"],["`","or"]],["nsCopyproc",["`","while"],["`","loop"]],["nsCopyproc",["`","for"],"call"],["nsCopyproc",["`","=="],"equal"],["nsCopyproc",["`","==="],["`","eq"]],["sudo",["set[",["@","tuple","true"],["`","append"],"append"]],["sudo",["set[",["@","tuple","true"],["`","map"],"map"]],["sudo",["set[",["@","array","true"],["`","map"],"map"]]]],[[["not","modname"],["=","modname",[".","module","id"]]]],[".",[".","Naan","module"],"build",["modname","$RuntimeLib",["function","lambda",["modobj","compobj"],["set.","compobj",["`","manifest"],"manifest"],["set.",[".","modobj","exports"],["`","append"],"append"],["set.",[".","modobj","exports"],["`","prepad"],"prepad"],["set.",[".","modobj","exports"],["`","postpad"],"postpad"],["set.",[".","modobj","exports"],["`","map"],"map"],["set.",[".","modobj","exports"],["`","iterate"],"iterate"],["set.",[".","modobj","exports"],["`","operators"],[".",[".","Naan","module"],"export",["operlist"]]],["set.",[".","modobj","exports"],["`","runtimelib"],[".",[".","Naan","module"],"export",["runtimelib"]]],["sudo",["set.","Naan",["`","runtimelib"],[".",[".","modobj","exports"],"runtimelib"]]]]]]]),e._Execute(["RuntimeLibInit","$Lib"]),e._SetBindingList("defproc",["macro","defproc","exlist",["call",["function","lambda",["false","procname"],["=","procname",["caadr","exlist"]],[["!=",["namespace","procname"],["car",["nsactive"]]],["printline","$cannot define ",["car","exlist"],"$ ","procname","$ in ",["tostring",["car",["nsactive"]]]],"false"],["=","exlist",["enclose","exlist"]],[[["&&",["!=",["getproc","procname"],"exlist"],["getproc","procname"]],["printline","$ ==> redefined: ","procname"]]],["putproc","procname","exlist"],"procname"]]]),e._SetBindingList("defprop",["macro","defprop",["ex1","ex2","ex3","false","fbind","procname"],[["member",["car","ex3"],["`",["function","function&","macro","closure","let","let&"]]],["=","procname",["compress",["list","ex1","ex2"]]],[["!=",["namespace","procname"],["car",["nsactive"]]],["printline","$cannot define property ",["car","ex3"],"$ ","procname","$ in ",["tostring",["car",["nsactive"]]]],"false"],["=","fbind",["enclose",["cons",["car","ex3"],["cons","procname",["cddr","ex3"]]]]],[[["&&",["get","ex1","ex2"],["!=",["get","ex1","ex2"],"fbind"]],["print","$ ==> redefined: "],["printline","ex1","space","ex2"]]],["putproc","procname","fbind"],["put","ex1","ex2","procname"],"ex1"],[["==",["get","ex1","ex2"],"ex3"],"ex1"],[[["get","ex1","ex2"],["print","$ ==> redefined: "],["printline","ex1","space","ex2"]]],["put","ex1","ex2","ex3"],"ex1"]),e._SetBindingList("DefineLanguage",["closure","DefineLanguage",["langname","grammar","parser","unparser"],["closure","dialect",["name","operators","enterDNS","false","dobj"],["=","dobj",["new","object","this"]],["set.","dobj",["`","ns"],[".",["nsactive"],0]],["set.","dobj",["`","name"],"name"],["set.","dobj",["`","grammar"],["new","grammar"]],["set.","dobj",["`","operators"],"operators"],["set.","dobj",["`","exunparse"],{dictionary:{}}],["set.","dobj",["`","parser"],"parser"],["set.","dobj",["`","unparser"],"unparser"],["set.","dobj",["`","parse"],["function","parse",["source"],[".","dobj","parser",["source",[".","dobj","grammar"],[".","dobj","operators"]]]]],["set.","dobj",["`","parseErrorString"],["function","parseErrorString",["error"],["langParseErrorString","error"]]],["set.","dobj",["`","unparse"],["function","unparse",["expr","options"],[".","dobj","unparser",["expr","options",[".","dobj","grammar"],[".","dobj","exunparse"]]]]],["set.","dobj",["`","print"],["function","print",["expr","options"],[".",[".","dobj","unparser",["expr","options",[".","dobj","grammar"],[".","dobj","exunparse"]]],"string","false"]]],["set.","dobj",["`","defhook"],["function","defhook",["hook","false","returner","newsym"],["=","returner",["makeActivator"]],["enterDNS"],["=","newsym",["compress","hook"]],["copyproc","newsym","hook"],["returner"],"newsym"]],["set.","dobj",["`","defunparse"],["function","defunparse",["sym","proc"],["set[",[".","dobj","exunparse"],"sym","proc"]]],["set.","dobj",["`","redefine"],["function","redefine",["sym","proc","false","returner"],["=","returner",["makeActivator"]],["enterDNS"],["=","sym",["compress","sym"]],[[["tuple","proc"],["putproc","sym","proc"]],["copyproc","sym","proc"]],["returner"],"sym"]],["set.","dobj",["`","defatt"],["function","defatt",["sym","key","value","false","returner"],["=","returner",["makeActivator"]],["enterDNS"],["=","sym",["compress","sym"]],["put","sym","key","value"],["returner"],"sym"]],["set.","dobj",["`","defsym"],["function","defsym",["syms","false","cursyms"],["=","returner",["makeActivator"]],["enterDNS"],[[["atom","syms"],["=","cursyms",["compress","syms"]]],["while","false",[["not",["not",["atom","syms"]]]],["push",["compress",["pop","syms"]],"cursyms"]],["=","cursyms",["reverse","cursyms"]]],["returner"],"cursyms"]],["set.","dobj",["`","require"],["function","drequire",["path","reload","false","returner","result"],["=","returner",["makeActivator"]],["enterDNS"],["=","result",["require","path","options","dobj"]],["returner"],"result"]],["set.","dobj",["`","info"],["function","info","false",{dictionary:{$name:[".","dobj","name"],$grammar:[".","dobj","grammar"],$operators:[".","dobj","operators"],$parser:[".","dobj","parser"],$unparser:[".","dobj","unparser"],$namespace:[".","dobj","ns"]}}]],["set.","dobj",["`","destroy"],["function","destroy","false",[[["not",[".","dobj","module"]],["return","false"]]],[".",[".",[".","module","exports"],"Registry"],"unregister",["dobj"]],[".",[".","dobj","module"],"destroy","false"],["set.","dobj",["`","module"],"false"],"true"]],["set.","dobj",["`","derive"],["function","derive",["diname","operators","false","newdialect"],[[["not","operators"],["=","operators",[".","dobj","operators"]]]],["=","newdialect",["initialize",[".",[".","dobj","name"],"concat",["$_","diname"]],"operators"]],["set.","newdialect",["`","parent"],"dobj"],"newdialect"]],"dobj"],["function","initialize",["langname","operators","false","newdialect","dialsym"],[".",[".","Naan","module"],"build",[[".","$Lang_","concat",["langname"]],"$RuntimeLib",["function","lambda",["modobj","compobj","false","locops"],[".",[".","Naan","module"],"letimport",["operators"]],["=","dialsym",["compress","$Dialect"]],["=","locops",{dictionary:{}}],["for",["let","lambda",["iter"],["=","iter",["iterate","operators",["`","key"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","key",[".","iter","$value"]],["set[","locops","key",["compress","key"]]]]],["set[","locops","dialsym","dialsym"],["=","newdialect",["dialect","langname","locops",["makeActivator"]]],["set.","newdialect",["`","module"],"modobj"],["call",["closure","lambda",["dialect"],["putproc","dialsym",["function","lambda","false","dialect"]]],"newdialect"],["assign","dialsym","newdialect"]]]],[".",[".",[".","module","exports"],"Registry"],"register",["langname","newdialect"]],"newdialect"],["initialize","langname",["RuntimeOperators"]]]),e._SetBindingList("Registry",["closure","Registry",["false","registry"],["=","registry",["new","object","this"]],["set.","registry",["`","languages"],{array:[]}],["set.","registry",["`","register"],["function","register",["name","dobj","false","lang"],["for",["let","lambda",["iter"],["=","iter",["iterate",[".","registry","languages"],["`","lang"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","lang",[".","iter","$value"]],[[["==",[".","lang","name"],"name"],["set.","lang",["`","dialect"],"dobj"],["return"]]]]]],[".",[".","registry","languages"],"push",[{dictionary:{$name:"name",$dialect:"dobj"}}]]]],["set.","registry",["`","unregister"],["function","unregister",["dobj"],["set.","registry",["`","languages"],[".",[".","registry","languages"],"filter",[["function","lambda",["item"],["!==",[".","item","dialect"],"dobj"]]]]],"true"]],["set.","registry",["`","findName"],["function","findName",["name","false","lang"],["=","name",["tostring","name"]],["for",["let","lambda",["iter"],["=","iter",["iterate",[".","registry","languages"],["`","lang"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","lang",[".","iter","$value"]],[[["==",[".","lang","name"],"name"],["return",[".","lang","dialect"]]]]]]],"false"]],["set.","registry",["`","findNamespace"],["function","findNamespace",["ns","false","lang"],["for",["let","lambda",["iter"],["=","iter",["iterate",[".","registry","languages"],["`","lang"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","lang",[".","iter","$value"]],[[["===",[".",[".","lang","dialect"],"ns"],"ns"],["return",[".","lang","dialect"]]]]]]],"false"]],["set.","registry",["`","dialects"],["function","dialects","false",[".",[".",[".","registry","languages"],"map",[["function","lambda",["item"],[".","item","name"]]]],"totuple"]]],"registry"]),e._SetBindingList("ParsEnvironment",["closure","ParsEnvironment",["dialect","envName","false","penv","gohome","localnaan"],[[["not","envName"],["=","envName","$Parsenv"]]],["=","penv",["new","object","this"]],["=","gohome",["makeActivator"]],[[["||",["not",[".","dialect","parser"]],["not",[".","dialect","unparser"]]],["return","false"]]],["set.","penv",["`","ns"],["new","namespace","envName"]],[[["not",[".","penv","ns"]],["return","false"]]],["nsactive",["cons",[".","penv","ns"],[".",["nsactive"],-2]]],["set.","penv",["`","gons"],["makeActivator"]],["set.","penv",["`","saves"],{dictionary:{$exception:[".",["`","exception"],"proc"],$require:[".",["`","require"],"proc"],$sudo:[".",["`","sudo"],"proc"],$naan:"Naan"}}],["set.","penv",["`","locals"],["letlocal","Naan","require","sudo"]],["=","localnaan",[".",[".","penv","locals"],0]],["assign","localnaan",["new",[".",[".","penv","saves"],"naan"]]],["set.",[".","localnaan","module"],["`","require"],"false"],["set.",[".","localnaan","module"],["`","sudo"],"false"],["putproc",[".",[".","penv","locals"],1],"false"],["putproc",[".",[".","penv","locals"],2],"false"],["set.",[".","localnaan","module"],["`","require"],"false"],["set.",[".","localnaan","module"],["`","sudo"],"false"],["gohome"],["function","evalgo","false",[".","penv","gons","false"]],["function","evalhome","false",["gohome"]],["set.","penv",["`","eval"],["closure","evalf",["expr","false","result"],["evalgo"],["catch",[["=","result",["eval","expr"]]],[[["identity","true"],["=","result","exception"]]],[["evalhome"]]],"result"]],["set.","penv",["`","evalq"],["macro","evalq",["expr"],["evalf","expr"]]],["set.","penv",["`","parse"],["function","parse",["text","options","false","output","source","xchan","errors","error","expr","saves","errtext","row","lastrow","outext"],["=","output",{dictionary:{$errors:{array:[]},$annotations:{array:[]},$text:{array:[]},$exprs:{array:[]},$results:{array:[]}}}],["=","source",["new","textstream","text",["`","string"]]],["=","xchan",["textstreams",["list","source","source"]]],["catch",[[".","penv","gons","false"],["loop","false",["catch",[[".",[".","penv","saves"],"sudo",[["putproc",["`","exception"],"false"]]],["=",["errors","expr"],[".","dialect","parse",["source"]]],["for",["let","lambda",["iter"],["=","iter",["iterate","errors",["`","error"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","error",[".","iter","$value"]],["=","errtext",["langParseErrorString","error"]],["=","row",[".",[".","error","at"],0]],[[["!=","row","lastrow"],[".",[".","output","$annotations"],"push",[{dictionary:{$row:"row",$column:[".",[".","error","at"],1],$text:"errtext",$type:"$error"}}]],["=","lastrow","row"]]],[".",[".","output","errors"],"push",["errtext"]]]]],[[["identity","expr"],[".",[".","output","exprs"],"push",["expr"]],["=","expr",["call",["function","lambda","false",["evalactive","expr"]]]],[".",[".","output","results"],"push",["expr"]],[[".","options","pretty"],["set.","output",["`","pretty"],{array:[]}],[["==",[".",[".","source","tokenlast","false"],"atom"],["`",";>"]],[".",[".","output","pretty"],"push",[["tostring","expr",{dictionary:{$quote:"true"}}]]]],[["!=",[".",[".","source","tokenlast","false"],"atom"],["`",";;"]],[".",[".","output","pretty"],"push",[[".","dialect","print",["expr"]]]]]]]]],"false",[[".",[".","penv","saves"],"sudo",[["putproc",["`","exception"],[".","saves","exception"]]]]]]]],[[["identity","true"],[["and",["==",["tostring",["car","exception"]],"$internal"],["==",["tostring",["second","exception"]],"$end-of-file"]]],[["and",["==",["tostring",["car","exception"]],"$internal"],["string",["second","exception"]]],[".",[".","output","errors"],"push",[["second","exception"]]]],[["ErrorObject","exception"],[".",[".","output","errors"],"push",[[".","$exception: ","concat",[["ErrorString","exception"]]]]]],[".",[".","output","errors"],"push",[[".","$exception: ","concat",["exception"]]]]]],[["gohome"],["textstreams","xchan"],["=","outext",[".",[".","source","taketext","false"],"trim","false"]],[[">",[".","outext","length"],0],["set.","output",["`","text"],["new",[".","outext","split",["$\n"]]]]]]],"output"]],["set.","penv",["`","unparse"],["function","unparse",["false","options","text","sym","didprop","key"],["=","options",{dictionary:{$wrapMaxCol:240}}],["=","text","$"],["for",["let","lambda",["iter"],["=","iter",["iterate",["symlist",[".","penv","ns"]],["`","sym"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","sym",[".","iter","$value"]],[[["not",["eq","sym",["car","sym"]]],["=","text",[".","text","concat",["sym","$ = ",["car","sym"],"$;;\n\n"]]]]],["=","didprop","false"],["for",["let","lambda",["iter"],["=","iter",["iterate",["@*","sym"],["`","key"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","key",[".","iter","$value"]],[[["!=",[".","key","charAt",[0]],"$."],["=","didprop","true"],["=","text",[".","text","concat",["sym","$@","key","$ = ",["deref",["@","sym"],"key"],"$;;\n"]]]]]]]],[[["identity","didprop"],["=","text",[".","text","concat",["$\n"]]]]],[[["eq",[".",[".",[".","sym","proc"],1],"namespace"],[".","penv","ns"]],["=","text",[".","text","concat",[[".","dialect","print",[[".","sym","proc"],"options"]],"$;\n\n"]]]]]]]],"text"]],["set.","penv",["`","destroy"],["function","destroy","false",["set.","penv",["`","ns"],["delete",[".","penv","ns"]]]]],"penv"]),e._AddPropertyList("LanguagesInit",[["$.lingoInit","true"]]),e._SetBindingList("LanguagesInit",["function","LanguagesInit",["false","manifest"],["=","manifest",["`",["defproc","defprop","DefineLanguage","Registry","ParsEnvironment","LanguagesInit"]]],[".",[".","Naan","module"],"build",[[".","module","id"],"$Languages",["function","lambda",["modobj","compobj"],["set.","compobj",["`","manifest"],"manifest"],["set.",[".","modobj","exports"],["`","DefineLanguage"],"DefineLanguage"],["set.",[".","modobj","exports"],["`","ParsEnvironment"],"ParsEnvironment"],["set.",[".","modobj","exports"],["`","Registry"],["Registry"]]]]]]),e._Execute(["LanguagesInit"]),e._SetBindingList("langParser",["function&","langParser",["source","lang","operators","false","result"],["catch",[["=","langErrors",{array:[]}],["=","result",["langParse1",["tokenread"],0]],[[["==",[".","langErrors","length"],0],["=","result",["langStrip","result","operators"]]]],[[["&&",["==",[".","langErrors","length"],0],"tokenlast",["!=",[".","tokenlast","atom"],"cr"],["not",["atTerminator"]]],["langSyntax","tokenlast","false",{dictionary:{$memo:"$operator missing"}}]]],[["!=",[".","langErrors","length"],0],[".","source","comments","false"],["while","false",[["not",["not",["atTerminator"]]]],["tokenread"]]]],[[["!=",[".","langErrors","length"],0]]],"false"],[["!=",[".","langErrors","length"],0],["list","langErrors"]],["list","false","result"]]),e._SetBindingList("recurParse",["function","recurParse",["text","sloc"],["call",["function&","recurParse1",["source","false","result"],["catch",[["=","result",["langParse1",["tokenread"],0]],[["&&",["==",[".","langErrors","length"],0],"tokenlast",["!=",[".","tokenlast","atom"],"cr"],["not",["atTerminator"]]],["langSyntax","tokenlast","false",{dictionary:{$memo:"$operator missing"}}]]],[[["identity","true"],"false"]],"false"],"result"],["new","textstream","text","sloc"]]]),e._SetBindingList("langParseErrorString",["function","langParseErrorString",["error","false","output"],[[[".","error","memo"],["=","output",[".","error","memo"]]],["=","output","$parse error"]],[[[".","error","at"],["=","output",[".","output","concat",["$ at (",["+",[".",[".","error","at"],0],1],"$, ",["+",[".",[".","error","at"],1],1],"$)"]]]]],[[[".","error","found"],["=","output",[".","output","concat",["$ found ",[".","error","found"]]]]]],[[[".","error","expected"],["=","output",[".","output","concat",["$ expected ",[".","error","expected"]]]]]],[[["||",[".","error","start"],[".","error","startat"]],["=","output",[".","output","concat",["$ starting"]]],[[["&&",[".","error","start"],["!=",[".","error","start"],"$\n"]],["=","output",[".","output","concat",["$ with ",[".","error","start"]]]]]],[[".","error","startat"],["=","output",[".","output","concat",["$ at (",["+",[".",[".","error","startat"],0],1],"$, ",["+",[".",[".","error","startat"],1],1],"$)"]]]]]],[".","output","replace",[["RegExp","$\n","$g"],"$"]]]),e._SetBindingList("tokenread",["function","tokenread","false",["=","tokenlast",[".","source","tokenread","false"]]]),e._SetBindingList("tokenpush",["function","tokenpush",["token"],["=","tokenlast",[".","source","tokenpush",["token"]]]]),e._SetBindingList("tokenmatch",["function","tokenmatch",["pattern","false","result"],["=","result",[".","source","tokenmatch",["pattern"]]],["=","tokenlast",[".","source","tokenlast","false"]],"result"]),e._SetBindingList("tokenpass",["function","tokenpass",["pattern"],["=","tokenlast",[".","source","tokenpass",["pattern"]]]]),e._SetBindingList("passNewline",["function","passNewline",["testeof"],["=","tokenlast",[".","source","tokenpass",["cr","testeof"]]]]),e._SetBindingList("atTerminator",["function","atTerminator","false",["tokenmatch",["`",[";",";;",";>"]]]]),e._SetBindingList("atDelimiter",["function","atDelimiter","false",["tokenmatch",["`",[";",";;",";>",")",",","}","]"]]]]),e._SetBindingList("langPassSeparator",["function","langPassSeparator","false",["=","tokenlast",[".","source","tokenpass",[["list","cr","comma"]]]]]),e._SetBindingList("langAtSeparator",["function","langAtSeparator","false",["or",["==",[".","tokenlast","atom"],"cr"],["==",[".","tokenlast","atom"],"comma"]]]),e._SetBindingList("langExprLoc",["function","langExprLoc",["expr"],[["dictionary","expr"],[".","expr","loc"]],[["atom","expr"],"false"],[["langExprLoc",["car","expr"]]],["langExprLoc",["cdr","expr"]]]),e._SetBindingList("langConsSym",["function","langConsSym",["sym","expr","exlist"],[[["tuple","sym"],["debuglog","$langConsSym warning - non-atomic token","sym"]]],["cons",{dictionary:{$atom:"sym",$loc:["langExprLoc","expr"]}},"exlist"]]),e._SetBindingList("langEnlistSym",["function","langEnlistSym","exlist",[[["tuple",["car","exlist"]],["debuglog","$langEnlistSym warning - non-atomic token",["car","exlist"]]]],["cons",{dictionary:{$atom:["car","exlist"],$loc:["langExprLoc",["second","exlist"]]}},["cddr","exlist"]]]),e._SetBindingList("langSyntax",["function","langSyntax",["expr","startoken","dict"],["=","dict",["new","dict"]],[[["identity","expr"],["set.","dict",["`","at"],["langExprLoc","expr"]],[["dictionary","expr"],["set.","dict",["`","found"],[".","expr","atom"]]]]],[[["identity","startoken"],["set.","dict",["`","start"],[".","startoken","atom"]],["set.","dict",["`","startat"],[".","startoken","loc"]]]],[".","langErrors","push",["dict"]],"false"]),e._SetBindingList("langDebuglog",["function","langDebuglog","args",["function","convlist",["expr"],[["defined","expr","atom"],[".","expr","atom"]],[["atom","expr"],"expr"],["cons",["convlist",["car","expr"]],["convlist",["cdr","expr"]]]],["call",["function","lambda",["args","false","arg","exlist"],["loop","false",[["empty","args"]],["=","arg",["pop","args"]],[[["eq","arg","`"],["push",["pop","args"],"exlist"]],["push",["convlist","arg"],"exlist"]]],["apply",[".",[".","Naan","debug"],"debuglog"],["reverse","exlist"]]],"args"]]),e._SetBindingList("langCleanup",["function","langCleanup",["tree","false","blocknest","inloop"],["function","debugCleanup","args",[["identity","false"],["apply","langDebuglog","args"]]],["function","inbody",["xbody"],[["atom","xbody"],"xbody"],["debugCleanup","$inbody:","xbody"],[[["and","inloop",["<=","blocknest",1]]],[["and",["not",["atom",["car","xbody"]]],["not",["atom",["caar","xbody"]]],["not",["atom",["caaar","xbody"]]]],["debugCleanup","$testing hoist in body:","xbody"],["=","xbody",["hoist","xbody"]]]],["cons",["inbodyitem",["car","xbody"]],["inbody",["cdr","xbody"]]]],["function","inbodyitem",["expr","false","sym"],["debugCleanup","$inbodyitem:","expr"],[["atom","expr"],"expr"],["=","sym",["car","expr"]],[["atom","sym"],["incall","expr"]],[["atom",["car","sym"]],["inwhen","expr"]],["inblock","expr","blocknest"]],["function","ineval",["expr"],[["atom","expr"],"expr"],[["atom",["car","expr"]],["incall","expr"]],["cons",["ineval",["car","expr"]],["inevalist",["cdr","expr"]]]],["function","inevalist",["expr"],[["atom","expr"],"expr"],["cons",["ineval",["car","expr"]],["inevalist",["cdr","expr"]]]],["function","inquote",["expr"],[["atom","expr"],"expr"],["cons",["inquote",["car","expr"]],["inquote",["cdr","expr"]]]],["function&","inloop",["pbody","blocknest","inloop"],["debugCleanup","$inloop:","pbody","blocknest","inloop"],["=","blocknest",0],["=","inloop","true"],["cons",["car","pbody"],["second","pbody"],["inbody",["cddr","pbody"]]]],["function&","inproc",["fbind","blocknest"],["debugCleanup","$inproc:","fbind","blocknest"],["=","blocknest",0],["cons",["car","fbind"],["cons",["second","fbind"],["cons",["inquote",["third","fbind"]],["inbody",["cdddr","fbind"]]]]]],["function","inconditem",["expr"],["debugCleanup","$inconditem:","expr"],[["atom","expr"],"expr"],["cons",["inwhen",["car","expr"]],["inconditem",["cdr","expr"]]]],["function&","incond",["expr","blocknest"],["debugCleanup","$incond:","expr"],["cons",["car","expr"],["inconditem",["cdr","expr"]]]],["function","incatch",["expr"],["debugCleanup","$incatch:","expr"],["list",["car","expr"],["inbody",["second","expr"]],["inconditem",["third","expr"]],["inbody",[".","expr",3]]]],["function","incall",["expr","false","sym"],["debugCleanup","$incall:","expr"],["=","sym",[".",["car","expr"],"atom"]],[["==","sym",["`","loop"]],["inloop","expr"]],[["member","sym",["`",["function","function&","macro","closure","let","let&"]]],["inproc","expr"]],[["==","sym",["`","cond"]],["incond","expr",["+","blocknest",2]]],[["==","sym",["`","body"]],["inbody","expr"]],[["==","sym",["`","catch"]],["incatch","expr"]],[["==","sym","`"],["debugCleanup","$inquote:","expr"],["inquote","expr"]],["cons",["car","expr"],["inevalist",["cdr","expr"]]]],["function","inwhen",["expr","false","nexpr"],["debugCleanup","$inwhen:","expr"],["=","nexpr",["cdr","expr"]],[["&&",["not",["cdr","nexpr"]],["not",["or",["atom","nexpr"],["atom",["car","nexpr"]],["atom",["caar","nexpr"]],["atom",["caaar","nexpr"]]]]],["debugCleanup","$inwhen block","blocknest"],["=","nexpr",["hoist","nexpr"]],["cons",["incall",["car","expr"]],["inblock","nexpr","blocknest"]]],["cons",["incall",["car","expr"]],["hoist",["delbreak",["cdr","expr"],"blocknest"]]]],["function&","delbreak",["expr","blocknest"],["debugCleanup","$delbreak:","expr","blocknest"],[["atom","expr"],"expr"],[[["&&",["tuple",["car","expr"]],["tuple",["caar","expr"]],["tuple",["caaar","expr"]]],["preadjust","blocknest","+",1],["debugCleanup","$delbreak block:","blocknest"]]],["=","expr",["hoist","expr"]],[["and",["==",[".",["caar","expr"],"atom"],["`","break"]],["not",["cdr",["car","expr"]]],["<=","blocknest",1]],["debugCleanup","$did delbreak from:","expr"],["=","delbreak","true"],"false"],["cons",["inbodyitem",["car","expr"]],["delbreak",["cdr","expr"],"blocknest"]]],["function&","inblock",["expr","blocknest","false","nexpr","delbreak"],["debugCleanup","$inblock:","expr","blocknest"],[[["cdr","expr"],["=","blocknest",["+","blocknest",2]]],["=","blocknest",["+","blocknest",1]]],["=","nexpr",["inbodyitem",["car","expr"]]],[["identity","delbreak"],["debugCleanup","$did delbreak below:","nexpr"],"nexpr"],["cons","nexpr",["inbody",["cdr","expr"]]]],["function","hoist",["expr"],[["or",["cdr","expr"],["atom","expr"],["atom",["car","expr"]],["atom",["caar","expr"]],["atom",["caaar","expr"]]],"expr"],["debugCleanup","$hoisted:",["car","expr"]],["hoist",["car","expr"]]],["debugCleanup","$\n### in tree:","tree"],["=","blocknest",0],["ineval","tree"]]),e._SetBindingList("langErrorCheck",["function","langErrorCheck",["tree","false","xproc","proc_parent","xloop","loop_parent","xbody","blocknest"],["global","langDebuglog"],["function","debugErrorCheck","args",[["identity","false"],["apply","langDebuglog","args"]]],["function&","inbody",["lbody","xbody","false","item","more"],[["atom","lbody"],"lbody"],["debugErrorCheck","$inbody:","lbody"],["=","xbody",{dictionary:{$live:"true"}}],["=","item",["car","lbody"]],["=","more",["cdr","lbody"]],[[["atom","item"],[["&&","more",["not",["member",[".",["caar","more"],"atom"],["`",["break","return"]]]]],["langSyntax","item","false",{dictionary:{$memo:"$ignored atom in body"}}]],[["&&",["symbol",[".","item","atom"]],["not",["findLocalSymbol",[".","item","atom"]]],[".","xproc","globals"],["not",[".","xproc","dynbind"]],["==",[".",[".","item","atom"],"namespace"],[".",["nsactive"],0]]],["set[",[".","xproc","undeclared"],[".","item","atom"],"item"]]]],["inbodyitem","item"],["inbody","more","xbody"]],["function","inbodyitem",["expr","false","sym"],["debugErrorCheck","$inbodyitem:","expr"],[["not",[".","xbody","live"]],[[["not",[".","xbody","dead"]],["langSyntax","expr","false",{dictionary:{$memo:"$dead code"}}]]],["set.","xbody",["`","dead"],"true"],"false"],[["atom","expr"],"expr"],["=","sym",["car","expr"]],[["atom","sym"],["incall","expr"]],[["atom",["car","sym"]],["inwhen","expr"]],["inblock","expr","blocknest"]],["function","ineval",["expr"],["debugErrorCheck","$ineval:","expr"],[["atom","expr"],"expr"],[["atom",["car","expr"]],["incall","expr"]],["inevalist","expr"]],["function","inevalist",["expr"],["debugErrorCheck","$inevalist:","expr"],[["atom","expr"],"expr"],["ineval",["car","expr"]],["inevalist",["cdr","expr"]]],["function","inquote",["expr","inside","false","item"],["debugErrorCheck","$inquote:","expr","inside"],[["atom","expr"],"expr"],["=","item",["car","expr"]],[[["&&","inside",["symbol",[".","item","atom"]],["not",["findLocalSymbol",[".","item","atom"]]],[".","xproc","globals"],["not",[".","xproc","dynbind"]],["==",[".",[".","item","atom"],"namespace"],[".",["nsactive"],0]]],["set[",[".","xproc","undeclared"],[".","item","atom"],"item"]]],["inquote","item","true"],["inquote",["cdr","expr"],"inside"]],["function","inargs",["expr","proc","narg","false","item","quoted"],["debugErrorCheck","$inargs:","expr"],[["atom","expr"],"expr"],["=","item",["car","expr"]],["=","quoted",["quotedArg","proc","narg"]],[[["tuple","item"],[["identity","quoted"],["=","item",["inquote","item","true"]]],["=","item",["incall","item"]]],[["&&",["symbol",[".","item","atom"]],["not",["findLocalSymbol",[".","item","atom"]]],[".","xproc","globals"],["not",[".","xproc","dynbind"]],["not","quoted"],["==",[".",[".","item","atom"],"namespace"],[".",["nsactive"],0]]],["set[",[".","xproc","undeclared"],[".","item","atom"],"item"]]],["inargs",["cdr","expr"],"proc",["+","narg",1]]],["function","inparms",["expr","false","parm","sym"],["debugErrorCheck","$inparms:","expr"],[["atom","expr"],["=","sym",[".","expr","atom"]],[["identity","sym"],[["not",["symbol","sym"]],["langSyntax","parm","false",{dictionary:{$memo:"$invalid parameter"}}]],["set[",[".","xproc","parameters"],"sym","expr"],[[".","xproc","dynbind"],["findLocalSymbol","sym",[".","xproc","parent"]]]]],["=","parm",["car","expr"]],["=","sym",[".","parm","atom"]],[[["||",["not",["symbol","sym"]],["&&",["not","sym"],["!==","sym","false"]]],["langSyntax","parm","false",{dictionary:{$memo:"$invalid parameter"}}]],[["===","sym","false"],[[".","xproc","locals"],["langSyntax","parm","false",{dictionary:{$memo:"$duplicate `local"}}]],[["atom",["cdr","expr"]],["langSyntax","parm","false",{dictionary:{$memo:"$invalid `local"}}]],["set.","xproc",["`","locals"],{dictionary:{}}],["set.","xproc",["`","unused"],{dictionary:{}}]],[["deref",[".","xproc","parameters"],"sym"],["langSyntax","parm","false",{dictionary:{$memo:"$duplicate parameter"}}]],["set[",[".","xproc","parameters"],"sym","parm"],[[[".","xproc","locals"],["set[",[".","xproc","unused"],"sym","parm"],["set[",[".","xproc","locals"],"sym","parm"]]],[[".","xproc","dynbind"],["findLocalSymbol","sym",[".","xproc","parent"]]]],["inparms",["cdr","expr"]]],["function&","inloop",["pbody","loop_parent","false","blocknest","xloop"],["debugErrorCheck","$inloop:","pbody"],["=","xloop",{dictionary:{$tag:[".",["second","pbody"],"atom"]}}],[[["identity","loop_parent"],["set.","xloop",["`","parent"],"loop_parent"]]],["=","loop_parent","xloop"],["=","blocknest",0],["inbody",["cddr","pbody"]]],["function&","inproc",["fbind","proc_parent","false","blocknest","xproc","sym","item"],["debugErrorCheck","$inproc:","fbind"],["=","xproc",{dictionary:{$ftype:["car","fbind"],$fname:["second","fbind"],$parms:["third","fbind"],$body:["cdddr","fbind"],$procNames:{dictionary:{}},$parameters:{dictionary:{}},$undeclared:{dictionary:{}},$dynbind:["member",[".",["car","fbind"],"atom"],["`",["function&","let&"]]]}}],[[["identity","proc_parent"],["set.","xproc",["`","parent"],"proc_parent"],[[[".","proc_parent","globals"],["set.","xproc",["`","globals"],{dictionary:{}}]]],[[[".","proc_parent","root"],["set.","xproc",["`","root"],[".","proc_parent","root"]]],["set.","xproc",["`","root"],"proc_parent"]],[["&&",["!=",[".",[".","xproc","fname"],"atom"],["`","lambda"]],["deref",[".","proc_parent","procNames"],[".",[".","xproc","fname"],"atom"]]],["langSyntax",[".","xproc","fname"],"false",{dictionary:{$memo:"$duplicate procedure name"}}]],["set[",[".","proc_parent","procNames"],[".",[".","xproc","fname"],"atom"],[".","xproc","fname"]]]],["=","proc_parent","xproc"],["=","blocknest",0],["inparms",[".","xproc","parms"]],["inbody",[".","xproc","body"]],[[["not",[".","xproc","dynbind"]],["for",["let","lambda",["iter"],["=","iter",["iterate",[".","xproc","unused"],["`",["sym","item"]]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=",["sym","item"],[".","iter","$value"]],["langSyntax","item","false",{dictionary:{$memo:"$unused local variable"}}]]]]]],["for",["let","lambda",["iter"],["=","iter",["iterate",[".","xproc","undeclared"],["`",["sym","item"]]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=",["sym","item"],[".","iter","$value"]],[[["not",["deref",[".","xproc","procNames"],"sym"]],[["&&",[".","xproc","parent"],[".","xproc","globals"]],["set[",[".",[".","xproc","parent"],"undeclared"],"sym","item"]],["langSyntax","item","false",{dictionary:{$memo:"$undeclared global"}}]]]]]]],["function","inconditem",["expr"],["debugErrorCheck","$inconditem:","expr"],[["atom","expr"],"expr"],["inwhen",["car","expr"]],["inconditem",["cdr","expr"]]],["function&","incond",["expr","blocknest"],["debugErrorCheck","$incond:","expr"],["inconditem","expr"]],["function","incatch",["expr"],["debugErrorCheck","$incatch:","expr"],["list",["car","expr"],["inbody",["second","expr"]],["incond",["third","expr"]],["inbody",[".","expr",3]]]],["function","incall",["expr","false","sym","loopt","item"],["debugErrorCheck","$incall:","expr"],["=","sym",[".",["car","expr"],"atom"]],[["==",[".","sym","proc"],[".",["`","loop"],"proc"]],["inloop","expr","loop_parent"]],[["member","sym",["`",["function","function&","macro","closure","let","let&"]]],["inproc","expr","proc_parent"]],[["==","sym",["`","cond"]],["incond","expr",["+","blocknest",2]]],[["==","sym",["`","body"]],["inbody",["cdr","expr"]]],[["==","sym",["`","catch"]],["incatch","expr"]],[["==","sym","`"],["inquote","expr"]],[["==","sym",["`","global"]],[["not","xproc"],["langSyntax","false","false",{dictionary:{$at:["langExprLoc",["car","expr"]],$memo:"$global forbidden outside of a procedure"}}]],[[".","xproc","dynbind"],["langSyntax","false","false",{dictionary:{$at:["langExprLoc",["car","expr"]],$memo:"$global forbidden in function& and let&"}}]],[[["not",[".","xproc","globals"]],["set.","xproc",["`","globals"],{dictionary:{}}]]],["=","loopt",["cdr","expr"]],["while","false",[["not",["not",["empty","loopt"]]]],["=","item",["pop","loopt"]],[[["not",["symbol",[".","item","atom"]]],["langSyntax","item","false",{dictionary:{$memo:"$invalid global symbol"}}]],["set[",[".","xproc","globals"],[".","item","atom"],"item"]]]],[["||",["==","sym",["`","break"]],["==","sym",["`","continue"]]],["set.","xbody",["`","live"],"false"],[["not","xloop"],["langSyntax",["car","expr"],"false",{dictionary:{$memo:["strcat","sym","$ without loop"]}}]],["=","sym",[".",["cadr","expr"],"atom"]],[["identity","sym"],["=","loopt","xloop"],["while","false",[["not","loopt"]],[[["==","sym",[".","loopt","tag"]],["break"]]],["=","loopt",[".","loopt","parent"]]],[["not","loopt"],["langSyntax",["cadr","expr"],"false",{dictionary:{$memo:"$enclosing loop tag not found"}}]]]],[[["||",["==","sym",["`","return"]],["==","sym",["`","throw"]]],["set.","xbody",["`","live"],"false"]],[["&&",["not","sym"],["tuple",["car","expr"]]],["incall",["car","expr"]],["=","expr",["cdr","expr"]]]],["inargs",["cdr","expr"],["car","expr"],0]],["function","inwhen",["expr","false","nexpr"],["debugErrorCheck","$inwhen:","expr"],["=","nexpr",["cdr","expr"]],[["&&",["not",["cdr","nexpr"]],["not",["or",["atom","nexpr"],["atom",["car","nexpr"]],["atom",["caar","nexpr"]],["atom",["caaar","nexpr"]]]]],["debugErrorCheck","$in whenblock","blocknest"],["incall",["car","expr"]],["inblock","nexpr","blocknest"]],["incall",["car","expr"]],["inbody",["cdr","expr"]]],["function&","inblock",["expr","blocknest"],["debugErrorCheck","$inblock:","expr","blocknest"],[[["cdr","expr"],["=","blocknest",["+","blocknest",2]]],["=","blocknest",["+","blocknest",1]]],["inbodyitem",["car","expr"]],["inbody",["cdr","expr"]]],["function","findLocalSymbol",["sym","start","false","proct"],[[["==","sym",["`","Dialect"]],["return","true"]]],[[["identity","start"],["=","proct","start"]],["=","proct","xproc"]],["while","false",[["not","proct"]],[[["deref",[".","proct","procNames"],"sym"],["break"]]],[[["deref",[".","proct","parameters"],"sym"],["set[",[".","proct","unused"],"sym","undefined"],["break"]]],[[["deref",[".","proct","globals"],"sym"],["break"]]],["=","proct",[".","proct","parent"]]],["not",["not","proct"]]],["function","quotedArg",["proc","narg"],[[["&&",["===",[".",[".","proc","atom"],"proc"],[".",["`","."],"proc"]],["==","narg",1]],["return","true"]]],[[["&&",["===",[".",[".","proc","atom"],"proc"],[".",["`","="],"proc"]],["==","narg",0]],["return","true"]]],"false"],["debugErrorCheck","$\n### langErrorCheck tree:","tree"],["=","blocknest",0],["ineval","tree"],"tree"]),e._SetBindingList("langCorrelateComments",["function","langCorrelateComments",["locmap","false","comments","locations","locdex","loc"],["function","tupleCompare",["a","b"],[["<",[".","a",0],[".","b",0]],-1],[[">",[".","a",0],[".","b",0]],1],[["<",[".","a",1],[".","b",1]],-1],[[">",[".","a",1],[".","b",1]],1],0],["=","comments",{array:[]}],["for",["let","lambda",["iter"],["=","iter",["iterate",["reverse",[".","source","comments","false"]],["`","acom"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","acom",[".","iter","$value"]],[".","comments","push",[["append",[".","acom","loc"],[".","acom","text"]]]]]]],[".","comments","sort",["tupleSort"]],["=","locations",{array:[]}],["=","locdex",0],["for",["let","lambda",["iter"],["=","iter",["iterate","locmap",["`","loc"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","loc",[".","iter","$value"]],[[["identity","loc"],[".","locations","push",[["list",[".","loc",0],[".","loc",1],"locdex"]]]]],["preadjust","locdex","+",1]]]],[".","locations","sort",["tupleSort"]],["call",["let","lambda",["false","acom","curloc","output","nextdex","nextloc"],["=","locdex",0],["=","curloc",["deref","locations",["postadjust","locdex","+",1]]],["=","output",{array:[]}],["for",["let","lambda",["iter"],["=","iter",["iterate","comments",["`","acom"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","acom",[".","iter","$value"]],["while","false",[["not",[">",[".","acom",0],[".","curloc",0]]]],["=","curloc",["deref","locations",["postadjust","locdex","+",1]]]],[[["not","curloc"],[".","output","push",[["list","false","false",[".","acom",2]]]]],[["<",[".","acom",0],[".","curloc",0]],[".","output","push",[["list",[".","curloc",2],-1,[".","acom",2]]]]],["=","nextdex","locdex"],["=","nextloc","curloc"],["while","false",[["not",["&&",["==",[".","acom",0],[".","nextloc",0]],[">",[".","acom",1],[".","nextloc",1]]]]],["=","nextloc",["deref","locations",["postadjust","nextdex","+",1]]]],[["==",[".","acom",0],[".","nextloc",0]],[".","output","push",[["list",[".","nextloc",2],0,[".","acom",2]]]],["=","locdex","nextdex"],["=","curloc","nextloc"]],[".","output","push",[["list",[".","curloc",2],1,[".","acom",2]]]]]]]],"output"]]]),e._SetBindingList("langStrip",["function","langStrip",["tree","operators","valproc"],["=","tree",["langCleanup","tree"]],["langErrorCheck","tree"],["langStripLoc","tree","operators","valproc"]]),e._SetBindingList("langStripLoc",["function","langStripLoc",["tree","operators","valproc","false","procnest","fname","locmap","nodecount","curns","nscurrent","nscore","sourcemap"],["=","curns",["nsactive"]],["=","nscurrent",[".","curns",0]],["=","nscore",[".",["nsactive","true"],1]],["function","topmap",["expr"],["function","remap",["expr"],[["dictionary","expr"],["preadjust","nodecount","+",1],[".","locmap","push",[[".","expr","loc"]]]],[["atom","expr"],["preadjust","nodecount","+",1],["debuglog","$langStripLoc: found atom:","expr"],[".","locmap","push",["false"]]],["remap",["car","expr"]],[["cdr","expr"],["remap",["cdr","expr"]]]],[["atom","expr"],"false"],[["==",[".",["car","expr"],"atom"],"`"],"true"],[["member",[".",["car","expr"],"atom"],["`",["function","function&","macro","closure","let","let&"]]],["remap","expr"],"true"],[["topmap",["car","expr"]],"true"],["topmap",["cdr","expr"]]],["function","moveatom",["item","false","sym"],[["not",["symbol",[".","item","atom"]]],[".","item","atom"]],[["&&",["interned",[".","item","atom"]],["dictionary","operators"],["deref","operators",[".","item","atom"]]]],[["&&",[".",[".","item","atom"],"proc"],["!=",[".",[".","item","atom"],"namespace"],"nscurrent"],["!=",[".",[".","item","atom"],"namespace"],"nscore"]],["=","sym",["interned",[".",[".","item","atom"],"tostring"]]],[["&&",["eq",[".","sym","namespace"],"nscurrent"],[".","sym","proc"]],"sym"],[".","item","atom"]],[".","item","atom"]],["function","inbody",["xbody","false","sym"],[["atom","xbody"],["moveatom","xbody"]],["=","sym",[".",["car","xbody"],"atom"]],[["==","sym","`"],["inquote","xbody"]],[["member","sym",["`",["function","function&","macro","closure","let","let&"]]],["inproc","xbody","procnest"]],["split","xbody"]],["function","inquote",["expr"],[["atom","expr"],["moveatom","expr"]],["cons",["inquote",["car","expr"]],["inquote",["cdr","expr"]]]],["function","split",["expr"],[["atom","expr"],["moveatom","expr"]],["cons",["inbody",["car","expr"]],["split",["cdr","expr"]]]],["function&","inproc",["pbody","procnest","false","wasnest","fbind"],[[["=","wasnest","procnest"]],["=","procnest","true"]],["=","fbind",["cons",["split",["car","pbody"]],["split",["second","pbody"]],["split",["third","pbody"]],["split",["cdddr","pbody"]]]],[["identity","wasnest"],"fbind"],["=","fname",["second","fbind"]],[["and",["&&",["not","valproc"],"fname"],["not",["lambda","fname"]],["not",["eq",["car","fbind"],["`","let"]]]],["cons",["`","defproc"],"fbind"]],["enclose","fbind"]],["function","lmCompress",["locmap","false","entry","lastrow","lastcol","nextrow","nextcol"],["=","output",{array:[]}],["for",["let","lambda",["iter"],["=","iter",["iterate","locmap",["`","entry"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","entry",[".","iter","$value"]],["=","nextrow",[".","entry",0]],["=","nextcol",[".","entry",1]],[[["not","entry"],[".","output","push",["false"]]],[["not","lastrow"],[".","output","push",["entry"]]],[["==","lastrow","nextrow"],[".","output","push",[["-","nextcol","lastcol"]]]],[".","output","push",[["list",["-","nextrow","lastrow"],"nextcol"]]]],["=","lastrow","nextrow"],["=","lastcol","nextcol"]]]],"output"],["=","locmap",{array:[]}],["=","nodecount",0],["topmap","tree"],["=","tree",["inbody","tree"]],[[["and","fname",[">",["length","locmap"],1]],["=","comments",["langCorrelateComments","locmap"]],["=","sourcemap",{dictionary:{$count:"nodecount",$comments:"comments"}}],[[["identity","false"],["set.","sourcemap",["`","map"],["lmCompress","locmap"]]]],["put","fname",["`","\\.sourcemap"],"sourcemap"]]],"tree"]),e._SetBindingList("langParse1",["function&","langParse1",["ltoken","riplop","false","rtoken"],["function&","naryCoalesce",["optoken","lexpr","rexpr","false","opsym"],["=","opsym",[".","optoken","atom"]],[["and",["defined","optoken","atom"],["symbol","opsym"],["deref",[".","lang","naryop"],"opsym"]],[["and",["tuple","lexpr"],["==","opsym",[".",["car","lexpr"],"atom"]]],[["and",["tuple","rexpr"],["==","opsym",[".",["car","rexpr"],"atom"]]],["cons","optoken",["append",["cdr","lexpr"],["cdr","rexpr"]]]],["cons","optoken",["append",["cdr","lexpr"],["list","rexpr"]]]],[["and",["tuple","rexpr"],["==","opsym",[".",["car","rexpr"],"atom"]]],["cons","optoken",["append",["list","lexpr"],["cdr","rexpr"]]]],["list","optoken","lexpr","rexpr"]],["list","optoken","lexpr","rexpr"]],["function&","leprop",["false","nlToken"],[["==",[".","tokenlast","atom"],"cr"],["=","nlToken","tokenlast"],[[["not",["passNewline","true"]],["return","false"]]],[["and",["not",["string",[".","tokenlast","atom"]]],["deref",[".","lang","left"],[".","tokenlast","atom"]]],[["deref",[".","lang","prefix"],[".","tokenlast","atom"]],["langSyntax","tokenlast","false",{dictionary:{$memo:"$ambiguous newline (use \\ or ,)"}}]],["deref",[".","lang","left"],[".","tokenlast","atom"]]],["tokenpush","nlToken"],"false"],["deref",[".","lang","left"],[".","tokenlast","atom"]]],["=","ltoken",["passNewline"]],[["atDelimiter"],["langSyntax","ltoken","false",{dictionary:{$memo:"$unexpected delimiter"}}]],["=","rtoken",["tokenread"]],[[["string",[".","ltoken","atom"]]],[["deref",[".","lang","prefix"],[".","ltoken","atom"]],["=","ltoken",["eval",["deref",[".","lang","prefix"],[".","ltoken","atom"]]]]],[["deref",[".","lang","left"],[".","ltoken","atom"]],["langSyntax","ltoken","false",{dictionary:{$memo:"$not a prefix operator"}}]],[["deref",[".","lang","right"],[".","ltoken","atom"]],["=","ltoken",["list","ltoken",["langParse1","rtoken",["deref",[".","lang","right"],[".","ltoken","atom"]]]]]]],["loop","false",["=","rtoken","tokenlast"],[[["string",[".","ltoken","atom"]],[[["tokenmatch","string"],["=","ltoken",{dictionary:{$atom:["strcat",[".","ltoken","atom"],[".","tokenlast","atom"]],$loc:[".","ltoken","loc"]}}],["tokenread"],["continue"]]],[[".","lang","string"],["=","ltoken",["eval",[".","lang","string"]]]]]],[[["and",["&&",["not",["string",[".","rtoken","atom"]]],["<","riplop",["deref",[".","lang","postleft"],[".","rtoken","atom"]]]],["deref",[".","lang","postfix"],[".","rtoken","atom"]]],["=","ltoken",["eval",["deref",[".","lang","postfix"],[".","rtoken","atom"]]]],["=","rtoken",["tokenread"]]]],[["not",["<","riplop",["leprop"]]],"ltoken"],["=","rtoken","tokenlast"],["tokenread"],[[["string",[".","rtoken","atom"]]],[["deref",[".","lang","infix"],[".","rtoken","atom"]],["=","ltoken",["eval",["deref",[".","lang","infix"],[".","rtoken","atom"]]]]],[["deref",[".","lang","right"],[".","rtoken","atom"]],["=","ltoken",["naryCoalesce","rtoken","ltoken",["langParse1","tokenlast",["deref",[".","lang","right"],[".","rtoken","atom"]]]]]],["=","ltoken",["list","rtoken","ltoken"]]]]]),e._SetBindingList("langParseTo",["function&","langParseTo",["delim","sloc","doval","false","inerrors","expr"],[[["not","sloc"],["=","sloc","tokenlast"]]],["=","lptFound","false"],["langPassSeparator"],["=","inerrors",[".","langErrors","length"]],["loop","false",[["tokenmatch","delim"],["=","lptFound","tokenlast"],["tokenread"],["reverse","expr"]],[[["atDelimiter"],["langSyntax","tokenlast","sloc",{dictionary:{$expected:"delim",$memo:"$delimiter not found"}}],[["atTerminator"],["break"]]],[[["identity","doval"],["push",["langValueParse"],"expr"]],["push",["langParse1","tokenlast",0],"expr"]],[[["tokenmatch","delim"],["=","lptFound","tokenlast"],["tokenread"],["reverse","expr"],["break"]]],[["&&",["not",["langAtSeparator","delim"]],["==","inerrors",[".","langErrors","length"]]],["langSyntax","tokenlast","sloc",{dictionary:{$expected:"delim",$memo:"$mismatched delimiter"}}],[["atTerminator"],["break"]]]],["tokenread"]]]),e._SetBindingList("langParseToList",["function&","langParseToList",["delim","sloc","false","expr"],["=","expr",["langParseTo","delim","sloc"]],[[["not","expr"],["=","expr",{dictionary:{$atom:"false",$loc:["langExprLoc","sloc"]}}]]],"expr"]),e._SetBindingList("langReadExpr",["function&","langReadExpr",["false","expr"],["=","expr",["passNewline"]],[["tokenmatch","rpar"],["langSyntax","tokenlast","false",{dictionary:{$memo:"$mismatched parens"}}]],[["tokenmatch","quote"],["=","expr",["tokenread"]],["tokenread"],"expr"],[["tokenmatch","{"],["tokenread"],["langBraceParse","false","expr"]],[["tokenmatch","["],["tokenread"],["langBracketParse","false","false","expr"]],[["not",["tokenmatch","lpar"]],["tokenread"],"expr"],["tokenread"],["=","expr","false"],["loop","false",["passNewline"],[[["tokenmatch","comma"],["tokenread"],[["||",["not","expr"],["tokenmatch",["list","rpar","comma"]]],["langSyntax","tokenlast","false",{dictionary:{$memo:"$extra comma"}}]]]],[["tokenmatch","rpar"],["tokenread"],["reverse","expr"]],["push",["langReadExpr"],"expr"],[[["tokenmatch","period"],["tokenread"],["=","expr",["reverse",["cdr","expr"],["cons",["car","expr"],["langReadExpr"]]]],[[["tokenmatch","rpar"],["tokenread"],"expr"],["langSyntax","tokenlast","false",{dictionary:{$memo:"$invalid dotted pair"}}],"false"],["break"]]]]]),e._SetBindingList("langTemplateStringParse",["function&","langTemplateStringParse",["strtoken","false","sloc","rxTS","terms","found","exlist","item","add"],[[["<",[".",[".","strtoken","atom"],"indexOf",[["`","\\${"]]],0],["return","strtoken"]]],["=","sloc",["langExprLoc","strtoken"]],["=","rxTS",["RegExp","$((?:[^$]|[$](?![{$]))*)([$]+[{].+?[}])?","$g"]],["=","rxT",["RegExp","$[$]+[{](.+?)[}]"]],["=","terms",{array:[]}],["loop","false",["=","found",[".","rxTS","exec",[[".","strtoken","atom"]]]],[["||",["not","found"],["==",[".","found",0],"$"]]],[[[".","found",1],[".","terms","push",[[".","found",1]]]]],[[[".","found",2],[".","terms","push",[[".","found",2]]]]]],["=","exlist",{array:[]}],["for",["let","lambda",["iter"],["=","iter",["iterate","terms",["`","item"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","item",[".","iter","$value"]],["=","found",[".","rxT","exec",["item"]]],[[[".","item","startsWith",["$$$"]],[".","exlist","push",[{dictionary:{$atom:[".","item","slice",[1]],$loc:"sloc"}}]]],[[".","found",1],[".","exlist","push",[["recurParse",[".",[".","found",1],"concat",["$;"]],["list",[".","sloc",0],["+",[".","sloc",1],2]]]]]],[[">",[".","item","length"],0],[".","exlist","push",[{dictionary:{$atom:"item",$loc:"sloc"}}]]]],["=","sloc",["list",[".","sloc",0],["+",[".","sloc",1],[".","item","length"]]]]]]],["langConsSym",["`","strcat"],"strtoken",[".","exlist","totuple"]]]),e._SetBindingList("langBraceParse",["function&","langBraceParse",["doeval","sloc","false","obj","expr","value","exlist"],[[["not","sloc"],["=","sloc","tokenlast"]]],["=","obj",{dictionary:{}}],["loop","false",["passNewline"],[["tokenmatch",["`","}"]],["tokenread"],["=","expr",["setobj","exlist",["new","dictionary"]]]],[["atDelimiter"],["langSyntax","tokenlast","sloc",{dictionary:{$expected:"$}",$memo:"$delimiter not found"}}]],["=","expr","tokenlast"],[["deref","obj",[".","expr","atom"]],["langSyntax","expr","false",{dictionary:{$memo:"$duplicate key in dictionary",$found:[".","expr","atom"]}}]],["tokenread"],["passNewline"],[[["==",[".","expr","atom"],"`"],["=","expr","tokenlast"],["tokenread"],["passNewline"]]],[["not",["tokenmatch",["`",":"]]],["langSyntax","tokenlast","false",{dictionary:{$memo:"$missing : in dictionary"}}]],["tokenread"],["passNewline"],["=","value",["langValueParse","doeval"]],["set[","obj",[".","expr","atom"],"value"],[["tokenmatch",["`","}"]],["tokenread"]],[["not",["langAtSeparator"]],["langSyntax","tokenlast","sloc",{dictionary:{$expected:"$, or }",$memo:"$malformed dictionary entry"}}]],["tokenread"]],{dictionary:{$atom:"obj",$loc:["langExprLoc","sloc"]}}]),e._SetBindingList("langBracketParse",["function&","langBracketParse",["doeval","ltoken","sloc","false","exlist"],[[["not","sloc"],["=","sloc","tokenlast"]]],["=","exlist",["langParseTo",["`","]"],"sloc",["not","ltoken"]]],[["identity","ltoken"],[["atom",["cdr","exlist"]],["langEnlistSym","deref","sloc","ltoken",["car","exlist"]]],["langEnlistSym","dereflist","sloc","ltoken","exlist"]],[[["&&","doeval",["==",[".","langErrors","length"],0]],["=","exlist",["cdr",["eval",["cons","false","exlist"]]]]]],{dictionary:{$atom:["new","array","exlist"],$loc:[".","sloc","loc"]}}]),e._SetBindingList("langValueParse",["function","langValueParse",["doeval","false","value"],["=","value",["langParse1","tokenlast",0]],[[["==",[".","langErrors","length"],0],["=","value",["langStrip","value","operators","true"]],[["identity","doeval"],["=","value",["eval","value"]]]]],"value"]),e._SetBindingList("langGenIterate",["function","langGenIterate",["calltok","tagtok","varex","target","xbody","false","sloc","forsym","itersym","bodyloc","iterlist"],["=","sloc",[".","calltok","loc"]],["=","forsym",["unintern",["`","lambda"]]],["=","itersym",["unintern",["`","iter"]]],["=","bodyloc",["langExprLoc","xbody"]],["=","iterlist",["langEnlistSym","itersym","sloc"]],[[["&&",["atom","varex"],["not",["&&",["defined","varex","atom"],["symbol",[".","varex","atom"]],[".","varex","atom"]]]],["return",["langSyntax","varex","false",{dictionary:{$memo:"$invalid iteration variable",$found:[".","varex","atom"]}}]]]],["langConsSym",[".","calltok","atom"],"sloc",["cons",["langEnlistSym",["`","let"],"sloc",{dictionary:{$atom:"forsym",$loc:["langExprLoc","sloc"]}},"iterlist",["langEnlistSym",["`","="],"varex",{dictionary:{$atom:"itersym",$loc:["langExprLoc","varex"]}},["langEnlistSym",["`","iterate"],"varex","target",["langEnlistSym","`","varex","varex"]]],["langConsSym",["`","loop"],"xbody",["cons","tagtok",["list",["langEnlistSym",["`","."],"xbody",{dictionary:{$atom:"itersym",$loc:"bodyloc"}},{dictionary:{$atom:"$next",$loc:"bodyloc"}},"iterlist"],["langEnlistSym",["`","."],"xbody",{dictionary:{$atom:"itersym",$loc:"bodyloc"}},{dictionary:{$atom:"$final",$loc:"bodyloc"}},"iterlist"]],["langEnlistSym",["`","="],"xbody","varex",["langEnlistSym",["`","."],"xbody",{dictionary:{$atom:"itersym",$loc:"bodyloc"}},{dictionary:{$atom:"$value",$loc:"bodyloc"}}]],"xbody"]]]]]]),e._SetBindingList("langParseRule",["function","langParseRule",["lang","sym"],["or",["deref",[".","lang","left"],"sym"],["deref",[".","lang","right"],"sym"],["deref",[".","lang","prefix"],"sym"],["deref",[".","lang","infix"],"sym"],["deref",[".","lang","postfix"],"sym"]]]),e._AddPropertyList("LangLibInit",[["$.lingoInit","true"]]),e._SetBindingList("LangLibInit",["function","LangLibInit",["false","manifest"],["=","manifest",["`",["langParser","recurParse","langParseErrorString","tokenread","tokenpush","tokenmatch","tokenpass","passNewline","atTerminator","atDelimiter","langPassSeparator","langAtSeparator","langExprLoc","langConsSym","langEnlistSym","langSyntax","langDebuglog","langCleanup","langErrorCheck","langCorrelateComments","langStrip","langStripLoc","langParse1","langParseTo","langParseToList","langReadExpr","langTemplateStringParse","langBraceParse","langBracketParse","langValueParse","langGenIterate","langParseRule","LangLibInit"]]],[".",[".","Naan","module"],"build",[[".","module","id"],"$LangLib",["function","lambda",["modobj","compobj"],["set.","compobj",["`","manifest"],"manifest"],["set.",[".","modobj","exports"],["`","ParseErrorString"],"langParseErrorString"]]]]]),e._Execute(["LangLibInit"]),e._SetNamespace("Lingo"),e._Execute([".",[".","Naan","module"],"letlocal",["module"]]),e._Execute([".",[".","Naan","module"],"letinherit",["$Lib"]]),e._AddPropertyList("LingoPreload",[["$.lingoInit","true"]]),e._SetBindingList("LingoPreload",["function","LingoPreload","false",[".",[".","Naan","module"],"letinherit",["$Lib"]]]),e._SetBindingList("LingoParser",["function","LingoParser",["source","grammar","operators"],["=","SynLoop","false"],["=","InProc","false"],["langParser","source","grammar","operators"]]),e._SetValue("lingoGrammar",{dictionary:{$left:{dictionary:{"$(":520,"$[":520,"$@[":520,"$.":500,"$.*":500,"$@":500,"$@*":500,"$=":420,"$+=":420,"$-=":420,"$*=":420,"$/=":420,"$=?":420,"$=!":420,"$^":380,"$*":340,"$/.":340,"$/":340,"$+":320,"$-":320,"$..":310,"$..<":310,"$<=":300,"$>=":300,"$<":300,"$>":300,"$!=":300,"$==":300,$eq:300,"$===":300,"$!==":300,"$<=>":300,"$&&":220,$and:220,"$||":200,$or:200,"$~":120,"$~=":120}},$right:{dictionary:{"$.":540,"$@":540,"$^":375,"$++":360,"$--":360,"$*":340,"$/.":340,"$/":340,"$+":320,"$-":320,"$..":310,"$..<":310,"$<=":300,"$>=":300,"$<":300,"$>":300,"$!=":300,"$==":300,$eq:300,"$===":300,"$!==":300,"$<=>":300,$not:240,"$!":240,"$&&":220,$and:220,"$||":200,$or:200,"$~":120,"$~=":120,"$=":100,"$+=":100,"$-=":100,"$*=":100,"$/=":100,"$=?":100,"$=!":100}},$rightSign:360,$rightEqual:100,$highBind:1e3,$prefix:{dictionary:{"$,":"false","$[":["constObject",["lingoBracketParse","false","false","ltoken"]],"$#[":["langConsSym",["`","#["],"tokenlast",["lingoParseTo",["`","#]"],"tokenlast"]],$try:["catchParse"],"$(":["parenParse"],"$`":["quoteParse"],$property:["putParse"],$function:["procParse",["`","function"]],$macro:["procParse",["`","macro"]],$closure:["procParse",["`","closure"]],$let:["procParse",["`","let"]],$if:["ifParse","IfBody"],$else:["keywordParse","ltoken"],$body:["bodyParse"],$cond:["condParse"],$loop:["loopParse"],$break:["deloopParse",["`","break"]],$continue:["deloopParse",["`","continue"]],$return:["returnParse"],$while:["whileParse"],$for:["for2Parse"],$switch:["switchParse"],"$+":["lingoParse1","tokenlast",[".","lingoGrammar","rightSign"]],"$-":["negateParse"],"$!":["notParse"],"$++":["preCrementParse","rtoken",["`","++"],["`","+"]],"$--":["preCrementParse","rtoken",["`","--"],["`","-"]],"${":["constObject",["lingoBraceParse","false","ltoken"]],"$@":["atPrefixParse"]}},$infix:{dictionary:{"$/":["quotientParse","ltoken"],"$/.":["quotientParse","ltoken"],"$@":["atParse","ltoken"],"$@[":["atBracketParse","ltoken","rtoken"],"$[":["constObject",["lingoBracketParse","false","ltoken","rtoken"]],"$=":["equalParse","ltoken",["`","="]],"$=?":["equalParse","ltoken",["`","=?"]],"$=!":["equalParse","ltoken",["`","=!"]],"$+=":["opEqualParse","ltoken",["`","+"]],"$-=":["opEqualParse","ltoken",["`","-"]],"$*=":["opEqualParse","ltoken",["`","*"]],"$/=":["opEqualParse","ltoken",["`","/"]],"$(":["lparParse","ltoken"]}},$postfix:{dictionary:{"$++":["postCrementParse","ltoken",["`","++"],["`","+"]],"$--":["postCrementParse","ltoken",["`","--"],["`","-"]],"$!":["postBangParse","ltoken"]}},$postleft:{dictionary:{"$++":420,"$--":420,"$!":400}},$naryop:{dictionary:{"$&&":"true",$and:"true","$||":"true",$or:"true"}},$string:["langTemplateStringParse","ltoken"]}}),e._SetBindingList("lingoParse1",["function&","lingoParse1",["arg1","arg2","false","IfBody"],["=","IfBody",["`","IfBody"]],["langParse1","arg1","arg2"]]),e._SetBindingList("lingoReadExpr",["function&","lingoReadExpr",["false","IfBody"],["=","IfBody",["`","IfBody"]],["langReadExpr"]]),e._SetBindingList("lingoBraceParse",["function&","lingoBraceParse",["arg1","arg2","false","IfBody"],["=","IfBody",["`","IfBody"]],["langBraceParse","arg1","arg2"]]),e._SetBindingList("lingoBracketParse",["function&","lingoBracketParse",["arg1","arg2","arg3","false","IfBody"],["=","IfBody",["`","IfBody"]],["langBracketParse","arg1","arg2","arg3"]]),e._SetBindingList("lingoParseTo",["function&","lingoParseTo",["arg1","bloc","false","IfBody"],["=","IfBody",["`","IfBody"]],["langParseTo","arg1","bloc"]]),e._SetBindingList("lingoParseToList",["function&","lingoParseToList",["arg1","bloc","false","IfBody"],["=","IfBody",["`","IfBody"]],["langParseToList","arg1","bloc"]]),e._SetBindingList("constObject",["function","constObject",["tok"],["xlock",[".","tok","atom"]],"tok"]),e._SetBindingList("parenParse",["function","parenParse",["false","expr","sloc"],["=","sloc","tokenlast"],["=","expr",["lingoParse1","tokenlast",0]],[["tokenmatch","rpar"],["tokenread"],"expr"],["langSyntax",["tokenread"],"false",{dictionary:{$expected:"rpar",$memo:"$) or operator not found"}}]]),e._SetBindingList("negateParse",["function","negateParse",["false","expr"],["=","expr",["lingoParse1","tokenlast",[".","lingoGrammar","rightSign"]]],[["numeric",[".","expr","atom"]],{dictionary:{$atom:["negate",[".","expr","atom"]],$loc:[".","expr","loc"]}}],["langEnlistSym",["`","-"],"expr","expr"]]),e._SetBindingList("notParse",["function","notParse",["false","expr"],["=","expr",["lingoParse1","tokenlast",["deref",[".","lingoGrammar","right"],["`","!"]]]],["langEnlistSym",["`","not"],"expr","expr"]]),e._SetBindingList("postBangParse",["function","postBangParse",["expr","false","sloc"],["=","sloc","tokenlast"],["langEnlistSym",[".","tokenlast","atom"],"sloc","expr"]]),e._SetBindingList("atPrefixParse",["function","atPrefixParse",["false","expr","ltoken","destoken"],["=","ltoken","tokenlast"],["=","expr",["lingoParse1","ltoken",["deref",[".","lingoGrammar","right"],["`","@"]]]],["=","destoken",{dictionary:{$atom:["`","annotations"],$loc:["langExprLoc","ltoken"]}}],[[["not",["dictionary","annotations"]],["=","annotations",{dictionary:{}}]]],["=","expr",["langEnlistSym","`","expr","expr"]],["langEnlistSym","set.","ltoken","destoken","expr","expr"]]),e._SetBindingList("atParse",["function","atParse",["ltoken","false","expr"],["=","expr",["lingoParse1","tokenlast",["deref",[".","lingoGrammar","right"],["`","@"]]]],["langEnlistSym",["`","deref"],"ltoken",["langEnlistSym",["`","@"],"ltoken","ltoken"],["langEnlistSym","`","expr","expr"]]]),e._SetBindingList("atBracketParse",["function","atBracketParse",["ltoken","rtoken"],["lingoBracketParse","false",["langEnlistSym",["`","@"],"ltoken","ltoken"],"rtoken"]]),e._SetBindingList("quotientParse",["function","quotientParse",["lhs","false","rhs"],["=","rhs",["lingoParse1","tokenlast",["deref",[".","lingoGrammar","right"],["`","/"]]]],["langEnlistSym",["`","quotient"],"lhs","lhs","rhs"]]),e._SetBindingList("ifParse",["function&","ifParse",["IfBody"],[[["eq","IfBody",["`","IfBody"]],["return",["langConsSym",["`","cond"],"tokenlast",["ifParse"]]]]],["call",["let","lambda",["notcond","false","expr","nexpr","bloc"],["=","IfBody","true"],[[["tokenmatch","lpar"],["=","bloc","tokenlast"],["tokenread"],["=","expr",["car",["lingoParseTo","rpar","bloc"]]]],["=","expr",["lingoParse1","tokenlast",0]]],[[["dictionary","expr"],["=","expr",["langEnlistSym",["`","identity"],"expr","expr"]]]],[[["not",["tokenmatch","{"]],["langPassSeparator"],["=","expr",["list","expr",["langParse1","tokenlast",0]]]],["=","bloc","tokenlast"],["tokenread"],["=","expr",["cons","expr",["langParseTo",["`","}"],"bloc"]]]],[["not",["tokenmatch",["`","else"]]],["list","expr"]],["tokenread"],[["identity","notcond"],[["tokenmatch",["`","if"]],["tokenread"],["list","expr",["ifParse","true"]]],[["tokenmatch","{"],["=","bloc","tokenlast"],["tokenread"],["cons","expr",["langParseTo",["`","}"],"bloc"]]],["list","expr",["langParse1","tokenlast",0]]],[["tokenmatch",["`","if"]],["tokenread"],["cons","expr",["ifParse","false"]]],["=","nexpr",["langConsSym",["`","identity"],"tokenlast",["langConsSym",["`","true"],"tokenlast"]]],[[["tokenmatch","{"],["=","bloc","tokenlast"],["tokenread"],["=","nexpr",["cons","nexpr",["langParseTo",["`","}"],"bloc"]]]],["=","nexpr",["list","nexpr",["langParse1","tokenlast",0]]]],["list","expr","nexpr"]],"IfBody"]]),e._SetBindingList("keywordParse",["function&","keywordParse",["token"],["langSyntax","token","false",{dictionary:{$memo:"$stray keyword"}}]]),e._SetBindingList("bodyParse",["function&","bodyParse",["false","IfBody"],["call",["let","lambda",["bloc"],[["tokenmatch","lpar"],["=","IfBody","true"],["=","bloc","tokenlast"],["tokenread"],["langConsSym",["`","body"],"tokenlast",["langParseTo","rpar","bloc"]]],{dictionary:{$atom:["`","body"],$loc:["langExprLoc","tokenlast"]}}]]]),e._SetBindingList("ifsParse",["function&","ifsParse",["to","false","IfBody"],["call",["let","lambda",["bloc","conds","expr"],["=","bloc","tokenlast"],["=","conds",["apply","append",["langParseTo","to","bloc"]]],["for",["let","lambda",["iter"],["=","iter",["iterate","conds",["`","expr"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","expr",[".","iter","$value"]],[["not",["tuple",["car","expr"]]],["langSyntax","expr","false",{dictionary:{$memo:"$if expression required"}}]]]]],"conds"]]]),e._SetBindingList("condParse",["function&","condParse",["false","IfBody"],[[["tokenmatch","lpar"],["tokenread"]],["return",{dictionary:{$atom:["`","cond"],$loc:["langExprLoc","tokenlast"]}}]],["langConsSym",["`","cond"],"tokenlast",["ifsParse","rpar"]]]),e._SetBindingList("loopParse",["function&","loopParse",["false","SynLoop","IfBody"],["call",["let","lambda",["tagex","sloc","bloc"],["=","sloc","tokenlast"],[[["tokenmatch",["`",":"]],["tokenread"],["=","tagex",["lingoParse1","tokenlast",0]]],["=","tagex",{dictionary:{$atom:"false",$loc:["langExprLoc","sloc"]}}]],[["not",["atom",["caar","tagex"]]],["langSyntax","tokenlast","false",{dictionary:{$memo:"$loop tag must be an atom"}}]],["=","SynLoop","true"],["=","IfBody","true"],[["tokenmatch","{"],["=","bloc","tokenlast"],["tokenread"],["langConsSym",["`","loop"],"sloc",["cons","tagex",["langParseTo",["`","}"],"bloc"]]]],["langConsSym",["`","loop"],"sloc",["cons","tagex",["list",["langParse1","tokenlast",0]]]]]]]),e._SetBindingList("deloopParse",["function","deloopParse",["keyword","false","tagex","sloc"],[["not","SynLoop"],["langSyntax","tokenlast","false",{dictionary:{$memo:"$only allowed within loops"}}]],["=","sloc","tokenlast"],[["tokenmatch",["`",":"]],["tokenread"],["=","tagex",["lingoParse1","tokenlast",0]],[["not",["atom",["caar","tagex"]]],["langSyntax","tokenlast","false",{dictionary:{$memo:"$tag must be an atom"}}]],["langEnlistSym","keyword","tokenlast","tagex"]],["langConsSym","keyword","tokenlast"]]),e._SetBindingList("returnParse",["function","returnParse","false",[["tokenmatch","lpar"],["langEnlistSym",["`","return"],"tokenlast",["lingoParse1","tokenlast",0]]],["langConsSym",["`","return"],"tokenlast"]]),e._SetBindingList("whileParse",["function&","whileParse",["false","SynLoop","IfBody"],["call",["let","lambda",["sloc","expr","tagex","testex","bloc"],["=","sloc","tokenlast"],[[["tokenmatch",["`",":"]],["tokenread"],["=","tagex",["lingoParse1","tokenlast",0]]],["=","tagex",{dictionary:{$atom:"false",$loc:["langExprLoc","sloc"]}}]],[["not",["dictionary",["car","tagex"]]],["langSyntax","tokenlast","false",{dictionary:{$memo:"$while tag must be an atom"}}]],[[["tokenmatch","lpar"],["=","bloc","tokenlast"],["tokenread"],["=","expr",["car",["lingoParseTo","rpar","bloc"]]]],["=","expr",["lingoParse1","tokenlast",0]]],["=","testex",["list",["langEnlistSym",["`","not"],"expr","expr"]]],["=","SynLoop","true"],["=","IfBody","true"],[["tokenmatch","{"],["=","bloc","tokenlast"],["tokenread"],["langConsSym",["`","while"],"sloc",["cons","tagex","testex",["langParseTo",["`","}"],"bloc"]]]],["langPassSeparator"],["langConsSym",["`","while"],"sloc",["cons","tagex","testex",["list",["langParse1","tokenlast",0]]]]]]]),e._SetBindingList("for2Parse",["function&","for2Parse",["false","SynLoop","IfBody"],["call",["let","lambda",["sloc","varex","tagex","targex","bloc","bodyex"],["=","sloc","tokenlast"],[[["tokenmatch",["`",":"]],["tokenread"],["=","tagex",["lingoParse1","tokenlast",0]]],["=","tagex",{dictionary:{$atom:"false",$loc:["langExprLoc","sloc"]}}]],[["not",["defined","tagex","atom"]],["langSyntax","tokenlast","false",{dictionary:{$memo:"$for tag must be an atom"}}]],["=","varex",["lingoParse1","tokenlast",0]],[[["==",[".",["car","varex"],"atom"],"quote"],["=","varex",["cadr","varex"]]]],[["not",["tokenmatch",["`","in"]]],["langSyntax","tokenlast","false",{dictionary:{$expected:"$in",$memo:"$malformed for loop"}}]],["tokenread"],["=","targex",["lingoParse1","tokenlast",0]],["=","SynLoop","true"],["=","IfBody","true"],[[["tokenmatch","{"],["=","bloc","tokenlast"],["tokenread"],["=","bodyex",["langParseTo",["`","}"],"bloc"]]],["=","bodyex",["cons",["langParse1","tokenlast",0]]]],["langGenIterate",{dictionary:{$atom:["`","for"],$loc:"sloc"}},"tagex","varex","targex","bodyex"]]]]),e._SetBindingList("switchParse",["function","switchParse",["false","sloc"],["=","sloc","tokenlast"],["langSyntax","sloc",{dictionary:{$memo:"$switch not implemented"}}]]),e._SetBindingList("procParse",["function&","procParse",["begin","false","InProc","IfBody"],["function","convlocal",["parms","false","ptoken","result"],[["atom","parms"],"parms"],["loop","false",["=","ptoken",["pop","parms"]],[[["==",[".","ptoken","atom"],"local"],["=","result",["cons",{dictionary:{$atom:"false",$loc:[".","ptoken","loc"]}},"result"]]],["=","result",["cons","ptoken","result"]]],[["atom","parms"],["reverse","result"]]]],["function","checkparms",["parms","false","sym"],[["not","parms"],"false"],[["&&",["dictionary","parms"],["not",["not",["=","sym",[".","parms","atom"]]]]],[["||",["not",["symbol","sym"]],["langParseRule","lingoGrammar","sym"]],["langSyntax","parms","false",{dictionary:{$memo:"$invalid parameter"}}]]],[["tuple","parms"],["checkparms",["car","parms"]],["checkparms",["cdr","parms"]]]],["call",["let","lambda",["expr","procname","parms","sloc","akey","bloc"],["=","InProc","true"],["=","sloc","tokenlast"],["=","expr",["langReadExpr"]],[[["==",[".","expr","atom"],["`","&"]],[["eq","begin",["`","function"]],["=","begin","function&"],["=","expr",["langReadExpr"]]],[["eq","begin",["`","let"]],["=","begin","let&"],["=","expr",["langReadExpr"]]],["langSyntax","sloc","false",{dictionary:{$memo:"$only function& and let& allowed"}}],["return"]]],[[["&&",["defined","expr","atom"],["symbol",[".","expr","atom"]]],["=","procname",{dictionary:{$atom:["unintern",[".","expr","atom"]],$loc:["langExprLoc","sloc"]}}],["assign",[".","procname","atom"],[".","expr","atom"]],["=","parms",["langReadExpr"]]],["=","procname",{dictionary:{$atom:["unintern","lambda"],$loc:["langExprLoc","sloc"]}}],["=","parms","expr"]],[[["dictionary","annotations"],["for",["let","lambda",["iter"],["=","iter",["iterate","annotations",["`","akey"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","akey",[".","iter","$value"]],["put",[".","procname","atom"],"akey",["deref","annotations","akey"]]]]],["=","annotations",["`","annotations"]]]],[[["||",["&&",["dictionary","parms"],["not",[".","parms","atom"]]],["not","parms"]],["=","parms",{dictionary:{$atom:"false",$loc:["langExprLoc","tokenlast"]}}]],["=","parms",["convlocal","parms"]]],["checkparms","parms"],[["not",["tokenmatch","{"]],["langSyntax","tokenlast","sloc",{dictionary:{$memo:"$missing { at start of procedure body"}}]],["=","IfBody","true"],["=","bloc","tokenlast"],["tokenread"],["langConsSym","begin","sloc",["cons","procname",["cons","parms",["langParseTo",["`","}"],"bloc"]]]]]]]),e._SetBindingList("putParse",["function","putParse",["false","sloc","symtoken","keytoken","value"],["=","sloc","tokenlast"],["=","symtoken",["langReadExpr"]],["=","keytoken",["langReadExpr"]],[["&&",["not",["defined","symtoken","atom"]],["symbol",[".","symtoken","atom"]]],["langSyntax","symtoken","sloc",{dictionary:{$memo:"$malformed property statement"}}]],[["&&",["not",["defined","keytoken","atom"]],["symbol",[".","keytoken","atom"]]],["langSyntax","keytoken","sloc",{dictionary:{$memo:"$malformed property statement"}}]],["langPassSeparator"],["=","value",["lingoParse1","tokenlast",0]],[[["==",["caar","value"],"quote"],["=","value",["rest","value"]]]],["langEnlistSym",["`","defprop"],"sloc","symtoken","keytoken","value"]]),e._SetBindingList("catchParse",["function","catchParse",["false","sloc1","sloc2","sloc3","exbod","catbod","ccond","finbod","bloc"],["=","sloc1","tokenlast"],[["not",["tokenmatch","{"]],["langSyntax","tokenlast","sloc1",{dictionary:{$memo:"$missing { after try"}}]],["tokenread"],["=","exbod",["langParseToList",["`","}"],"sloc1"]],["=","sloc2","tokenlast"],[[["tokenmatch",["`","catch"]],["tokenread"],[["not",["tokenmatch","{"]],["langSyntax","tokenlast","sloc2",{dictionary:{$memo:"$missing { after catch"}}]],["=","bloc","tokenlast"],["tokenread"],[[["tokenmatch",["`","if"]],["=","ccond",["ifsParse",["`","}"]]]],[["tokenmatch",["`","}"]],["tokenread"]],["=","catbod",["langParseTo",["`","}"],"bloc"]]],[["not","ccond"],[[["not","catbod"],["=","catbod",["langConsSym",["`","false"],"bloc"]]]],["=","ccond",["list",["cons",["langConsSym",["`","identity"],"bloc",["langConsSym",["`","true"],"bloc"]],"catbod"]]]]]],["=","sloc3","tokenlast"],[[["tokenmatch",["`","finally"]],["tokenread"],[["not",["tokenmatch","{"]],["langSyntax","tokenlast","sloc3",{dictionary:{$memo:"$missing { after finally"}}]],["=","bloc","tokenlast"],["tokenread"],["=","finbod",["langParseToList",["`","}"],"bloc"]]]],[["not","ccond"],[["not","finbod"],["langSyntax","tokenlast","sloc1",{dictionary:{$memo:"$try requires catch or finally"}}]],["=","ccond",{dictionary:{$atom:"false",$loc:["langExprLoc","sloc2"]}}],["langEnlistSym",["`","catch"],"sloc1","exbod","ccond","finbod"]],[["not","finbod"],["=","finbod",{dictionary:{$atom:"false",$loc:["langExprLoc","sloc3"]}}],["langEnlistSym",["`","catch"],"sloc1","exbod","ccond","finbod"]],["langEnlistSym",["`","catch"],"sloc1","exbod","ccond","finbod"]]),e._SetBindingList("equalParse",["function","equalParse",["lhs","op","false","rhs","atex","equex"],["=","rhs",["lingoParse1","tokenlast",[".","lingoGrammar","rightEqual"]]],["=","equex",["call",["let","lambda","false",[["&&",["defined","lhs","atom"],["symbol",[".","lhs","atom"]]],["langEnlistSym","op","lhs","lhs","rhs"]],[["==",[".",["car","lhs"],"atom"],"quote"],["langEnlistSym","op","lhs",["second","lhs"],"rhs"]],[["==",[".",["car","lhs"],"atom"],"period"],["langEnlistSym","set.","lhs",["second","lhs"],["langEnlistSym","quote",["third","lhs"],["third","lhs"]],"rhs"]],[["and",["==",[".",["car","lhs"],"atom"],"set."],["eq",[".",["second","lhs"],"atom"],["`","annotations"]]],["langEnlistSym","set.","lhs",["second","lhs"],["third","lhs"],"rhs"]],[["or",["==",[".",["caar","lhs"],"atom"],"deref"],["==",[".",["caar","lhs"],"atom"],"dereflist"]],["=","atex",["second","lhs"]],[[["==",[".",["car","atex"],"atom"],["`","@"]],["=","atex",["langEnlistSym",["`","@"],"atex",["second","atex"],{dictionary:{$atom:"true",$loc:[".",["car","atex"],"loc"]}}]]]],["langEnlistSym","set[","lhs","atex",["third","lhs"],"rhs"]],["return",["langSyntax","rhs","lhs",{dictionary:{$memo:"$bad assignment"}}]]]]],[["eq","op",["`","=!"]],["langEnlistSym",["`","not"],"lhs","equex"]],"equex"]),e._SetBindingList("opEqualParse",["function","opEqualParse",["lhs","op","false","rhs"],["=","rhs",["lingoParse1","tokenlast",[".","lingoGrammar","rightEqual"]]],[["&&",["defined","lhs","atom"],["symbol",[".","lhs","atom"]]],["langEnlistSym","preadjust","lhs","lhs",{dictionary:{$atom:"op",$loc:["langExprLoc","lhs"]}},"rhs"]],[["==",[".",["car","lhs"],"atom"],"quote"],["langEnlistSym","preadjust","lhs",["second","lhs"],{dictionary:{$atom:"op",$loc:["langExprLoc","lhs"]}},"rhs"]],[["member",[".",["car","lhs"],"atom"],["`",[".","deref","dereflist"]]],["langEnlistSym","preadjust","lhs","lhs",{dictionary:{$atom:"op",$loc:["langExprLoc","lhs"]}},"rhs"]],["langSyntax","rhs","lhs",{dictionary:{$memo:"$bad operator assignment"}}]]),e._SetBindingList("lparParse",["function","lparParse",["expr","false","bloc"],["=","bloc","tokenlast"],[["&&",["defined","expr","atom"],["symbol",[".","expr","atom"]]],["cons","expr",["lingoParseTo","rpar","bloc"]]],[["==",[".",["car","expr"],"atom"],"period"],["langEnlistSym","period","expr",["second","expr"],["third","expr"],["lingoParseToList","rpar","bloc"]]],[["member",[".",["car","expr"],"atom"],["`",["function","function&","macro","closure","let","let&"]]],[[["not","InProc"],["set[",["@",[".",[".","expr",1],"atom"],"true"],["`","\\.lingoInit"],"true"]]],["langConsSym",["`","call"],"expr",["cons","expr",["lingoParseTo","rpar","bloc"]]]],[["or",["==",[".",["caar","expr"],"atom"],"deref"],["==",[".",["caar","expr"],"atom"],"dereflist"]],["langEnlistSym",[".",["caar","expr"],"atom"],"expr",["second","expr"],["third","expr"],["lingoParseToList","rpar","bloc"]]],["langSyntax","bloc","false",{dictionary:{$memo:"$operator missing before ("}}]]),e._SetBindingList("preCrementParse",["function","preCrementParse",["rtoken","opsym","adjuster","false","sloc","expr"],["=","sloc","tokenlast"],["=","expr",["lingoParse1","tokenlast",["deref",[".","lingoGrammar","right"],"opsym"]]],[["or",["&&",["defined","expr","atom"],["symbol",[".","expr","atom"]]],["member",[".",["car","expr"],"atom"],["`",[".","deref","dereflist"]]]],["langEnlistSym","preadjust","sloc","expr",{dictionary:{$atom:"adjuster",$loc:["langExprLoc","sloc"]}},{dictionary:{$atom:1,$loc:["langExprLoc","sloc"]}}]],["langSyntax","expr","false",{dictionary:{$memo:"$not an lvalue"}}]]),e._SetBindingList("postCrementParse",["function","postCrementParse",["expr","opsym","adjuster","false","sloc"],["=","sloc","tokenlast"],[["or",["&&",["defined","expr","atom"],["symbol",[".","expr","atom"]]],["member",[".",["car","expr"],"atom"],["`",[".","deref","dereflist"]]]],["langEnlistSym","postadjust","sloc","expr",{dictionary:{$atom:"adjuster",$loc:["langExprLoc","sloc"]}},{dictionary:{$atom:1,$loc:["langExprLoc","sloc"]}}]],["langSyntax","expr","false",{dictionary:{$memo:"$not an lvalue"}}]]),e._SetBindingList("quoteParse",["function","quoteParse",["false","expr"],["=","expr","tokenlast"],[["member",[".","expr","atom"],["`",["quote",")","{","[","`","\n"]]],["tokenread"],"expr"],["langEnlistSym","`","expr",["langReadExpr"]]]),e._SetBindingList("makeBootJS",["function","makeBootJS",["false","content"],["=","content",{array:[]}],["set[","content",0,"$/*\n * naan_lingo.js\n *\n * Contains Confidential Trade Secrets of Zulch Laboratories, Inc.\n * Portions Copyright (c) 2017-2021 by Richard C. Zulch\n *\n * This confidential source file is licensed to:\n *     %%%Licensee%%%\n *     Version %%%Version%%%\n *\n * This file contains the Lib runtime library and the Lingo language subsystem.\n * Lib:\n *     RuntimeLib.nlg      - basic functionality accessed through the language\n *     LangLib.nlg         - generic language utilities, e.g. parser and unparser\n * Lingo components:\n *     Parse.nlg           - parser\n *     Unparse.nlg         - unparser\n * CLI components:\n *     CliUtils.nlg        - CLI shared utility functions\n *     Driver.nlg          - repl driver\n *     Debugger.nlg        - CLI debugger\n *\n * column positioning:                          //                          //                      !\n *\n */\n\n(function(exports){\n\nexports.BootLingo = function(ninti) {\n\n    'use strict';\n\n    //\n    // Namespace<Lib>\n    //\n\n    var savens = ninti._SetNamespace('Lib');\n\n    ninti._CopyBinding('equal', '==');\n    ninti._CopyBinding('setq', '=');\n    ninti._CopyBinding('and', '&&');\n    ninti._CopyBinding('or', '||');\n    ninti._CopyBinding('loop', 'while');\n\n    ninti._Import('number', 'difference', '-');\n    ninti._Import('number', 'greater', '>');\n    ninti._Import('number', 'lesser', '<');\n    ninti._Import('number', 'times', '*');\n    ninti._Import('number', 'plus', '+');\n    ninti._Import('number', 'quotient', '/');\n    ninti._Import('number', 'quotient', '/.');\n\n    ninti._SetValue('echo', []);\n    ninti._SetValue('err', []);\n    ninti._SetValue('rdsDriver');\n\n"],["set[","content",0,[".",["deref","content",0],"replace",[["RegExp","$%%%","$g"],"$$"]]],["set[","content",1,[".",[".",[".",[".",[".",[".","module","owner"],"list"],"Lib"],"components"],"RuntimeLib"],"jspackage","false"]],["set[","content",2,"$    ninti._Execute(['RuntimeLibInit', '$Lib']);\n\n"],["set[","content",3,[".",[".",[".",[".",[".",[".","module","owner"],"list"],"Lib"],"components"],"Languages"],"jspackage","false"]],["set[","content",4,"$    ninti._Execute(['LanguagesInit']);\n\n"],["set[","content",5,[".",[".",[".",[".",[".",[".","module","owner"],"list"],"Lib"],"components"],"LangLib"],"jspackage","false"]],["set[","content",6,"$    ninti._Execute(['LangLibInit']);\n\n    ninti._SetNamespace('Lingo');\n    ninti._Execute(['.', ['.', 'Naan', 'module'], 'letlocal', ['module']]);\n\n    ninti._Execute(['.', ['.', 'Naan', 'module'], 'letinherit', ['$Lib']]);\n\n"],["set[","content",7,[".",[".",[".","module","components"],"Parse"],"jspackage","false"]],["set[","content",8,"$    ninti._Execute(['LingoInit', '$Lingo']);\n"],["set[","content",9,[".",[".",[".","module","components"],"Unparse"],"jspackage","false"]],["set[","content",10,"$    ninti._Execute(['LingoUnparseInit']);\n\n    ninti._SetNamespace(savens.slice(1), true);\n    ninti._SetNamespace('CLI');\n    ninti._Execute(['.', ['.', 'Naan', 'module'], 'letinherit', ['$Lang_Lingo']]);\n\n"],["set[","content",11,[".",[".",[".",[".",[".",[".","module","owner"],"list"],"CLI"],"components"],"CliUtils"],"jspackage","false"]],["set[","content",12,"$    ninti._Execute(['CliUtilsInit']);\n\n"],["set[","content",13,[".",[".",[".",[".",[".",[".","module","owner"],"list"],"CLI"],"components"],"Driver"],"jspackage","false"]],["set[","content",14,"$    ninti._Execute(['DriverInit']);\n    ninti._CopyBinding('Driver', 'driver');\n\n"],["set[","content",15,[".",[".",[".",[".",[".",[".","module","owner"],"list"],"CLI"],"components"],"Debugger"],"jspackage","false"]],["set[","content",16,"$    ninti._Execute(['DebuggerInit']);\n\n    ninti._SetNamespace(savens, true);\n};\n\n})(typeof exports === 'undefined'? this.naan_lingo={}: exports);\n"],[".","content","join",["$"]]]),e._AddPropertyList("LingoInit",[["$.lingoInit","true"]]),e._SetBindingList("LingoInit",["function","LingoInit",["modname","false","manifest"],["=","manifest",["`",["LingoPreload","LingoParser","lingoGrammar","lingoParse1","lingoReadExpr","lingoBraceParse","lingoBracketParse","lingoParseTo","lingoParseToList","constObject","parenParse","negateParse","notParse","postBangParse","atPrefixParse","atParse","atBracketParse","quotientParse","ifParse","keywordParse","bodyParse","ifsParse","condParse","loopParse","deloopParse","returnParse","whileParse","for1Parse","for2Parse","switchParse","procParse","putParse","catchParse","equalParse","opEqualParse","lparParse","preCrementParse","postCrementParse","quoteParse","makeBootJS","LingoInit"]]],[[["not","modname"],["=","modname",[".","module","id"]]]],[".",[".","Naan","module"],"build",["modname","$Parse",["function","lambda",["modobj","compobj"],["set.","compobj",["`","manifest"],"manifest"],[".",[".","Naan","module"],"letinherit",["$Lib"]],["set.",[".","modobj","exports"],["`","Base"],["DefineLanguage","$Lingo","lingoGrammar","LingoParser","LingoUnparser"]],["=","lingoOperators",[".",[".",[".",[".","modobj","exports"],"Base"],"info","false"],"operators"]]]]]]),e._Execute(["LingoInit","$Lingo"]),e._SetBindingList("LingoPrinter",["function","LingoPrinter",["expr","options"],[".",["LingoUnparser","expr","options"],"string","false"]]),e._SetBindingList("LingoUnparser",["closure","LingoUnparser",["origexpr","options","grammar","extensions","false","unparser","sink","formatter","key","expr","rbp","lbp","owntuple","hookif"],["=","unparser",["new","object","this"]],["set.","unparser",["`","expression"],"origexpr"],[[["not","grammar"],["=","grammar","lingoGrammar"]]],["set.","unparser",["`","sink"],["=","sink",{dictionary:{$row:0,$col:0,$incol:0,$hangdent:0,$wrapping:"true",$rowtokens:{array:[{array:[]}]},$procnesting:0,$endprocNL:"true",$quoteDict:["RegExp","$[`:,}]$"],$breaks:"false",$mirrors:"false",$mirroroot:"false",$tuplemap:"false",$maxmarklen:0,$markdict:"false",$nocycles:["new","weakmap"],$maproot:"false",$defoptions:{dictionary:{$point:"false",$quoted:"true",$indentSize:4,$wrapMinAmount:29,$wrapMaxCol:79,$leftMargin:0,$compact:"true",$maxKeyLength:20,$maxElements:1024,$maxStringLength:["*",64,1024],$noComments:"false",$commentCol:64}}}}]],["call",["let","lambda",["false","item"],[[["not",["dictionary","options"]],["=","options",[".","sink","defoptions"]]],["for",["let","lambda",["iter"],["=","iter",["iterate","options",["`","item"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","item",[".","iter","$value"]],["set[",[".","sink","defoptions"],"item",["deref","options","item"]]]]],["=","options",[".","sink","defoptions"]]],["set.","unparser",["`","options"],"options"]]],["set.","sink",["`","col"],[".","options","leftMargin"]],["=","formatter",{dictionary:{"$`":"uhook`","$=":"uhook=",$deref:"uhookderef",$dereflist:"uhookderef","$set.":"uhookset.","$set[":"uhookset[","$.":"uhook.","$.*":"uhookref*","$@*":"uhookref*",$quotient:"uhookquotient",$catch:"uhookcatch",$for:"uhookfor",$call:"uhookcall",$while:"uhookwhile",$loop:"uhookloop",$cond:"uhookcond",$return:"uhookreturn",$continue:"uhookbreco",$break:"uhookbreco",$preadjust:"uhookpreadjust",$postadjust:"uhookpostadjust",$not:"uhooknot","$!":"uhookbang",$let:"uhookproc","$let&":"uhookproc",$closure:"uhookproc",$macro:"uhookproc",$function:"uhookproc","$function&":"uhookproc"}}],["for",["let","lambda",["iter"],["=","iter",["iterate","extensions",["`","key"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","key",[".","iter","$value"]],["set[","formatter","key",["deref","extensions","key"]]]]],["function","earlier",["loc1","loc2"],[["<",["car","loc1"],["car","loc2"]],"loc1"],[[">",["car","loc1"],["car","loc2"]],"loc2"],[["<",["second","loc1"],["second","loc2"]],"loc1"],[[">",["second","loc1"],["second","loc2"]],"loc2"],"loc1"],["function","later",["loc1","loc2"],[[">",["car","loc1"],["car","loc2"]],"loc1"],[["<",["car","loc1"],["car","loc2"]],"loc2"],[[">",["second","loc1"],["second","loc2"]],"loc1"],[["<",["second","loc1"],["second","loc2"]],"loc2"],"loc1"],["function","indentadj",["delta"],["preadjust",[".","sink","incol"],"+",["*","delta",[".","options","indentSize"]]],[["<",[".","sink","incol"],0],["set.","sink",["`","incol"],0]]],["function","nextline","false",["set[",[".","sink","rowtokens"],["preadjust",[".","sink","row"],"+",1],{array:[]}],["set.","sink",["`","col"],[".","sink","incol"]],[[">",[".","sink","hangdent"],0],["preadjust",[".","sink","col"],"+",[".","options","indentSize"]]]],["function&","outoken",["strs","false","str","toklen","outok","sym"],[[["<",[".","sink","col"],[".","sink","incol"]],["set.","sink",["`","col"],[".","sink","incol"]]]],["while","false",[["not",["not",["atom","strs"]]]],["=","str",["pop","strs"]],[[["not",["atom","str"]],["=","owntuple","str"],["continue"]]],[[["symbol","str"],["=","sym","str"],["=","str",["tostring","sym",{dictionary:{$quote:"true",$nonamespace:"true"}}]]]],[[[">",[".","str","length"],[".","options","maxStringLength"]],["=","str",[".","$[String ","concat",[[".","str","length"],"$]"]]]]],[[["==","str","$\n"],["nextline"],["continue"]],[[[">=",[".","str","indexOf",["$\n"]],0],["=","str",["totuple",[".","str","split",["$\n"]]]],["=","outok","false"],["loop","false",["push",["pop","str"],"outok"],[["empty","str"]],["push","$\n","outok"]],["outoken",["reverse","outok"]],["continue"]]]],["=","toklen",["length","str"]],[[["!=",[".","str","trim","false"],"$"],[[["&&",[".","sink","wrapping"],[">",["+",[".","sink","col"],"toklen"],[".","options","wrapMaxCol"]],[">",["-",[".","sink","col"],[".","sink","incol"]],[".","options","wrapMinAmount"]]],["nextline"]]],["=","outok",{dictionary:{$str:"str",$column:[".","sink","col"],$tuple:"owntuple"}}],[[["identity","sym"],["set.","outok",["`","symbol"],"sym"]]],[".",["deref",[".","sink","rowtokens"],[".","sink","row"]],"push",["outok"]]]],["preadjust",[".","sink","col"],"+","toklen"]]],["function","mktok","strs",["outoken","strs"]],["function","mktokil","strs",["call",["function","lambda",["false","result"],["set.","sink",["`","wrapping"],"false"],["=","result",["apply","mktok","strs"]],["set.","sink",["`","wrapping"],"true"],"result"]]],["function","spaces",["lop1"],[["not",["and","lop1",["atom","lop1"]]],[["identity","spaceout"],["mktok","space"]]],[["<",["deref",[".","grammar","right"],"lop1"],"lbp"],["mktok","space"]],[["<",["deref",[".","grammar","left"],"lop1"],"rbp"],["mktok","space"]],[["identity","spaceout"],["mktok","space"]],[["not",["isbreak","lop1"]],["mktok","space"]]],["function","parens",["str"],[["deref",[".","grammar","right"],"lop1"],[[">","lbp",["deref",[".","grammar","right"],"lop1"]],["mktokil","str"]],[["deref",[".","grammar","left"],"lop1"],[["<","rbp",["deref",[".","grammar","left"],"lop1"]]],["mktokil","str"]],["=","spaceout","false"]],[["deref",[".","grammar","left"],"lop1"],[["<","rbp",["deref",[".","grammar","left"],"lop1"]]],["mktokil","str"]]],["macro","getokens",["outputter","false","rowstart","colstart"],["function","dequeue",["false","rowdex","coldex","outqueue","col"],["=","outqueue",{array:[]}],["=","coldex",0],["for",["let","lambda",["iter"],["=","iter",["iterate",["deref",[".","sink","rowtokens"],"rowstart"],["`","col"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","col",[".","iter","$value"]],[[">=",[".","col","column"],"colstart"],["=","outqueue",[".","outqueue","concat",[[".",["deref",[".","sink","rowtokens"],"rowstart"],"splice",["coldex"]]]]],["set.","sink",["`","col"],[".","col","column"]]],["preadjust","coldex","+",1]]]],["set.","sink",["`","row"],"rowstart"],["set.","sink",["`","col"],"colstart"],["=","rowdex","rowstart"],["while","false",[["not",["<",["preadjust","rowdex","+",1],[".",[".","sink","rowtokens"],"length"]]]],[".","outqueue","push",[["`","row"]]],["=","outqueue",[".","outqueue","concat",[[".",["deref",[".","sink","rowtokens"],"rowdex"],"splice",[0]]]]]],[".",["deref",[".","sink","rowtokens"],"rowdex"],"splice",[["+","rowstart",1]]],"outqueue"],["=","rowstart",[".","sink","row"]],["=","colstart",[".","sink","col"]],[["eval","outputter"],["dequeue"]]],["function","putokens",["tokens","false","item"],["for",["let","lambda",["iter"],["=","iter",["iterate","tokens",["`","item"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","item",[".","iter","$value"]],[[["eq","item",["`","row"]],["nextline"]],[".",["deref",[".","sink","rowtokens"],[".","sink","row"]],"push",["item"]],["set.","sink",["`","col"],["+",[".","item","column"],["length",[".","item","str"]]]]]]]]],["function","tokenmark","false",{dictionary:{$rowstart:[".","sink","row"],$colstart:[".",["deref",[".","sink","rowtokens"],[".","sink","row"]],"length"],$col:[".","sink","col"],$incol:[".","sink","incol"]}}],["function","tokentruncate",["mark"],[".",["deref",[".","sink","rowtokens"],[".","mark","rowstart"]],"splice",[[".","mark","colstart"]]],[".",[".","sink","rowtokens"],"splice",[["+",[".","mark","rowstart"],1]]],["set.","sink",["`","row"],[".","mark","rowstart"]],["set.","sink",["`","col"],[".","mark","col"]],["set.","sink",["`","incol"],[".","mark","incol"]]],["function","exarray",["arr","false","adex","separator"],[[["deref",[".","sink","nocycles"],"arr"],["mktokil","$[","$<cyclic>","$]"],["return"]]],["set[",[".","sink","nocycles"],"arr","true"],["=","adex",0],["=","separator","space"],["while","false",[["not",["<","adex",[".","arr","length"]]]],[[["dictionary",["deref","arr",["postadjust","adex","+",1]]],["=","separator","$\n"],["break"]]]],["mktok","$["],[[["==","separator","$\n"],["nextline"],["indentadj",1]]],["=","adex",0],["while","false",[["not",["<","adex",[".","arr","length"]]]],[[[">=","adex",[".","options","maxElements"]],["mktok","$<...>"],["break"]]],[[[">","adex",0],["mktokil","$,","separator"]]],["exoutput",["deref","arr",["postadjust","adex","+",1]],"arr",0,0]],[[["==","separator","$\n"],["indentadj",-1]]],["mktok","$]"],["set[",[".","sink","nocycles"],"arr","false"]],["function","exdictionary",["dict","false","depths","dictmap","completed"],["function","render",["whitespace","keypad","false","mark","startrow","notfirst","keylen","keystr","savehang","key"],["=","mark",["tokenmark"]],["=","startrow",[".","sink","row"]],["=","savehang",[".","sink","hangdent"]],["set.","sink",["`","hangdent"],0],["set.","sink",["`","endprocNL"],"false"],[[["identity","keypad"],["mktok","{","$\n"]],["for",["let","lambda",["iter"],["=","iter",["iterate","dict",["`","key"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","key",[".","iter","$value"]],[[["||",["eq",["typeof",["deref","dict","key"]],"dictionary"],["eq",["typeof",["deref","dict","key"]],"array"]],["tokentruncate","mark"],["return","false"]]]]]],["mktok","{"]],[[["identity","keypad"],["indentadj",1]]],["for",["let","lambda",["iter"],["=","iter",["iterate","dict",["`","key"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","key",[".","iter","$value"]],["=","keystr","key"],[[["&&",[".","options","quoted"],[".",[".","sink","quoteDict"],"test",["keystr"]]],["=","keystr",[".",'$"',"concat",["keystr",'$"']]]]],["=","keylen",["length","keystr"]],[[["&&","keypad",[">","keypad","keylen"]],["=","keystr",[".","keystr","concat",[[".","space","repeat",[["-","keypad","keylen"]]]]]]]],[[["identity","notfirst"],["mktokil","$,","whitespace"]],[[">",[".","sink","col"],[".","sink","incol"]],["mktokil","space"]]],["=","notfirst","true"],["mktokil","keystr","$:","space"],[[["eq",["typeof",["deref","dict","key"]],["typeof","dict"]],[["||",["deref",[".","sink","nocycles"],["deref","dict","key"]],["deref","dictmap",["deref","dict","key"]]],["mktokil","${","$<cyclic>","$}"]],["set[","dictmap",["deref","dict","key"],"true"],["outputdict",["deref","dict","key"],["+","depth",1]],["set[","dictmap",["deref","dict","key"],"false"]],["exoutput",["deref","dict","key"],"dict",0,0]],[[["&&",["not","keypad"],["!=",[".","sink","row"],"startrow"]],["tokentruncate","mark"],["return","false"]]]]]],[[["identity","keypad"],["indentadj",-1]]],["mktokil","space",["`","}"]],["set.","sink",["`","endprocNL"],"true"],["set.","sink",["`","hangdent"],"savehang"],["return","true"]],["function","computeMaxKeyLengths",["dict","depth","false","key","keylen"],[[["deref","dictmap","dict"],["return"]]],[[[">",["preadjust","completed","+",1],[".","options","maxElements"]],["return"]]],["set[","dictmap","dict","true"],[[["not",["deref","depths","depth"]],["set[","depths","depth",0]]],["for",["let","lambda",["iter"],["=","iter",["iterate","dict",["`","key"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","key",[".","iter","$value"]],["=","keylen",["length","key"]],[[["<",["deref","depths","depth"],"keylen"],["set[","depths","depth","keylen"]]],[[["eq",["typeof",["deref","dict","key"]],["typeof","dict"]],["computeMaxKeyLengths",["deref","dict","key"],["+","depth",1]]]]]]],[[[">",["deref","depths","depth"],[".","options","maxKeyLength"]],["set[","depths","depth",[".","options","maxKeyLength"]]]],["set[","dictmap","dict","false"]],["function&","outputdict",["dict","depth","false","keypad"],[[[">",["preadjust","completed","+",1],[".","options","maxElements"]],["mktok","$<...>"],["return"]]],["=","keypad",["deref","depths","depth"]],[[["&&",[">","depth",0],["<","keypad",["+",["deref","depths",["-","depth",1]],[".","options","indentSize"]]]],["=","keypad",["+",["deref","depths",["-","depth",1]],[".","options","indentSize"]]]]],[["not",["render","$ "]],["render","$\n","keypad"]]],[[["deref",[".","sink","nocycles"],"dict"],["mktokil","${","$<cyclic>","$}"],["return","true"]]],["set[",[".","sink","nocycles"],"dict","true"],["=","depths",{array:[]}],["=","dictmap",["new","weakmap"]],["=","completed",0],["computeMaxKeyLengths","dict",0],["=","completed",0],["set[","dictmap","dict","true"],["outputdict","dict",0],["set[",[".","sink","nocycles"],"dict","false"],"true"],["function","exobject",["obj","false","str"],["=","str",[".","obj","\\.tostring",["obj"]]],[[["not","str"],["=","str",["tostring","obj"]]]],["mktok","str"]],["function","exlist",["lex1","owner","paramlist","false","ex1","xpar","savetup","savenest"],["=","savetup","owntuple"],["=","savenest",[".","sink","procnesting"]],["set.","sink",["`","procnesting"],0],[[["identity","owner"],["=","owntuple","owner"]]],[[["empty","lex1"],["mktokil","$(","$)"]],["=","xpar","lex1"],["=","ex1",["pop","lex1"]],["mktok","$("],["preadjust",[".","sink","hangdent"],"+",1],["loop","false",[[["&&","paramlist",["not","ex1"]],["=","ex1","local"]]],["exoutput","ex1","xpar"],[[["empty","lex1"],[[["identity","lex1"],["mktokil","space","$.","space","lex1"]]],["break"]]],[[["eq","ex1","local"],["mktokil","space"]],["mktokil","$,","space"]],["=","xpar","lex1"],["=","ex1",["pop","lex1"]]],["preadjust",[".","sink","hangdent"],"-",1],["mktokil","$)"]],["set.","sink",["`","procnesting"],"savenest"],["=","owntuple","savetup"]],["function","exannotation",["lex1"],["exoutput",["cadar","lex1"],"owntuple",0,["deref",[".","grammar","left"],["`","@"]]],["mktok",["`","@"]],[["==",["caadr","lex1"],"`"],["exoutput",["cadadr","lex1"],"owntuple",["deref",[".","grammar","right"],["`","@"]],0]],["mktok","$["],["exoutput",["second","lex1"],"owntuple",0,0],["mktok","$]"]],["function&","exoutput",["expr","owntuple","rbp","lbp","spaceout","false","ex1","lop1","lex1"],[[["not","rbp"],["=","rbp",0]]],[[["not","lbp"],["=","lbp",0]]],[["atom","expr"],[["dictionary","expr"],["exdictionary","expr"]],[["array","expr"],["exarray","expr"]],[["object","expr"],["exobject","expr"]],[["and",["float","expr"],["or",["positive",[".","options","point"]],["zero",[".","options","point"]]]],["mktok",[".","expr","toFixed",["point"]]]],[["and",["negative","expr"],[">","lbp",[".","grammar","rightSign"]]],["mktok","$(",["tostring","expr"],"$)"]],[["symbol","expr"],["mktok","expr"]],[[".","options","quoted"],["mktok",["tostring","expr",{dictionary:{$quote:"true"}}]]],["mktok",["tostring","expr"]]],["=","owntuple","expr"],["=","lop1",["car","expr"]],["=","lex1",["cdr","expr"]],[["and","lex1",["empty","lex1"]],[[".","options","quoted"],["mktok",["tostring","expr",{dictionary:{$quote:"true"}}]]],["mktok",["tostring","expr"]]],[["not",["symbol","lop1"]],["exlist","expr"]],[["apply",["deref","formatter","lop1"],["list","lex1","lop1","rbp","lbp","hookif"]]],[["and",["not",["deref",[".","grammar","left"],"lop1"]],["not",["deref",[".","grammar","right"],"lop1"]],["not",["getproc","lop1"]]],["exlist","expr"]],[["empty","lex1"],["mktok","lop1"],["mktokil","$(","$)"]],[["==","lop1","quote"],["mktok","lop1"],["exoutput","ex1","owntuple",[".","grammar","highBind"],0]],["=","ex1",["pop","lex1"]],[["empty","lex1"],["parens","$("],[["deref",[".","grammar","right"],"lop1"],["mktok","lop1"],["spaces","lop1"],["exoutput","ex1","owntuple",["deref",[".","grammar","right"],"lop1"],0],["parens","$)"]],[["deref",[".","grammar","left"],"lop1"],["exoutput","ex1","owntuple",0,["deref",[".","grammar","left"],"lop1"]],["spaces","lop1"],["mktok","lop1"],["parens","$)"]],["mktok","lop1"],["exlist",["cdr","expr"],"expr"]],[["and",["deref",[".","grammar","right"],"lop1"],["deref",[".","grammar","left"],"lop1"]],["parens","$("],["exoutput","ex1","owntuple",0,["deref",[".","grammar","left"],"lop1"]],["loop","false",["=","ex1",["pop","lex1"]],["spaces","lop1"],["mktok","lop1"],["spaces","lop1"],[["empty","lex1"]],["exoutput","ex1","owntuple",["deref",[".","grammar","right"],"lop1"],["deref",[".","grammar","left"],"lop1"]]],["exoutput","ex1","owntuple",["deref",[".","grammar","right"],"lop1"],0],["parens","$)"]],["mktok","lop1"],["exlist",["cdr","expr"],"expr"]],["function&","exbody",["upbody","inloop","nobrace","false","startin","lastitem"],["function","debugExbody","args",[["identity","false"],["apply",[".",[".","Naan","debug"],"debuglog"],"args"]]],["function","braceOpen","false",[[[".","options","compact"],["mktokil","space","${"]],["nextline"],["mktok","${"]],["indentadj",1]],["function","braceClose",["goleft"],["indentadj",-1],[["&&",["and",[".","options","compact"],["not","goleft"]],[">",[".","sink","incol"],"startin"]],["mktokil","space","$}"]],["nextline"],["mktok","$}"]],["function","mkiftest",["test","didif"],["nextline"],["preadjust",[".","sink","hangdent"],"+",1],[[["==","test",["`",["identity","true"]]],["mktok","test","$else"]],[[["identity","didif"],["mktok","test","$else if","space"]],["mktok","test","$if","space"]],[["==",["car","test"],["`","identity"]],["exoutput",["second","test"],"test",0,0,"true"]],["exoutput","test","test",0,0,"true"]],["preadjust",[".","sink","hangdent"],"-",1]],["function","mkindented",["upbody","inloop","elseafter"],[["||",[">=",["length",["cdr","upbody"]],2],["&&",["atom",["caar","upbody"]],[">=",["length","upbody"],2]],["&&","upbody","inloop"],["&&","elseafter",["tuple",["car","upbody"]],["tuple",["caar","upbody"]]],["dictionary",["car","upbody"]]],["debugExbody","$mkindented 0","upbody","$|","inloop","$|","elseafter"],["braceOpen"],["mkitems","upbody","false","false"],[[["identity","inloop"],["nextline"],["mktok","$break"]]],["braceClose"]],["debugExbody","$mkindented 1","upbody","$|","inloop","$|","elseafter"],["indentadj",1],["mkitems","upbody","false","false"],[[["identity","inloop"],["mktokil","space","$break"]],[["not","upbody"],["mktokil","space","${ }"]]],["indentadj",-1]],["function","mkitems",["upbody","didif","inloop","false","item","fitem","ffitem","fffitem"],[["empty","upbody"]],["set.",["deref",[".","sink","tuplemap"],"upbody"],["`","bp"],"true"],["=","item",["car","upbody"]],["=","fitem",["car","item"]],["=","ffitem",["car","fitem"]],["=","fffitem",["car","ffitem"]],["debugExbody","$mkitems 0","item","$|","fitem","$|","ffitem","$|","fffitem","$>",["cdr","upbody"]],[[["and","didif",["or",["atom","item"],["atom","fitem"],["and",["not",["atom","ffitem"]],["atom","fffitem"]]]],["debugExbody","$mkitems 1","didif"],["nextline"],["mktok","$else"],["mkindented","upbody","false",["&&",["not",["atom","item"]],["not",["atom","fitem"]]]],["=","upbody","false"]],[["or",["atom","item"],["atom","fitem"]],["debugExbody","$mkitems 2"],[[["&&","lastitem",["array","item"]],["mktok","$,"]]],["nextline"],["exoutput","item","upbody",0,0,"true"]],[["atom","ffitem"],["debugExbody","$mkitems 3","didif","inloop",["atom",["cddr","item"]],["tuple",["cdr","upbody"]],["atom",["caaadr","upbody"]]],["mkiftest",["car","item"],"didif"],["mkindented",["cdr","item"],"inloop",["&&",["atom",["cddr","item"]],["tuple",["cdr","upbody"]],["atom",["caaadr","upbody"]]]],["=","didif",["not","inloop"]]],["mkiftest",["caar","item"],"didif"],["debugExbody","$mkitems 4",["cdar","item"],"$|",["cadr","item"],"$|",["caadr","item"]],["mkindented",["cdar","item"],"false",["tuple",["&&",["caaar","item"],["tuple",["cadr","item"]]]]],["mkitems",["cdr","item"],"true","false"],["=","didif","false"]],["=","lastitem","item"],["mkitems",["cdr","upbody"],"didif","inloop"]],["=","startin",[".","sink","incol"]],["debugExbody","$=====","upbody","nobrace"],[["identity","nobrace"],["indentadj",1],["mkitems","upbody","false","inloop"],["indentadj",-1]],["braceOpen"],["mkitems","upbody","false","inloop"],["braceClose",["&&",["==",[".","sink","procnesting"],1],[".","sink","endprocNL"]]]],["=","hookif",{dictionary:{$parens:"parens",$spaces:"spaces",$mktok:"mktok",$mktokil:"mktokil",$nextline:"nextline",$indentadj:"indentadj",$grammar:"grammar",$exlist:"exlist",$exannotation:"exannotation",$exoutput:["function","lambda",["expr","owner","rbp","lbp","spaceout"],[[["not","owner"],["=","owner","owntuple"]]],["exoutput","expr","tuple","rbp","lbp","spaceout"]],$exbody:["function","lambda",["upbody","inloop","nobrace"],["preadjust",[".","sink","procnesting"],"+",1],["exbody","upbody","inloop","nobrace"],["preadjust",[".","sink","procnesting"],"-",1]]}}],["function","uhookproc",["lex1","proctype","false","fname","fbind","parms"],["preadjust",[".","sink","procnesting"],"+",1],["=","fname",["car","lex1"]],[[["&&",["not",[".","options","noComments"]],["not",[".","sink","maproot"]],["deref",["@","fname"],["`","\\.sourcemap"]]],["set.","sink",["`","maproot"],["cons","proctype","lex1"]]]],["=","fbind","lex1"],["mktok",["tostring","proctype",{dictionary:{$noquote:"true"}}]],["mktok","space"],[[["not",["lambda","fname"]],["exoutput","fname","lex1",0,0,"true"]]],["=","parms",["cadr","fbind"]],[[["identity","parms"],[["atom","parms"],["mktok","space","parms"]],["exlist","parms",["cdr","fbind"],"true"]],["mktok","$(","$)"]],["exbody",["cddr","fbind"]],[[["deref",["@","fname"],["`","\\.lingoInit"]],["mktok","$(","$)"]]],[[["and",[">",[".","sink","procnesting"],1],[".","sink","endprocNL"]],["nextline"]]],["preadjust",[".","sink","procnesting"],"-",1],"true"],["function","uhook`",["lex1","lop1","false","ex1"],["parens","$("],["mktok","lop1"],["=","ex1",["car","lex1"]],[[["atom","ex1"],["exoutput","ex1","owntuple",0,0]],["exlist","ex1"]],["parens","$)"],"true"],["function","uhook=",["lex1","lop1"],["parens","$("],[[["tuple",["car","lex1"]],["mktok","quote"]]],["exoutput",["car","lex1"],"owntuple",0,0,"true"],["mktok","space","lop1","space"],["exoutput",["second","lex1"],"owntuple",["deref",[".","grammar","right"],"lop1"],0,"true"],["parens","$)"],"true"],["function","uhookpreadjust",["lex1","lop1","false","target","adjuster","value"],["parens","$("],["=","target",["car","lex1"]],["=","adjuster",["second","lex1"]],["=","value",["third","lex1"]],[[["==","value",1],["mktok","adjuster","adjuster"],["exoutput","target","owntuple",0,["deref",[".","grammar","right"],"adjuster"]]],["exoutput","target","owntuple",0,["deref",[".","grammar","left"],["`","="]]],["mktok","space","adjuster",["`","="],"space"],["exoutput","value","expr",["deref",[".","grammar","right"],["`","="]],0]],["parens","$)"],"true"],["function","uhookpostadjust",["lex1","lop1","false","target","adjuster","value"],["=","target",["car","lex1"]],["=","adjuster",["second","lex1"]],["=","value",["third","lex1"]],[["==","value",1],["parens","$("],["exoutput","target","owntuple",0,["deref",[".","grammar","right"],"adjuster"]],["mktok","adjuster","adjuster"],["parens","$)"],"true"]],["function","uhookbreco",["lex1","lop1"],[["identity","lex1"],["mktok","lop1","space","$:",["tostring",["car","lex1"],{dictionary:{$quote:"true",$nonamespace:"true"}}]]],["mktok","lop1"],"true"],["function","uhookreturn",["lex1","lop1"],[["identity","lex1"],["mktok","lop1","space","$("],["exoutput",["car","lex1"],"owntuple",0,0,"true"],["mktok","$)"]],["mktok","lop1"],"true"],["function","uhookcond",["lex1","lop1"],["mktok","lop1","$("],["preadjust",[".","sink","procnesting"],"+",1],["exbody","lex1"],["preadjust",[".","sink","procnesting"],"-",1],["mktok","$)"],"true"],["function","uhookloop",["lex1","lop1","false","looptag"],["=","looptag",["pop","lex1"]],[[["identity","looptag"],["mktok","lop1","space","$:",["tostring","looptag",{dictionary:{$quote:"true",$nonamespace:"true"}}],"space"]],["mktok","lop1"]],["preadjust",[".","sink","procnesting"],"+",1],["exbody","lex1","true",["not",["cdr","lex1"]]],["preadjust",[".","sink","procnesting"],"-",1],"true"],["function","uhookwhile",["lex1","lop1","false","flex","looptag"],["=","looptag",["pop","lex1"]],[[["identity","looptag"],["mktok","lop1","space","$:",["tostring","looptag",{dictionary:{$quote:"true",$nonamespace:"true"}}],"space"]],["mktok","lop1","space"]],["=","flex",["car","lex1"]],[[["==",["caar","flex"],["`","not"]],["exoutput",["cadar","flex"],"owntuple",0,0,"true"]],["exoutput","flex","owntuple",0,0,"true"]],["preadjust",[".","sink","procnesting"],"+",1],["exbody",["cdr","lex1"],"true",["not",["cddr","lex1"]]],["preadjust",[".","sink","procnesting"],"-",1],"true"],["function","uhookfor",["lex1","lop1","false","flex","looptag","targex","varex","upbody"],["=","flex",["car","lex1"]],["=","looptag",[".",[".","flex",4],1]],["=","targex",[".",[".",[".","flex",3],2],1]],["=","varex",[".",[".",[".",[".","flex",3],2],2],1]],["=","upbody",[".",[".","flex",4],-4]],[[["identity","looptag"],["mktok","lop1","space","$:",["tostring","looptag",{dictionary:{$quote:"true",$nonamespace:"true"}}],"space"]],["mktok","lop1","space"]],["exoutput","varex","owntuple",0,0,"true"],["mktok","space","$in","space"],["exoutput","targex","owntuple",0,0,"true"],["preadjust",[".","sink","procnesting"],"+",1],["exbody","upbody","true",["not",["cdr","upbody"]]],["preadjust",[".","sink","procnesting"],"-",1],"true"],["function","uhookcall",["lex1","lop1","false","callee"],["=","callee",["car","lex1"]],["set.","sink",["`","endprocNL"],"false"],["preadjust",[".","sink","procnesting"],"+",1],["lprAdjust","uhookProc",1],[[["procedure","callee"],["exoutput","callee","owntuple",0,0],["mktokil","space","$("]],["mktokil","lop1","$("],["exoutput","callee","owntuple",0,0],[["not",["empty",["cdr","lex1"]]],["mktok","$,","space"]]],["set.","sink",["`","endprocNL"],"true"],["=","lex1",["cdr","lex1"]],["loop","false",[["empty","lex1"]],["exoutput",["pop","lex1"],"owntuple",0,0],[["empty","lex1"]],["mktok","$,","space"]],["mktokil","$)"],["preadjust",[".","sink","procnesting"],"-",1],"true"],["function","uhookquotient",["lex1","lop1","false","op"],[[["==",["deref",[".","grammar","infix"],["`","/"]],["deref",[".","grammar","infix"],["`","/."]]],["=","op",["`","/"]]],["=","op",["`","/."]]],["parens","$("],["exoutput",["car","lex1"],"owntuple",0,0,"true"],["mktok","space","op","space"],["exoutput",["second","lex1"],"owntuple",["deref",[".","grammar","right"],"op"],0,"true"],["parens","$)"],"true"],["function&","uhookcatch",["lex1","lop1"],["set.","sink",["`","endprocNL"],"false"],["mktok","$try"],["preadjust",[".","sink","procnesting"],"+",1],["exbody",["car","lex1"]],[[["not",["second","lex1"]]],["nextline"],["mktok","$catch"],["exbody",["second","lex1"]]],[[["not",["third","lex1"]]],["nextline"],["mktok","$finally"],["exbody",["third","lex1"]]],["preadjust",[".","sink","procnesting"],"-",1],["set.","sink",["`","endprocNL"],"true"],"true"],["function","uhook.",["lex1","lop1"],["parens","$("],["exoutput",["car","lex1"],"owntuple",0,["deref",[".","grammar","left"],"lop1"]],["mktok",["`","."]],["exoutput",["second","lex1"],"owntuple",0,0],[[["not",["empty",["cddr","lex1"]]],["exlist",["caddr","lex1"]]]],["parens","$)"],"true"],["function","uhookset.",["lex1","lop1"],["parens","$("],["exoutput",["car","lex1"],"owntuple",0,["deref",[".","grammar","left"],"lop1"]],["mktok",["`","."]],["exoutput",["cadadr","lex1"],"owntuple",0,0],["mktok","space",["`","="],"space"],["exoutput",["third","lex1"],"owntuple",["deref",[".","grammar","right"],"lop1"],0],["parens","$)"],"true"],["function","uhookset[",["lex1","lop1","false","expr"],["parens","$("],[[["==",["caar","lex1"],["`","@"]],["exannotation","lex1"]],["exoutput",["car","lex1"],"owntuple",0,["deref",[".","grammar","left"],"$["]],["mktok","$["],["=","expr",["second","lex1"]],[[["||",["empty","expr"],["getproc",["car","expr"]]],["exoutput","expr","owntuple",0,0]],["loop","false",["exoutput",["pop","expr"],"owntuple",0,0],[["empty","expr"]],["mktok","$,"]]],["mktok","$]"]],["mktok","space",["`","="],"space"],["exoutput",["third","lex1"],"owntuple",["deref",[".","grammar","right"],"lop1"],0],["parens","$)"],"true"],["function","uhookderef",["lex1","lop1","false","expr"],["parens","$("],[[["==",["caar","lex1"],["`","@"]],["exannotation","lex1"]],["exoutput",["car","lex1"],"owntuple",0,["deref",[".","grammar","left"],"$["]],["mktok","$["],["=","expr",["second","lex1"]],[[["==","lop1",["`","deref"]],["exoutput","expr","owntuple",0,0]],["loop","false",["exoutput",["pop","expr"],"owntuple",0,0],[["atom","expr"]],["mktok","$,"]]],["mktok","$]"]],[[["not",["empty",["cddr","lex1"]]],["exlist",["caddr","lex1"]]]],["parens","$)"],"true"],["function","uhookref*",["lex1","lop1"],["parens","$("],["exoutput",["car","lex1"],"owntuple",0,0],["mktok","lop1"],["parens","$)"],"true"],["function","uhooknot",["lex1","lop1"],[[["==",["caar","lex1"],["`","=!"]],["return",["uhook=",["cdar","lex1"],["`","=!"]]]]],["parens","$("],["mktok","$!"],["exoutput",["car","lex1"],"owntuple",0,["deref",[".","grammar","right"],"lop1"]],["parens","$)"],"true"],["function","uhookbang",["lex1","lop1"],["parens","$("],["exoutput",["car","lex1"],"owntuple",0,["deref",[".","grammar","postleft"],"lop1"]],["mktok","$!"],["parens","$)"],"true"],["function","commentInject",["comments","false","newrows","readx","added","acom","type","textlines","text","col"],["function","addcol",["row","str","col"],[".","row","push",[{dictionary:{$str:"str",$column:"col"}}]],"row"],["=","newrows",{array:[]}],["=","readx",0],["=","added",0],["for",["let","lambda",["iter"],["=","iter",["iterate","comments",["`","acom"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","acom",[".","iter","$value"]],["=","type",[".","acom",2]],["=","col",[".","acom",1]],["=","textlines",[".",[".","acom",3],"split",["$\n"]]],["while","false",[["not",[">",[".","textlines","length"],0]]],["=","text",[".","textlines","shift","false"]],[[["not",[".","acom",0]],[".","newrows","push",[["addcol",{array:[]},"text",[".","acom",1]]]],["preadjust","added","+",1]],["while","false",[["not",["&&",["<",[".","newrows","length"],["+",[".","acom",0],"added"]],["<","readx",[".",[".","sink","rowtokens"],"length"]]]]],[".","newrows","push",[["deref",[".","sink","rowtokens"],["postadjust","readx","+",1]]]]],[[["||",["<=","type",0],[">=","readx",[".",[".","sink","rowtokens"],"length"]]],[".","newrows","push",[["addcol",{array:[]},"text","col"]]],["preadjust","added","+",1]],[[["<","col",[".","options","commentCol"]],["=","col",[".","options","commentCol"]]]],[".","newrows","push",[["addcol",["deref",[".","sink","rowtokens"],["postadjust","readx","+",1]],"text","col"]]],["=","type",0]]]]]]],["while","false",[["not",["<","readx",[".",[".","sink","rowtokens"],"length"]]]],[".","newrows","push",[["deref",[".","sink","rowtokens"],["postadjust","readx","+",1]]]]],["set.","sink",["`","rowtokens"],"newrows"],["set.","sink",["`","row"],[".","newrows","length"]]],["function","commentMap",["false","locmap","nodecount","sourcemap","output","acom","nodeloc"],["function","remap",["expr","nodeloc"],[["atom","expr"],["preadjust","nodecount","+",1],[".","locmap","push",[[".","nodeloc","first"]]]],["=","nodeloc",["deref",[".","sink","tuplemap"],"expr"]],["remap",["car","expr"],"nodeloc"],[["cdr","expr"],["remap",["cdr","expr"],"nodeloc"]]],[[["not",[".","sink","maproot"]],["return","false"]]],["=","locmap",{array:[]}],["=","nodecount",0],["remap",[".","sink","maproot"]],["=","sourcemap",["deref",["@",[".",[".","sink","maproot"],1]],["`","\\.sourcemap"]]],[[["!=",[".","sourcemap","count"],"nodecount"],["debuglog",[".","$sourcemap mismatch in ","concat",[[".",[".","sink","maproot"],1],"$: "]],"nodecount","$vs",[".","sourcemap","count"]]]],["=","output",{array:[]}],["for",["let","lambda",["iter"],["=","iter",["iterate",[".","sourcemap","comments"],["`","acom"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","acom",[".","iter","$value"]],["=","nodeloc",["deref","locmap",[".","acom",0]]],[".","output","push",[["list",[".","nodeloc",0],[".","nodeloc",1],[".","acom",1],[".","acom",2]]]]]]],"output"],["function","indextuples",["false","remaining"],["function","enqueue",["expr","false","node"],[["atom","expr"],"expr"],["=","node",{dictionary:{$tuple:"expr",$sink:"sink"}}],[".",[".","sink","mirrors"],"push",["node"]],[".","remaining","push",["node"]],["set[",[".","sink","tuplemap"],"expr","node"]],["function","dequeue",["false","node"],["while","false",[["not",[">",[".","remaining","length"],0]]],["=","node",[".","remaining","pop","false"]],["set.","node",["`","car"],["enqueue",["car",[".","node","tuple"]]]],["set.","node",["`","cdr"],["enqueue",["cdr",[".","node","tuple"]]]]]],["=","remaining",{array:[]}],["set.","sink",["`","mirrors"],{array:[]}],["set.","sink",["`","tuplemap"],["new","weakmap"]],["set.","sink",["`","mirroroot"],["enqueue","origexpr"]],["dequeue"]],["function","tuplelocupdate",["false","tuplex","data","rowdex","col","nodemap"],["function","childloc",["node","false","ex1","lex1","loc","retloc"],[[["deref","nodemap","node"],["return",["deref","nodemap","node"]]]],["set[","nodemap","node","true"],["=","lex1","node"],["while","false",[["not",["eq",[".","lex1","sink"],"sink"]]],["=","ex1",[".","lex1","car"]],[[["eq",[".","ex1","sink"],"sink"],["=","loc",["childloc","ex1"]]],["=","loc","false"]],[[["identity","loc"],[[["not",[".","lex1","first"]],["set.","lex1",["`","first"],[".","loc","first"]],["set.","lex1",["`","last"],[".","loc","last"]]],["set.","lex1",["`","first"],["earlier",[".","loc","first"],[".","lex1","first"]]],["set.","lex1",["`","last"],["later",[".","loc","last"],[".","lex1","last"]]]]]],[[["not","retloc"],["=","retloc",{dictionary:{$first:[".","lex1","first"],$last:[".","lex1","last"]}}]],[[[".","lex1","first"],["set.","retloc",["`","first"],["earlier",[".","lex1","first"],[".","retloc","first"]]],["set.","retloc",["`","last"],["later",[".","lex1","last"],[".","retloc","last"]]]]]],["=","lex1",[".","lex1","cdr"]]],["=","lex1","node"],["while","false",[["not",["eq",[".","lex1","sink"],"sink"]]],[[["not",[".","lex1","first"]],["set.","lex1",["`","first"],[".","retloc","first"]],["set.","lex1",["`","last"],[".","retloc","last"]]]],["=","lex1",[".","lex1","cdr"]]],["set[","nodemap","node","retloc"],"retloc"],["=","tuplex",0],["while","false",[["not",["<","tuplex",[".",[".","sink","mirrors"],"length"]]]],["=","data",["deref",[".","sink","mirrors"],["postadjust","tuplex","+",1]]],["set.","data",["`","first"],"undefined"]],["=","rowdex",0],["while","false",[["not",["<=","rowdex",[".","sink","row"]]]],["for",["let","lambda",["iter"],["=","iter",["iterate",["deref",[".","sink","rowtokens"],"rowdex"],["`","col"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","col",[".","iter","$value"]],["=","data",["deref",[".","sink","tuplemap"],[".","col","tuple"]]],[[["not",[".","data","first"]],["set.","data",["`","first"],["list","rowdex",[".","col","column"]]]]],["set.","data",["`","last"],["list","rowdex",["+",[".","col","column"],["length",[".","col","str"]]]]]]]],["preadjust","rowdex","+",1]],["=","nodemap",["new","weakmap"]],["childloc",[".","sink","mirroroot"]],"true"],["function","indexbps",["false","tuplex","node"],["set.","sink",["`","breaks"],{array:[]}],["=","tuplex",0],["while","false",[["not",["<","tuplex",[".",[".","sink","mirrors"],"length"]]]],["=","node",["deref",[".","sink","mirrors"],"tuplex"]],[[[".","node","bp"],[".",[".","sink","breaks"],"push",["node"]]]],["preadjust","tuplex","+",1]],[".",[".","sink","breaks"],"sort",[["function","lambda",["a","b"],["=","compare",["<=>",[".",[".","a","first"],0],[".",[".","b","first"],0]]],[[["==","compare",0],["=","compare",["<=>",[".",[".","a","first"],1],[".",[".","b","first"],1]]]]],"compare"]]]],["function","updatecheck",["false","update","comments"],[[["not",[".","sink","tuplemap"]],["set.","sink",["`","rowtokens"],{array:[{array:[]}]}],["indextuples"],["=","update","true"]]],[[["||",["<",[".",[".","sink","rowtokens"],"length"],1],["&&",["==",[".",[".","sink","rowtokens"],"length"],1],["<",[".",["deref",[".","sink","rowtokens"],0],"length"],1]]],["exoutput","origexpr","origexpr",0,0,"true"]]],[["identity","update"],["tuplelocupdate"],["indexbps"],[[".","sink","maproot"],["=","comments",["commentMap"]],[["identity","comments"],["commentInject","comments"],["tuplelocupdate"]]]]],["set.","unparser",["`","dumptuples"],["function","dumptuples",["false","tuplex","data","bp","mismatch","summary"],["updatecheck"],["=","tuplex",0],["debuglog","$=====tuples====="],["while","false",[["not",["<","tuplex",[".",[".","sink","mirrors"],"length"]]]],["=","data",["deref",[".","sink","mirrors"],"tuplex"]],[[["eq",["deref",[".","sink","tuplemap"],[".","data","tuple"]],"data"],["=","mismatch","$"]],["=","mismatch","$mismatch"]],[[[".","data","bp"],["=","bp","$bp"]],["=","bp","$  "]],["=","summary",[".",["tostring",[".","data","tuple"]],"substr",[0,80]]],["debuglog",["prepad","tuplex",4],["prepad",[".","data","first"],9],["prepad",[".","data","last"],9],"bp","mismatch","summary"],["preadjust","tuplex","+",1]]]],["set.","unparser",["`","dumptokens"],["function","dumptokens",["false","rowdex","data","summary","col"],["updatecheck"],["=","rowdex",0],["debuglog","$=====tokens====="],["while","false",[["not",["<=","rowdex",[".","sink","row"]]]],["debuglog","$row","rowdex"],["for",["let","lambda",["iter"],["=","iter",["iterate",["deref",[".","sink","rowtokens"],"rowdex"],["`","col"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","col",[".","iter","$value"]],["=","data",["deref",[".","sink","tuplemap"],[".","col","tuple"]]],["=","summary",[".",["tostring",[".","col","tuple"]],"substr",[0,80]]],["debuglog",["prepad",[".","col","column"],6],["prepad",[".","col","str"],9],"$  ","summary"]]]],["preadjust","rowdex","+",1]]]],["set.","unparser",["`","breakpoints"],["function","breakpoints",["false","result","data"],["updatecheck"],["=","result",{array:[]}],["for",["let","lambda",["iter"],["=","iter",["iterate",[".","sink","breaks"],["`","data"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","data",[".","iter","$value"]],[".","result","push",[{dictionary:{$first:[".","data","first"],$last:[".","data","last"],$tuple:[".","data","tuple"]}}]]]]],"result"]],["set.","unparser",["`","findbreak"],["function","findbreak",["location","false","data"],["updatecheck"],["for",["let","lambda",["iter"],["=","iter",["iterate",[".","sink","breaks"],["`","data"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","data",[".","iter","$value"]],[[["&&",["<=",["car","location"],["car",[".","data","first"]]],["||",["not",["second","location"]],["<=",["second","location"],["second",[".","data","first"]]]]],["return",{dictionary:{$first:[".","data","first"],$last:[".","data","last"],$tuple:[".","data","tuple"]}}]]]]]],"false"]],["set.","unparser",["`","findtoken"],["function","findtoken",["location","false","col"],["updatecheck"],["for",["let","lambda",["iter"],["=","iter",["iterate",["deref",[".","sink","rowtokens"],["car","location"]],["`","col"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","col",[".","iter","$value"]],[[["||",["not",["second","location"]],["&&",[">=",["second","location"],[".","col","column"]],["<",["second","location"],["+",[".","col","column"],["length",[".","col","str"]]]]]],["return",{dictionary:{$first:[".","col","column"],$last:["+",[".","col","column"],["length",[".","col","str"]]],$str:[".","col","str"],$symbol:[".","col","symbol"],$tuple:[".","col","tuple"]}}]]]]]],"false"]],["set.","unparser",["`","findtuple"],["function","findtuple",["expr","false","data"],["updatecheck"],["=","data",["deref",[".","sink","tuplemap"],"expr"]],[["identity","data"],{dictionary:{$first:[".","data","first"],$last:[".","data","last"],$tuple:[".","data","tuple"]}}]]],["set.","unparser",["`","setmarks"],["function","setmarks",["dict","false","mark","marklen"],["set.","sink",["`","maxmarklen"],0],["set.","sink",["`","markdict"],"dict"],["for",["let","lambda",["iter"],["=","iter",["iterate","dict",["`","mark"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","mark",[".","iter","$value"]],["=","marklen",[".",["tostring",["deref","dict","mark"]],"length"]],[[["<",[".","sink","maxmarklen"],"marklen"],["set.","sink",["`","maxmarklen"],"marklen"]]]]]]]],["set.","unparser",["`","string"],["function","string",["firstloc","lastloc","soptions","false","rowdex","row","col","found","outstr","colpos","lineno","linepad"],["updatecheck"],[[["numeric",[".","soptions","lineNumbers"]],["=","lineno",["toint",[".","soptions","lineNumbers"]]],["=","linepad",["length",["+",["+",["tostring",["+","lineno",[".",[".","sink","rowtokens"],"length"]]],[".","sink","maxmarklen"]],1]]]]],[[["dictionary","firstloc"],["=","lastloc",[".","firstloc","last"]],["=","firstloc",[".","firstloc","first"]]]],[[["identity","firstloc"],[[["not",["apply","numeric","firstloc"]],["return","false"]]],["=","rowdex",["car","firstloc"]],[["identity","lineno"],["preadjust","lineno","+","rowdex"]]],["=","rowdex",0]],["=","found",["not",["&&","firstloc",["second","firstloc"]]]],[[["&&","lastloc",["not",["apply","numeric","lastloc"]]],["return","false"]]],["loop","false",[["||",[">=","rowdex",[".",[".","sink","rowtokens"],"length"]],["&&","lastloc",[">","rowdex",["car","lastloc"]]]]],["=","row",["deref",[".","sink","rowtokens"],"rowdex"]],[[["identity","outstr"],["=","outstr",[".","outstr","concat",["$\n"]]]],["=","outstr","$"]],[[["identity","lineno"],["=","outstr",[".","outstr","concat",[["prepad",["postadjust","lineno","+",1],"linepad"],"$ "]]],[[".","sink","maxmarklen"],[["deref",[".","sink","markdict"],"lineno"],["=","outstr",[".","outstr","concat",[["deref",[".","sink","markdict"],"lineno"],"$ "]]]],["=","outstr",[".","outstr","concat",[[".","space","repeat",[["+",[".","sink","maxmarklen"],1]]]]]]]]],["=","colpos",0],["for",["let","lambda",["iter"],["=","iter",["iterate","row",["`","col"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","col",[".","iter","$value"]],[[["not","found"],["=","colpos",["second","firstloc"]],[[["<=",["+",[".","col","column"],["length",[".","col","str"]]],["second","firstloc"]],["continue"]]],["=","found","true"]]],[["&&","lastloc",["second","lastloc"],[">=","rowdex",["car","lastloc"]],[">=",[".","col","column"],["second","lastloc"]]]],[[["<","colpos",[".","col","column"]],["=","outstr",[".","outstr","concat",[[".","space","repeat",[["-",[".","col","column"],"colpos"]]],[".","col","str"]]]]],["=","outstr",[".","outstr","concat",[[".","col","str"]]]]],["=","colpos",["+",[".","col","column"],["length",[".","col","str"]]]]]]],["preadjust","rowdex","+",1]],"outstr"]],"unparser"]),e._AddPropertyList("LingoUnparseInit",[["$.lingoInit","true"]]),e._SetBindingList("LingoUnparseInit",["function","LingoUnparseInit",["false","manifest"],["=","manifest",["`",["LingoPrinter","LingoUnparser","LingoUnparseInit"]]],[".",[".","Naan","module"],"build",[[".","module","id"],"$Unparse",["function","lambda",["modobj","compobj"],["set.","compobj",["`","manifest"],"manifest"],[".",[".","Naan","module"],"letinherit",["$Lib"]],["set.",[".","modobj","exports"],["`","Printer"],"LingoPrinter"],["set.",[".","modobj","exports"],["`","LingoUnparser"],"LingoUnparser"]]]]]),e._Execute(["LingoUnparseInit"]),e._SetNamespace(t.slice(1),!0),e._SetNamespace("CLI"),e._Execute([".",[".","Naan","module"],"letinherit",["$Lang_Lingo"]]),e._SetBindingList("Utils",["closure","Utils",["options","false","utils","registry","upcache"],["=","utils",["new","object","this"]],[[["not","options"],["=","options",{dictionary:{}}]]],[[["not",[".","options","cacheSize"]],["set.","options",["`","cacheSize"],50]]],["=","registry",[".",[".",[".",["modlist"],"Lib"],"exports"],"Registry"]],["set.","utils",["`","calculateDialects"],["function","calculateDialects",["expr","false","nsmap","nslist","ns","dialect","langs"],["function","travProc",["trav"],[[["&&",["symbol","trav"],"trav"],[[["not",["deref","nsmap",[".","trav","namespace"]]],["push",[".","trav","namespace"],"nslist"],["set[","nsmap",[".","trav","namespace"],"true"]]],["return"]]],["while","false",[["not",["tuple","trav"]]],["travProc",["car","trav"]],["=","trav",["cdr","trav"]]]],["=","nsmap",["new","weakmap"]],["travProc","expr"],["for",["let","lambda",["iter"],["=","iter",["iterate","nslist",["`","ns"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","ns",[".","iter","$value"]],["=","dialect",[".","registry","findNamespace",["ns"]]],[[["&&","dialect",["not",["member","dialect","langs"]]],["push","dialect","langs"]]]]]],"langs"]],["set.","utils",["`","unparseInfo"],["function","unparseInfo",["expr","false","up"],[[["not","upcache"],["=","upcache",["new","nonce"]],["set.","upcache",["`","map"],["new","weakmap"]],["set.","upcache",["`","lru"],{array:[]}]],["=","up",["deref",[".","upcache","map"],"expr"]],[["&&","up",["!==",["deref","lru",["-",[".","lru","length"],1]],"up"]],["set.","upcache",["`","lru"],[".",[".","upcache","lru"],"filter",[["function","lambda",["entry"],["!==","entry","up"]]]]],[".",[".","upcache","lru"],"push",["up"]]]],[[["not","up"],["=","up",{dictionary:{$expression:"expr",$dialects:[".","utils","calculateDialects",["expr"]]}}],["set.","up",["`","dialect"],[".",[".","up","dialects"],0]],[[["not",[".","up","dialect"]],["set.","up",["`","dialect"],[".","registry","findName",[[".",[".","registry","dialects","false"],0]]]]]],[[[".","up","dialect"],["set.","up",["`","unparser"],[".",[".","up","dialect"],"unparse",["expr"]]]]],["set[",[".","upcache","map"],"expr","up"],[".",[".","upcache","lru"],"push",["up"]],[[">",[".",[".","upcache","lru"],"length"],[".","options","cacheSize"]],["set[",[".","upcache","map"],[".",[".",[".","upcache","lru"],"shift","false"],"expression"],"undefined"]]]],"up"]],["set.","utils",["`","unparser"],["function","unparser",["expr"],[".",["unparseInfo","expr"],"unparser"]]],["set.","utils",["`","sourcelist"],["function","sourcelist",["procdef","start","end","marks","false","up"],["=","up",[".","utils","unparser",["procdef"]]],[".","up","setmarks",["marks"]],[[["identity","start"],["=","start",["list",["-","start",1]]],[["identity","end"],["=","end",["list",["-","end",1]]]],["=","end","start"]]],[".","up","string",["start","end",{dictionary:{$lineNumbers:1}}]]]],["set.","utils",["`","symns"],["function","symns",["name","ns"],[[["symbol","name"],["return","name"]]],[[["not","ns"],["=","ns",[".",["nsactive"],0]]]],[".","ns","lookup",["name"]]]],["set.","utils",["`","findns"],["function","findns",["nstr","false","ns"],[[["not",["string","nstr"]],["return","nstr"]]],["for",["let","lambda",["iter"],["=","iter",["iterate",["nsactive"],["`","ns"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","ns",[".","iter","$value"]],[[["==","nstr",["namespace","ns"]],["return","ns"]]]]]],["for",["let","lambda",["iter"],["=","iter",["iterate",["nsactive","true"],["`","ns"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","ns",[".","iter","$value"]],[[["==","nstr",["namespace","ns"]],["return","ns"]]]]]],"false"]],["set.","utils",["`","makeLocation"],["function","makeLocation",["sym","task","false","start"],[[["identity","task"],["=","tuplespec",[".",[".","utils","unparser",[["getproc","sym"]]],"findtuple",["task"]]],["=","start",["+",[".",[".","tuplespec","first"],0],1]]]],["list",[".",[".","sym","namespace"],"tostring"],"sym","start"]]],["set.","utils",["`","resolveLocation"],["function","resolveLocation",["location","symbols","false","path","procname","procsym","ns","procdef"],["function","pathmatch",["parent","path","false","segment"],[[["empty","path"],["return","parent"]]],["=","segment",["tostring",["pop","path"]]],["for",["let","lambda",["iter"],["=","iter",["iterate",["deref",["@","parent"],["`","\\.children"]],["`","child"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","child",[".","iter","$value"]],[[["==",["tostring","child"],"segment"],["return",["pathmatch","child","path"]]]]]]],"false"],["function","findsym",["name"],["for",["let","lambda",["iter"],["=","iter",["iterate","symbols",["`","sym"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","sym",[".","iter","$value"]],[[["==","sym","name"],["return","sym"]]]]]],"false"],["=","path",[".","location",1]],[[["symbol","path"],["=","procsym","path"]],[[["tuple","path"],["=","procname",["car","path"]]],["=","procname","path"]],["=","procsym",["findsym","procname"]],[[["not","procsym"],[[".","location",0],[[["string",[".","location",0]],["=","ns",[".","utils","findns",[[".","location",0]]]]],["=","ns",[".","location",0]]],["=","procsym",[".","utils","symns",["procname","ns"]]]],["=","procsym",["interned","procname"]]]],[["tuple","path"],["=","procsym",["pathmatch","procsym",["cdr","path"]]]]],["=","procdef",["getproc","procsym"]],[[["||",["not",["tuple","procdef"]],["not",["cdddr","procdef"]]],["=","procdef","false"]]],"procdef"]],["set.","utils",["`","breakLocation"],["function","breakLocation",["location","symbols","false","procdef"],["=","procdef",[".","utils","resolveLocation",["location","symbols"]]],[[["not","procdef"],["return"]]],[[".","location",2],[".",[".",[".","utils","unparser",["procdef"]],"findbreak",[["list",["-",[".","location",2],1]]]],"tuple"]],["cdddr","procdef"]]],["set.","utils",["`","locationString"],["function","locationString",["location","false","output"],[[["symbol",[".","location",1]],["=","output",[".","utils","procname",[[".","location",1]]]]],[["tuple",[".","location",1]],["=","output",[".",["new","array",[".","location",1]],"join",["$."]]]],["=","output",["tostring",[".","location",1]]]],[[[".","location",0],["=","output",[".",[".","location",0],"concat",["$::","output"]]]]],[[[".","location",2],["=","output",[".","output","concat",["$:",[".","location",2]]]]]],[[[".","location",3],["=","output",[".","output","concat",["$:",[".","location",3]]]]]],"output"]],["set.","utils",["`","alignColumns"],["function","alignColumns",["lex1","widths","false","ex1"],["function","calcrow",["row","false","col","coldex"],["function","cf",["field","prev","false","width"],["=","width",[".",["tostring","field"],"length"]],[[["<","width","prev"],["=","width","prev"]]],"width"],["=","coldex",0],["for",["let","lambda",["iter"],["=","iter",["iterate","row",["`","col"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","col",[".","iter","$value"]],[[["not",["deref","widths","coldex"]],["set[","widths","coldex",0]]],["set[","widths","coldex",["cf","col",["deref","widths","coldex"]]],["preadjust","coldex","+",1]]]]],["=","widths",{array:[]}],["for",["let","lambda",["iter"],["=","iter",["iterate","lex1",["`","ex1"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","ex1",[".","iter","$value"]],["calcrow","ex1"]]]],"widths"]],["set.","utils",["`","proclist"],["function","proclist",["name","false","result"],["while","false",[["not","name"]],["=","result",["cons","name","result"]],["=","name",["deref",["@","name"],["`","\\.parent"]]]],"result"]],["set.","utils",["`","procname"],["function","procname",["name"],[".",[".",[".",["proclist","name"],"toarray"],"map",[["function","lambda",["x"],["tostring","x"]]]],"join",["$."]]]],["set.","utils",["`","procstring"],["function","procstring",["proc","false","output","parm"],[[["||",["not",[".","proc",2]],["not",["car",[".","proc",2]]]],["return",[".",["tostring",[".","proc",0]],"concat",["$ ",[".","proc",1],"$()"]]]]],[[["atom",[".","proc",2]],["return",[".",["tostring",[".","proc",0]],"concat",["$ ",[".","proc",1],"$ ",[".","proc",2]]]]]],["=","output",[".",["tostring",[".","proc",0]],"concat",["$ ",[".","proc",1],"$("]]],["for",["let","lambda",["iter"],["=","iter",["iterate",[".","proc",2],["`","parm"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","parm",[".","iter","$value"]],[["not","parm"]],["=","output",[".","output","concat",["parm","$, "]]]]]],["=","output",[".","output","slice",[0,-2]]],[".","output","concat",["$)"]]]],["set.","utils",["`","callstring"],["function","callstring",["proc","dons","false","output","parm","name"],["=","name",["procname",[".","proc",1]]],[[["identity","dons"],["=","name",[".",[".",[".",[".","proc",1],"namespace"],"tostring"],"concat",["$::","name"]]]]],[["||",["not",[".","proc",2]],["not",["car",[".","proc",2]]]],[".","name","concat",["$()"]]],[["atom",[".","proc",2]],[".","name","concat",["space",[".","proc",2]]]],["=","output",[".","name","concat",["$("]]],["for",["let","lambda",["iter"],["=","iter",["iterate",[".","proc",2],["`","parm"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","parm",[".","iter","$value"]],[["not","parm"]],["=","output",[".","output","concat",[["car","parm"],"$, "]]]]]],["=","output",[".","output","slice",[0,-2]]],[".","output","concat",["$)"]]]],["set.","utils",["`","getnumargs"],["function","getnumargs",["cmdargs","false","args"],["=","args",[".","cmdargs","match",[["RegExp","$^\\s*(\\d+)\\s*$"]]]],[[["identity","args"],["return",["toint",["deref","args",1]]]]],["=","args",[".","cmdargs","match",[["RegExp","$^\\s*(\\d+)\\s*:\\s*(\\d+)\\s*$"]]]],[[["identity","args"],["return",["list",["`","range"],["toint",["deref","args",1]],["toint",["deref","args",2]]]]]],["=","args",[".","cmdargs","match",[["RegExp","$\\d+","$g"]]]],[[["identity","args"],["return",["cons",["`","set"],["totuple",[".","args","map",[["function","lambda",["nstr"],["toint","nstr"]]]]]]]]],"false"]],["set.","utils",["`","getnameargs"],["function","getnameargs",["cmdargs","false","args"],["=","args",[".","cmdargs","match",[["RegExp","$^\\s*(\\S+)\\s*$"]]]],[[["identity","args"],["return",["deref","args",1]]]],["=","args",[".","cmdargs","match",[["RegExp","$\\S+","$g"]]]],[[["identity","args"],["return",["totuple","args"]]]],"false"]],["set.","utils",["`","getprocarg"],["function","getprocarg",["cmdargs","false","args","procpath"],["=","args",[".","cmdargs","match",[["RegExp","$^(\\S*::)?([^\\s:]+)(:\\s*\\d*)?(:\\s*\\d*)?\\s*$"]]]],[["identity","args"],["=","procpath",[".",["deref","args",2],"split",["$."]]],[[["==",[".","procpath","length"],1],["=","procpath",[".","procpath",0]]],["=","procpath",["totuple","procpath"]]],["list",[".",["deref","args",1],"substring",[0,["-",[".",["deref","args",1],"length"],2]]],"procpath",["toint",[".",[".",["deref","args",3],"substring",[1]],"trim","false"]],["toint",[".",[".",["deref","args",4],"substring",[1]],"trim","false"]]]],"false"]],"utils"]),e._SetBindingList("Info",["closure","Info",["console","false","info"],["=","info",["new","object","this"]],["set.","info",["`","utils"],["Utils"]],["set.","info",["`","options"],{dictionary:{$indent:4,$wrapMinAmount:29,$wrapMaxCol:79,$maxColWidth:60,$maxSymColWidth:40}}],["function","plist",["itemlist","depth","false","item","first","width"],["=","first","$"],["for",["let","lambda",["iter"],["=","iter",["iterate","itemlist",["`","item"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","item",[".","iter","$value"]],["=","width",[".",["tostring","item"],"length"]],[[["&&",[">",["+","width",[".",[".","console","printloc","false"],1]],[".",[".","info","options"],"wrapMaxCol"]],[">=",[".",[".","console","printloc","false"],1],[".",[".","info","options"],"wrapMinAmount"]]],[".","console","print",["$,\n"]],["=","first",[".","space","repeat",[["*",[".",[".","info","options"],"indent"],"depth"]]]]]],[".","console","print",["first","item"]],["=","first","$, "]]]]],["function","prows",["rows","depth","widths","false","coldex","row"],["for",["let","lambda",["iter"],["=","iter",["iterate","rows",["`","row"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","row",[".","iter","$value"]],[".","console","print",[[".","space","repeat",[["*",[".",[".","info","options"],"indent"],"depth"]]]]],["=","coldex",0],["for",["let","lambda",["iter"],["=","iter",["iterate","row",["`","col"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","col",[".","iter","$value"]],[[[">",[".","col","length"],["deref","widths","coldex"]],[".","console","print",[[".","col","substring",[0,["-",["deref","widths","coldex"],1]]],"$","space"]]],[".","console","print",["col",[".","space","repeat",[["+",["-",["deref","widths","coldex"],[".","col","length"]],1]]]]]],["preadjust","coldex","+",1]]]],[".","console","newline","false"]]]]],["function","printmods",["onemod","false","modid"],["function","pexports",["mod","false","xid","maxwidth"],[".","console","printline",[[".","space","repeat",[[".",[".","info","options"],"indent"]]],"$exports:"]],["=","maxwidth",0],["for",["let","lambda",["iter"],["=","iter",["iterate",[".","mod","exports"],["`","xid"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","xid",[".","iter","$value"]],[[["<","maxwidth",[".",["tostring","xid"],"length"]],["=","maxwidth",[".",["tostring","xid"],"length"]]]]]]],["for",["let","lambda",["iter"],["=","iter",["iterate",[".","mod","exports"],["`","xid"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","xid",[".","iter","$value"]],[".","console","print",[[".","space","repeat",[["*",[".",[".","info","options"],"indent"],2]]],"xid",[".","space","repeat",[["-","maxwidth",[".",["tostring","xid"],"length"]]]],"$: "]],[[["symbol",["deref",[".","mod","exports"],"xid"]],[".","console","print",[[".",[".","info","utils"],"procstring",[["getproc",["deref",[".","mod","exports"],"xid"]]]]]]],[".","console","print",[["deref",[".","mod","exports"],"xid"]]]],[".","console","newline","false"]]]]],["function","pcomponents",["mod","false","xid","maxwidth"],["printline",[".","space","repeat",[[".",[".","info","options"],"indent"]]],"$components:"],["=","maxwidth",0],["for",["let","lambda",["iter"],["=","iter",["iterate",[".","mod","components"],["`","xid"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","xid",[".","iter","$value"]],[[["<","maxwidth",[".",["tostring","xid"],"length"]],["=","maxwidth",[".",["tostring","xid"],"length"]]]]]]],["for",["let","lambda",["iter"],["=","iter",["iterate",[".","mod","components"],["`","xid"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","xid",[".","iter","$value"]],[".","console","print",[[".","space","repeat",[["*",[".",[".","info","options"],"indent"],2]]],"xid",[".","space","repeat",[["-","maxwidth",[".",["tostring","xid"],"length"]]]],"$: "]],[[["not",[".",["deref",[".","mod","components"],"xid"],"manifest"]],[".","console","print",["$<empty manifest>"]]],["plist",[".",["deref",[".","mod","components"],"xid"],"manifest"],3]],[".","console","newline","false"]]]]],["function","pdetailmod",["mod"],[".","console","printline",[[".","mod","id"]]],[[["\\.*",[".","mod","exports"]],["pexports","mod"]]],[["\\.*",[".","mod","components"]],["pcomponents","mod"]]],["function","psummarymod",["mod"],[".","console","printline",[[".","mod","id"]]],[[["\\.*",[".","mod","exports"]],[".","console","print",[[".","space","repeat",[[".",[".","info","options"],"indent"]]],"$exports: "]],["plist",[".","mod","exports"],3],[".","console","newline","false"]]],[["\\.*",[".","mod","components"]],[".","console","print",[[".","space","repeat",[[".",[".","info","options"],"indent"]]],"$components: "]],["plist",[".","mod","components"],3],[".","console","newline","false"]]],[["identity","onemod"],["pdetailmod","onemod"]],["for",["let","lambda",["iter"],["=","iter",["iterate",[".",[".","Naan","module"],"modlist","false"],["`","modid"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","modid",[".","iter","$value"]],["psummarymod",["deref",[".",[".","Naan","module"],"modlist","false"],"modid"]]]]]],["function","printsyms",["syms","false","sym","rows","row","coldex","nprops","bound","widths"],["=","rows",["cons",["list","$symbol","$namespace","$value","$procedure","$attr."]]],["for",["let","lambda",["iter"],["=","iter",["iterate","syms",["`","sym"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","sym",[".","iter","$value"]],["=","bound",["getproc","sym"]],[[["tuple","bound"],["=","bound",["tostring",[".","bound",0]]]],[["not","bound"],["=","bound","$"]]],[[["rest","sym"],["=","nprops",["prepad",["length",["rest","sym"]],3]]],["=","nprops","$"]],["push",["list",["tostring","sym"],["namespace",["namespace","sym"]],["tostring",["car","sym"]],"bound","nprops"],"rows"]]]],["=","widths",[".",[".","info","utils"],"alignColumns",["rows"]]],["=","coldex",0],["while","false",[["not",["<","coldex",[".","widths","length"]]]],[[[">",["deref","widths","coldex"],[".",[".","info","options"],"maxSymColWidth"]],["set[","widths","coldex",[".",[".","info","options"],"maxSymColWidth"]]]],["push",[".","$-","repeat",[["deref","widths",["postadjust","coldex","+",1]]]],"row"]],["=","row",["reverse","row"]],["=","rows",["reverse","rows"]],["=","rows",["cons",["car","rows"],"row",["cdr","rows"]]],["prows","rows",1,"widths"]],["set.","info",["`","setDefloc"],["function","setDefloc",["location"],["set.","info",["`","defloc"],"location"]]],["function","getDefproc",["cmdargs","nochain","false","location","procdef"],[[["||",["not","cmdargs"],["==","cmdargs","$"]],["=","location",[".","info","defloc"]],[["identity","nochain"],["=","location",["list",[".","location",0],["car",[".","location",1]]]]]]],[[["not","location"],["=","location",[".",[".","info","utils"],"getprocarg",["cmdargs"]]]]],[[["not","location"],[".","console","printline",['$error: "',"cmdargs",'$" not a valid procedure specification']],["return"]]],["=","procdef",[".",[".","info","utils"],"resolveLocation",["location"]]],[[["not","procdef"],[[["||",["not","cmdargs"],["==","cmdargs","$"]],["=","cmdargs",[".",[".","info","utils"],"locationString",["location"]]]]],[".","console","printline",['$error: procedure "',"cmdargs",'$" not found']],["return","false"]]],["list","location","procdef"]],["set.","info",["`","infoproc"],["function","infoproc",["cmdargs","false","location","procdef","child"],["=",["location","procdef"],["getDefproc","cmdargs","true"]],[[["not","location"],["return"]]],[".","console","printline",[[".",[".","info","utils"],"locationString",["location"]]]],["=","syms",["reverse",["deref",["@",[".","procdef",1]],["`","\\.children"]]]],["for",["let","lambda",["iter"],["=","iter",["iterate","syms",["`","child"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","child",[".","iter","$value"]],["=","procdef",["getproc","child"]],[[["not","procdef"],["continue"]]],[".","console","printline",[[".","space","repeat",[[".",[".","info","options"],"indent"]]],[".",[".","info","utils"],"procstring",["procdef"]]]]]]]]],["set.","info",["`","infolist"],["function","infolist",["cmdargs","false","location","procdef","start","end"],["=",["location","procdef"],["getDefproc","cmdargs"]],[[["not","location"],["return"]]],["=","start",[".","location",2]],["=","end",[".","location",3]],[[["&&","start",["not","end"]],["=","end",["+","start",10]]]],[".","console","print",[[".",[".","info","utils"],"sourcelist",["procdef","start","end"]]]]]],["set.","info",["`","infomod"],["function","infomod",["cmdargs","false","modlist","modid","mod"],[[["not","modlist"],["=","modlist",[".",[".","info","utils"],"getnameargs",["cmdargs"]]]]],[["not","modlist"],["printmods"]],[[["string","modlist"],["=","modlist",["list","modlist"]]]],["for",["let","lambda",["iter"],["=","iter",["iterate","modlist",["`","modid"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","modid",[".","iter","$value"]],["=","mod",["deref",[".",[".","Naan","module"],"modlist","false"],"modid"]],[[["identity","mod"],["printmods","mod"]],[".","console","printline",['$error: module "',"modid",'$" not found']]]]]]]],["set.","info",["`","infofind"],["function","infofind",["cmdargs","false","args","pattern","ns","found"],["=","args",[".","cmdargs","match",[["RegExp","$^\\s*(\\S+)\\s*$"]]]],[[["identity","args"],["=","pattern",["deref","args",1]]],["=","args",[".","cmdargs","match",[["RegExp","$\\S+","$g"]]]],["=","pattern",["deref","args",0]],[["&&",["==",[".","args","length"],3],["==",["deref","args",1],"$in"]],["=","ns",[".",[".","info","utils"],"findns",[["deref","args",2]]]],[["not","ns"],[".","console","printline",['$error: namespace "',["deref","args",2],'$" not found']],["return"]]],[["&&",["==",[".","args","length"],2],["==",["deref","args",1],"$all"]],["=","ns","true"]],[".","console","printline",['$error: cannot interpret "',"cmdargs",'$"']],["return"]],["catch",[[[".","pattern","match",[["RegExp",'$".*"']]],["=","found",["exists",["RegExp",[".","$^","concat",[[".","pattern","slice",[1,-1]],"$$"]]],"ns"]]],["=","found",["exists",["RegExp","pattern","$i"],"ns"]]],[[["identity","true"],[".","console","printline",['$error: regular expression "',"cmdargs",'$" not valid']],["return"]]],"false"],[[["==","ns","true"],["=","locstr","$in all namespaces"]],[["identity","ns"],["=","locstr","$in namespace "]],["=","locstr","$in active namespaces"]],[["identity","found"],[[[">",["length","found"],1],[".","console","print",[["length","found"],"$ symbols "]]],[".","console","print",["$one symbol "]]],[".","console","printline",['$matching "',"pattern",'$" ',"locstr","$:"]],["printsyms","found"]],[".","console","printline",['$no symbols match "',"pattern",'$" ',"locstr"]]]],["set.","info",["`","infofutures"],["function","infofutures",["cmdargs","false","pending","rows","row","item","procstr","waiting","delays","delayms","widths","coldex"],["function","procReference",["procdef","prefix","false","str"],[[["not","prefix"],["=","prefix","$"]]],[["identity","procdef"],[[["&&",["symbol","procdef"],[".","procdef","proc"]],["=","procdef",[".","procdef","proc"]]]],[[["procedure","procdef"],["=","str",[".",[".","info","utils"],"callstring",["procdef","true"]]]],["=","str",[".","procdef","tostring"]]],[".","prefix","concat",["str"]]],"$"],["=","pending",["reverse",["futures"]]],[[["not","pending"],[".","console","printline",["$no futures pending"]],["return"]]],[".","console","printline",[["length","pending"],"$ futures pending:"]],["=","rows",["cons",["list","$start","$count","$delay","$procedures"]]],["for",["let","lambda",["iter"],["=","iter",["iterate","pending",["`","item"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","item",[".","iter","$value"]],["=","procstr",["procReference",[".","item","execute"],"$x "]],["=","waiting",[".","item","waiting"]],[[["==",[".","procstr","length"],0],["=","procstr",["procReference",["pop","waiting"],"$w "]]]],["=","delayms",[".","Math","trunc",[[".","item","delay"]]]],["=","delays",[".","Math","trunc",[["quotient","delayms",1e3]]]],["preadjust","delayms","-",["*","delays",1e3]],["push",["list",[".","item","start"],["prepad",[".","item","count"],4],[".",["tostring","delays"],"concat",["$.",["prepad","delayms",3,"$0"]]],"procstr"],"rows"],["while","false",[["not",["not",["empty","waiting"]]]],["push",["list","$","$","$",["procReference",["pop","waiting"],"$w "]],"rows"]]]]],["=","widths",[".",[".","info","utils"],"alignColumns",["rows"]]],["=","coldex",0],["while","false",[["not",["<","coldex",[".","widths","length"]]]],[[[">",["deref","widths","coldex"],[".",[".","info","options"],"maxColWidth"]],["set[","widths","coldex",[".",[".","info","options"],"maxColWidth"]]]],["push",[".","$-","repeat",[["deref","widths",["postadjust","coldex","+",1]]]],"row"]],["=","row",["reverse","row"]],["=","rows",["reverse","rows"]],["=","rows",["cons",["car","rows"],"row",["cdr","rows"]]],["prows","rows",1,"widths"]]],"info"]),e._AddPropertyList("CliUtilsInit",[["$.lingoInit","true"]]),e._SetBindingList("CliUtilsInit",["function","CliUtilsInit",["false","manifest"],["=","manifest",["`",["CliUtilsPreload","Utils","Info","CliUtilsInit"]]],[".",[".","Naan","module"],"build",["$CLI","$CliUtils",["function","lambda",["modobj","compobj"],["set.","compobj",["`","manifest"],"manifest"],["set.",[".","modobj","exports"],["`","Utils"],"Utils"],["set.",[".","modobj","exports"],["`","Info"],"Info"]]]]]),e._Execute(["CliUtilsInit"]),e._SetBindingList("driver_chmods",["function","driver_chmods",["driverob","cmdword","cmdargs"],[".",[".","Naan","module"],"chns",["cmdargs"]]]),e._SetBindingList("driver_debugs",["function","driver_debugs",["driverob","cmdword","cmdargs"],["debugger"]]),e._SetBindingList("driver_helps",["function","driver_helps",["driverob","cmdword","cmdargs","false","text"],["=","text",["call",["let","lambda",["proc"],[["eq","proc","driver_chmods"],"$    /ch[mod]                       - list modules\n    /ch[mod] <module>              - change active module\n"],[["eq","proc","driver_debugs"],"$    /d[ebug]                       - enter debugger\n"],[["eq","proc","driver_helps"],"$    /help                          - display overall help\n    /help <command>                - display help for <command>\n"],[["eq","proc","driver_infos"],["return",["driver_infos","driverob","cmdword","$"]]],[["eq","proc","driver_languages"],"$    /dialect                       - list available dialects\n    /dialect <name>                - change the CLI dialect\n"],[["eq","proc","driver_list"],"$    /list [<namespace>::]<procedure-name>[.<nestedname>]*[:start[:end]]\n"],[["eq","proc","driver_options"],["return",["driver_options","driverob","cmdword","$"]]],[["eq","proc","driver_quit"],"$    /quit                          - decamp / depart / absquatulate\n"],"$About Naan: https://github.com/naanlang/naan#readme\n/commands:\n    /ch[mod]   [<module>]          - change active module\n    /d[ebug]                       - enter debugger\n    /help      [<command>]         - help [command]\n    /i[nfo]    [<topic>]           - info on topic\n    /op[tions]                     - view or modify options\n    /r[estart]                     - restart REPL\n    /q[uit]                        - decamp / depart / absquatulate\n"],["deref","driverCmds","cmdargs"]]],[".",[".","driverob","console"],"print",["text"]]]),e._SetBindingList("driver_infos",["function","driver_infos",["driverob","cmdword","cmdargs","false","args"],["=","args",[".","cmdargs","match",[["RegExp","$([A-Za-z_]+)\\s*(.*)"]]]],["=","cmdword",["deref","args",1]],["=","cmdargs",["deref","args",2]],[["not","cmdword"],[".",[".","driverob","console"],"print",["$/info topics:\n    /i[nfo] (f)ind         <regex>                     - find matching symbols in active namespaces\n                           <regex> all | in <namespace>    ...in all or specified namespace\n    /i[nfo] f(u)tures                                  - show pending futures\n    /i[nfo] (m)odules      [<name> [<name> ...]]       - show modules and components\n    /i[nfo] (p)rocedure    <name>                      - summarize a procedure\n"]]],[["||",["==","cmdword","$f"],["==","cmdword","$find"]],[".",[".","driverob","info"],"infofind",["cmdargs"]]],[["||",["==","cmdword","$u"],["==","cmdword","$future"],["==","cmdword","$futures"]],[".",[".","driverob","info"],"infofutures",["cmdargs"]]],[["||",["==","cmdword","$m"],["==","cmdword","$module"],["==","cmdword","$modules"]],[".",[".","driverob","info"],"infomod",["cmdargs"]]],[["||",["==","cmdword","$p"],["==","cmdword","$proc"],["==","cmdword","$procedure"]],[".",[".","driverob","info"],"infoproc",["cmdargs"]]],[".",[".","driverob","console"],"printline",["$info topic ","cmdword","$ not implemented"]]]),e._SetBindingList("driver_languages",["function","driver_languages",["driverob","cmdword","cmdargs","false","dialob"],[["==","cmdword","$dialect"],[["!=","cmdargs","$"],["=","dialob",[".",[".","Naan","runtimelib"],"dialect",["cmdargs"]]],[["not","dialob"],[".",[".","driverob","console"],"print",["$unregistered language"]]],["set.","driverob",["`","parse"],[".","dialob","parse"]],["set.","driverob",["`","print"],[".","dialob","print"]],["set.","driverob",["`","errorstr"],[".","dialob","parseErrorString"]],[".",[".","driverob","console"],"print",["$language is now ","cmdargs"]]],[".",[".","driverob","console"],"print",["$dialects: ",[".",[".",[".",[".","Naan","runtimelib"],"dialect","false"],"toarray"],"join",["space"]]]]]]),e._SetBindingList("driver_list",["function","driver_list",["driverob","cmdword","cmdargs"],[".",[".","driverob","info"],"infolist",["cmdargs"]]]),e._SetBindingList("driver_options",["function","driver_options",["driverob","cmdword","cmdargs","false","args"],["=","args",[".","cmdargs","match",[["RegExp","$([A-Za-z_]+)\\s*(.*)"]]]],["=","cmdword",["deref","args",1]],["=","cmdargs",["deref","args",2]],[["not","cmdword"],[".",[".","driverob","console"],"print",["$/options:\n    /op[tions] [no]prompt            - turn on/off command line prompt\n"]]],[["==","cmdword","$prompt"],[".","driverob","setOptions",[{dictionary:{$prompt:"true"}}]]],[["==","cmdword","$noprompt"],[".","driverob","setOptions",[{dictionary:{$prompt:"false"}}]]]]),e._SetBindingList("driver_restarts",["function","driver_restarts",["driverob","cmdword","cmdargs"],["return",["`","break"]]]),e._SetBindingList("driver_quits",["function","driver_quits",["driverob","cmdword","cmdargs"],[[".","js","g"],[".",[".","js","r",["$process"]],"exit",[0]]],[[".","js","s"],[".",[".","js","t"],"Terminate","false"]],[[".","js","w"],[".",[".","js","w"],"close","false"]]]),e._SetValue("driverCmds",{dictionary:{$ch:"driver_chmods",$chmod:"driver_chmods",$d:"driver_debugs",$debug:"driver_debugs",$help:"driver_helps",$i:"driver_infos",$info:"driver_infos",$dialect:"driver_languages",$list:"driver_list",$op:"driver_options",$option:"driver_options",$options:"driver_options",$r:"driver_restarts",$restart:"driver_restarts",$q:"driver_quits",$quit:"driver_quits"}}),e._SetBindingList("Driver",["closure","Driver",["welcome","false","driverob","console","dialob","source","emptyflag","endtoken","exop","exconsole"],["=","driverob",["new","object","this"]],["=","driverObject","driverob"],["=","console",["new","textstream"]],["set.","driverob",["`","console"],"console"],["set.","driverob",["`","options"],{dictionary:{$prompt:"false"}}],["set.","driverob",["`","utils"],["Utils"]],["set.","driverob",["`","info"],["Info","console"]],["=","dialob",[".",[".","Naan","runtimelib"],"dialect",[0]]],["set.","driverob",["`","parse"],[".","dialob","parse"]],["set.","driverob",["`","print"],[".","dialob","print"]],["set.","driverob",["`","errorstr"],[".","dialob","parseErrorString"]],["=","emptyflag",{dictionary:{}}],["function","readline",["false","cc","output"],[[["not",[".","console","readchar"]],["=","console",["new","textstream"]],["set.","driverob",["`","console"],"console"],["set.","driverob",["`","utils"],["Utils"]],["set.","driverob",["`","info"],["Info","console"]]]],["=","output","$"],["while","false",[["not",["=","cc",[".","console","readchar","false"]]]],["=","output",[".","output","concat",["cc"]]],[[["==","cc","$\n"],["break"]]]],"output"],["function","freshline","false",[["!=",[".",[".","console","printloc","false"],1],0],[".","console","newline","false"]]],["function","driverPrompt",["false","prompt"],["catch",[["=","prompt",["strcat",["namespace",["first",["nsactive"]]],"$-lingo> "]],[".",[".","js","t"],"setPrompt",["prompt"]]],[[["identity","true"],["=","prompt","$lingo >"]]],"false"],"prompt"],["function","parseBuffer",["false","result"],[[["not","source"],["return","emptyflag"]]],["catch",[["=","result",[".","driverob","parse",["source"]]],["=","endtoken",[".","source","tokenlast","false"]],[[["==",[".","source","readready","false"],0],["=","source","false"]]],"result"],[[["and",["==",["tostring",["first","exception"]],"$internal"],["==",["tostring",["second","exception"]],"$end-of-file"]],["=","source","false"],"emptyflag"]],"false"]],["function","repl",["false","text","result","expr","cmdword","accum"],["=","exop","false"],["=","exconsole","console"],["loop","repl",["catch",[[[["identity","source"],["freshline"],["=","result",["parseBuffer"]],[["eq","result","emptyflag"],["continue"]]],[["not","exop"],["freshline"],[[["&&",[".",[".","driverob","options"],"prompt"],["==",[".","console","readready","false"],0]],[".","console","print",[["driverPrompt"]]]]],["loop","false",["=","text",["readline"]],[[[">",[".","console","readready","false"],0],["while","false",[["not",[">",[".","console","readready","false"],0]]],["=","text",[".","text","concat",[[".","console","readchar","false"]]]]],["=","source",["new","textstream","text"]],["continue","repl"]]],["=","expr",[".","text","match",[["RegExp","$^/([A-Za-z_]+)\\s*(.*)"]]]],[[["identity","expr"],["=","cmdword",["deref","expr",1]],[[["deref","driverCmds","cmdword"],[["eq",["call",["deref","driverCmds","cmdword"],"driverob","cmdword",["deref","expr",2]],["`","break"]],["break","repl"]]],[".","console","printline",['$driver command "/',"cmdword",'$" not understood']]],["continue","repl"]],[["!=",[".",[".","text","trim","false"],"length"],0],["break"]],["continue","repl"]]],["loop","false",["=","source",["new","textstream","text"]],["=","result",["parseBuffer"]],[["not",["eq","result","emptyflag"]]],["=","source","false"],["=","accum","text"],[[["not",[".","text","match",[["RegExp","$(;|;>|;;)\\s*$"]]]],["=","source",["new","textstream",[".",[".","text","trim","false"],"concat",["$;\n"]]]],["=","result",["parseBuffer"]],[["not",["||",["eq","result","emptyflag"],[".","result",0]]],["break"]]]],["freshline"],[".","console","print",["$>> "]],["=","text",["readline"]],[[["==",[".","text","trim","false"],"$"],[".","console","print",["$command entry canceled"]],["continue","repl"]]],[[["==",[".","text","slice",[-1]],"$\n"],["=","text",[".","accum","concat",["text"]]]],["=","text",[".","accum","concat",["$\n","text"]]]]]],[[[".","exop","display"],[".","console","printline",[[".","exop","display"]]]]],["=","result",["list","false",[".","exop","expr"]]],["=","endtoken",{dictionary:{$atom:["`",";"]}}],[[[".","exop","ending"],["set.","endtoken",["`","atom"],[".","exop","ending"]]]],["=","exop","false"]],[[[".","result",0],["for",["let","lambda",["iter"],["=","iter",["iterate",[".","result",0],["`","expr"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","expr",[".","iter","$value"]],[".","console","printline",[[".","driverob","errorstr",["expr"]]]]]]],["=","source","false"]],[["==",[".","endtoken","atom"],["`",";;"]],["\\$",["evalactive",[".","result",1]]]],["\\$",["evalactive",[".","result",1]]],["freshline"],[".","console","print",["$$: "]],[["!=",[".","endtoken","atom"],["`",";>"]],[".","console","print",[[".","driverob","print",["\\$"]]]]],[".","console","printq",["\\$"]]]],[[["==","exception","Driver"]],[["==","exception","driver"],["=","exop","false"],["=","exconsole","false"],["throw","driver"]],[["identity","true"],["=","expr",["tostring",["first","exception"]]],[["==","expr","$debugger"],[".","console","printline",["$==> terminated in debugger"]],["=","exop","false"],["=","exconsole","false"],["throw",["list","internal","$exit"]]],[["==","expr","$internal"],[".","console","printline",["$==> error: ",["second","exception"]]]],[[["&&",["dictionary","exception"],["==",[".","exception","error"],"$Naan Error"]],["=","expr",["ErrorString","exception"]]],["=","expr","exception"]],[".","console","printline",["$==> exception: ","expr"]]]],"false"]]],["set.","driverob",["`","setOptions"],["function","setOptions",["options"],[[["identity","options"],["set.","driverob",["`","options"],["merge",[".","driverob","options"],"options"]]]],[".","driverob","options"]]],["set.","driverob",["`","readready"],["function","readready","false",[".","console","readready","false"]]],["set.","driverob",["`","execute"],["function","execute",["expr","options"],[[["not","options"],["=","options",{dictionary:{}}]]],["set.","options",["`","expr"],"expr"],[["identity","exconsole"],["=","exop","options"],[".","exconsole","readex",["Driver"]],"true"]]],["set.",[".","Naan","runtimelib"],["`","curdriver"],"curdriver"],["set.",[".","Naan","runtimelib"],["`","exec"],"exec"],[[["identity","welcome"],["set.",[".","driverob","options"],["`","prompt"],"true"],[["==","welcome",100],[".","console","printline",['$Naan REPL - type "/help" for more information']]]]],["repl"]]),e._SetBindingList("curdriver",["function","curdriver","false","driverObject"]),e._SetBindingList("exec",["function","exec",["expr","options"],[".","driverObject","execute",["expr","options"]]]),e._SetBindingList("DriverInstall",["function","DriverInstall",["false","curnsactive"],["=","curnsactive",["nsactive"]],["sudo",["nsactive",["list",[".",["nsactive","true"],1]]]],["copyproc",["compress","$driver"],"Driver"],["sudo",["nsactive","curnsactive"]],["throw",["`","driver"]]]),e._AddPropertyList("DriverInit",[["$.lingoInit","true"]]),e._SetBindingList("DriverInit",["function","DriverInit",["false","manifest"],["=","manifest",["`",["driverObject","driver_chmods","driver_debugs","driver_helps","driver_infos","driver_languages","driver_list","driver_options","driver_restarts","driver_quits","driverCmds","Driver","curdriver","exec","DriverInstall","DriverInit"]]],[".",[".","Naan","module"],"build",["$CLI","$Driver",["function","lambda",["modobj","compobj"],[".",[".","Naan","module"],"require",["$Lib/RuntimeLib.nlg"]],["set.","compobj",["`","manifest"],"manifest"],["set.",[".","modobj","exports"],["`","DriverInstall"],"DriverInstall"]]]]]),e._Execute(["DriverInit"]),e._CopyBinding("Driver","driver"),e._SetBindingList("DebuggerREPL",["closure","DebuggerREPL",["debug","false","commander","console","dialob","lastCmd"],["=","commander",["new","object","this"]],["=","console",["new","textstream"]],["set.","commander",["`","console"],"console"],["=","dialob",[".",[".","Naan","runtimelib"],"dialect",[0]]],["set.","commander",["`","parse"],[".","dialob","parse"]],["set.","commander",["`","print"],[".","dialob","print"]],["set.","commander",["`","errorstr"],[".","dialob","parseErrorString"]],["set.","commander",["`","utils"],["Utils"]],["set.","commander",["`","info"],["Info","console"]],["set.","commander",["`","catch"],"false"],["set.","commander",["`","breakpoints"],{dictionary:{}}],["function","frameDict",["frame","false","proctask","location","markdict"],["=","proctask",[".","debug","frameProcTask",["frame"]]],["=","location",[".",[".","commander","utils"],"makeLocation",[[".",[".","frame",3],1],[".","proctask",1]]]],[[[".","location",2],["=","markdict",{dictionary:{}}],["set[","markdict",["+",[".","location",2],1],"$--\x3e"]]],"markdict"],["function","frameProc",["frame","false","proctask","location"],["=","proctask",[".","debug","frameProcTask",["frame"]]],[["identity","proctask"],["=","location",[".",[".","commander","utils"],"makeLocation",[[".",[".","proctask",0],1],[".","proctask",1]]]],[".",["tostring",[".",[".","proctask",0],0]],"concat",["space",[".",[".","commander","utils"],"locationString",["location"]]]]]],["function","readline",["crok","false","cc","output"],[[["not",[".","console","readchar"]],["=","console",["new","textstream"]],["set.","commander",["`","console"],"console"],["set.","commander",["`","utils"],["Utils","console"]],["set.","commander",["`","info"],["Info","console"]]]],[[["identity","crok"],["=","output","$"]],["while","false",[["not",["==",["=","cc",[".","console","readchar","false"]],"$\n"]]]],["=","output","cc"]],["while","false",[["not",["&&",["!=",["=","cc",[".","console","readchar","false"]],"$\n"],"cc"]]],["=","output",[".","output","concat",["cc"]]]],"output"],["function","driverprompt",["false","prompt"],["catch",[["=","prompt",["strcat","$(ndb-",[".","debug","depth","false"],"$) "]],[".",[".","js","t"],"setPrompt",["prompt"]]],[[["identity","true"],["=","prompt","$(ndb)"]]],"false"],"prompt"],["function","freshline","false",[["!=",[".",[".","console","printloc","false"],1],0],[".","console","newline","false"]]],["set.","commander",["`","parseText"],["function","parseText",["cmdargs","false","error","expr"],["catch",[["=","source",["new","textstream",[".","cmdargs","concat",["$ ;"]]]],[".","source","setsymbols",[[".","commander","localist",[["deref",[".","commander","frames"],[".","commander","focus"]]]]]],["=",["error","expr"],[".","commander","parse",["source"]]]],[[["identity","true"]]],"false"],[[["identity","error"],["for",["let","lambda",["iter"],["=","iter",["iterate","error",["`","expr"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","expr",[".","iter","$value"]],[".","console","printline",[[".","commander","errorstr",["expr"]]]]]]],["=","expr","false"]]],"expr"]],["set.","commander",["`","getprocarg"],["function","getprocarg",["text","false","args","expr","result","location"],["=","args",[".","text","match",[["RegExp","$^([^:]+)(:\\s*\\d*)?(:\\s*\\d*)?\\s*$"]]]],[[["&&",[">",[".","args","length"],1],["=","expr",[".","commander","parseText",[["deref","args",1]]]]],["catch",[["=","result",["eval","expr"]],[["procedure","result"],["=","result",[".","result",1]]],[["symbol","result"],["=","result",[".",[".","result","proc"],1]]],["=","result","false"]],[[["identity","true"],["=","result","false"]]],"false"],[["identity","result"],["=","location",["list",[".",[".","result","namespace"],"tostring"],"result",["toint",[".",[".",["deref","args",2],"substring",[1]],"trim","false"]],["toint",[".",[".",["deref","args",3],"substring",[1]],"trim","false"]]]]]]],[[["not","location"],["=","location",[".",[".","commander","utils"],"getprocarg",["text"]]]]],"location"]],["function","breakHit",["where","value","false","firstid","location","entry","result","sourceline"],["=","firstid",1],["for",["let","lambda",["iter"],["=","iter",["iterate",[".","commander","breakpoints"],["`","bpid"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","bpid",[".","iter","$value"]],["=","bpid",["toint","bpid"]],[[["==","firstid","bpid"],["=","firstid",["+","bpid",1]]]],[["eq",[".",[".",["deref",[".","commander","breakpoints"],"bpid"],"where"],"task"],[".","where","task"]],["=","firstid","bpid"]]]]],[[["not",["deref",[".","commander","breakpoints"],"firstid"]],["breakpoint",[".","where","task"],"undefined"],[".","debug","resume","false"],["return","true"]]],["=","entry",["deref",[".","commander","breakpoints"],"firstid"]],["preadjust",[".","entry","hitcount"],"+",1],[[[".","entry","conditional"],[[["procedure",[".","entry","conditional"]],["=","result",["call",[".","entry","conditional"],[".","entry","hitcount"],[".","entry","value"]]]],["=","result",["eval",[".","entry","conditional"]]]],[["not","result"],[".","debug","resume","false"],["return","true"]]]],[".","console","printline",["$Breakpoint ","firstid","$ at ",[".",[".","commander","utils"],"locationString",[[".","entry","location"]]],"$ with value ","value"]],[[["not",[".","entry","sourced"]],["set.","entry",["`","sourced"],"true"],[[[".",[".","entry","location"],2],["=","sourceline",[".",[".","commander","utils"],"sourcelist",[[".","entry","procdef"],[".",[".","entry","location"],2],[".",[".","entry","location"],2]]]]],["=","sourceline",["tostring",["car",[".","where","task"]]]]],[".","console","printline",["$    ","sourceline"]]]],"false"],["function","stepHit",["dict","false","procdef","location","sourceline"],["=","procdef",[".","debug","insideProc","false"]],[[["not","procdef"],[".","console","printline",["$Stepped to unknown location: ",[".","dict","task"]]],["return","false"]]],[[["member",[".",[".","procdef",1],"namespace"],[".","debug","nshidden"]],[".","debug","stepup","false"],["return","true"]]],["=","location",[".",[".","commander","utils"],"makeLocation",[[".","procdef",1],[".","dict","task"]]]],[".",[".","commander","info"],"setDefloc",["location"]],[".","console","printline",["$Stepped to ",[".",[".","commander","utils"],"locationString",["location"]],"$ with value ",[".","dict","value"]]],[[["!=",[".","dict","state"],"$task"],["=","sourceline","$[end of body]"]],[[".","location",2],["=","sourceline",[".",[".","commander","utils"],"sourcelist",["procdef",[".","location",2],[".","location",2]]]]],["=","sourceline","$unknown line"]],[".","console","printline",["$    ","sourceline"]],"false"],["function","exceptionHit",["except","false","exceptstr","proctask","location"],[[["||",["not",[".","commander","catch"]],["&&",["tuple",[".","commander","catch"]],["not",["eval",[".","commander","catch"]]]]],["return","true"]]],["freshline"],["=","exceptstr",[".","debug","startExcept"]],[[["&&",["dictionary","exceptstr"],["==",[".","exceptstr","error"],"$Naan Error"]],["=","exceptstr",["ErrorString","exceptstr"]]]],[".","console","printline",["$==> Entering debugger on exception: ","exceptstr"]],["=","proctask",[".","debug","frameProcTask",["false"]]],["=","location",[".",[".","commander","utils"],"makeLocation",[[".",[".","proctask",0],1],[".",[".","proctask",1],0]]]],[[["&&","proctask","location"],[".","console","printline",[[".",[".","commander","utils"],"locationString",["location"]]]],[[".","location",2],[".","console","printline",["$    ",[".",[".","commander","utils"],"sourcelist",[[".","proctask",0],[".","location",2],[".","location",2]]]]]]]],"false"],["set.","commander",["`","updateDefproc"],["function","updateDefproc",["frame","false","proctask","location"],["=","proctask",[".","debug","frameProcTask",["frame"]]],[[["identity","proctask"],["=","location",[".",[".","commander","utils"],"makeLocation",[[".",[".","proctask",0],1],[".",[".","proctask",1],0]]]]]],[".",[".","commander","info"],"setDefloc",["location"]]]],["function","findCommand",["text","false","cmd","found"],[["deref","debugCmds","text"],"text"],["for",["let","lambda",["iter"],["=","iter",["iterate","debugCmds",["`","cmd"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","cmd",[".","iter","$value"]],[[[".","cmd","startsWith",["text"]],[["identity","found"],["return","false"]],["=","found","cmd"]]]]]],"found"],["set.","commander",["`","entering"],["function","entering","false",["textstreams",["`",["false","false"]]]]],["set.","commander",["`","pauser"],["function","pauser",["entry","arg1","arg2","arg3","false","cmd","cmdword","proc1"],["updateDefproc","false"],[[["==","entry","$startpause"],[[["atom","arg1"],[".","console","printline",["$can't debug atoms like: \"","arg1",'$"']],["return"]]],["freshline"],[".","console","printline",["$debugger paused before eval: ","arg1"]]],[["==","entry","$breakpoint"],[["breakHit","arg1","arg2"],["return"]]],[["==","entry","$steptrap"],[["stepHit","arg1"],["return"]]],[["==","entry","$startfail"],["freshline"],[".","console","printline",["$debugger could not pause before eval"]]],[["==","entry","$escape"],[".","console","printline",["$^C"]]],[["==","entry","$exception"],[["exceptionHit","arg1"],["return"]]],[["==","entry","$"]],["freshline"],[".","console","printline",['$debugger entry type "',"entry",'$" not known']]],["set.","commander",["`","frames"],{array:[]}],["for",["let","lambda",["iter"],["=","iter",["iterate",[".","debug","frames"],["`","frame"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","frame",[".","iter","$value"]],[[["procedure","frame"],["=","proc1","true"]]],[[["&&",["!=",[".","frame",0],["`","body"]],["||",["not","proc1"],["!=",[".","frame",0],["`","loop"]]]],[".",[".","commander","frames"],"push",["frame"]]]]]]],["set.","commander",["`","focus"],0],[".","console","readex",["false"]],["loop","false",["catch",[["freshline"],[".","console","print",[["driverprompt"]]],["=","cmd",["readline","true"]],["=","cmd",[".","cmd","match",[["RegExp","$([A-Za-z_]+)\\s*(.*)"]]]],[[["not","cmd"],[[["||",["not","lastCmd"],["not",["eq",["deref","debugCmds",["deref","lastCmd",1]],"debug_execs"]]],["continue"]]],["=","cmd","lastCmd"]]],["=","lastCmd","cmd"],["=","cmdword",["findCommand",["deref","cmd",1]]],[[["deref","debugCmds","cmdword"],[["eq",["call",["deref","debugCmds","cmdword"],"cmdword",["deref","cmd",2],"commander","debug"],["`","break"]],["return"]]],[".","console","printline",['$debugger command "',["deref","cmd",1],'$" is undefined or ambiguous']]]],[[["==","exception","DebuggerREPL"],["return","false"]],[["!=","exception","debugger"],[".","console","printline",["$debugger caught: ","exception"]],"false"]],"false"]]]],["set.","commander",["`","endPauser"],["function","endPauser","false",[".","console","readex",["DebuggerREPL"]]]],["set.","commander",["`","procstring"],["function","procstr",["proc","false","output","parm"],[[["||",["not",[".","proc",2]],["not",["car",[".","proc",2]]]],["return",[".",["tostring",[".","proc",0]],"concat",["$ ",[".","proc",1],"$()"]]]]],[[["atom",[".","proc",2]],["return",[".",["tostring",[".","proc",0]],"concat",["$ ",[".","proc",1],"$ ",[".","proc",2]]]]]],["=","output",[".",["tostring",[".","proc",0]],"concat",["$ ",[".","proc",1],"$("]]],["for",["let","lambda",["iter"],["=","iter",["iterate",[".","proc",2],["`","parm"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","parm",[".","iter","$value"]],[["not","parm"]],["=","output",[".","output","concat",["parm","$, "]]]]]],["=","output",[".","output","slice",[0,-2]]],[".","output","concat",["$)"]]]],["set.","commander",["`","localist"],["function","localist",["frame","false","symbols"],[[["not",["procedure","frame"]],["return","false"]]],["call",["function","scope",["parent","false","lex1","ex1","proc"],["while","false",[["not","parent"]],["=","proc",["getproc","parent"]],["=","lex1",["third","proc"]],[[["atom","lex1"],["push","lex1","symbols"]],["loop","false",[["empty","lex1"]],["=","ex1",["pop","lex1"]],[[["identity","ex1"],["push","ex1","symbols"]]]]],["push","parent","symbols"],["=","lex1",["deref",["@","parent"],["`","\\.children"]]],["loop","false",[["empty","lex1"]],["=","ex1",["pop","lex1"]],[[["&&","ex1",["not",["member","ex1","symbols"]]],["push","ex1","symbols"]]]],["=","parent",["deref",["@","parent"],["`","\\.parent"]]]]],[".",[".","frame",3],1]],["reverse","symbols"]]],["set.","commander",["`","exprstr"],["function","exprstr",["expr","false","condexpr"],[[["not","expr"],["return","$"]]],["=","condexpr",[".",[".","commander","utils"],"sourcelist",["expr"]]],["=","condexpr",[".","condexpr","replace",[["RegExp","$^ *\\d+","$mg"],"$"]]],["=","condexpr",[".","condexpr","replace",[["RegExp","$[\\s\\n\\r]{2,}","$mg"],"$ "]]],[".","condexpr","trim","false"]]],["set.","commander",["`","printlocals"],["function","printlocals",["frame","uopts","false","uopt","widths","header","begun"],["=","options",{dictionary:{$indent:4,$header:"false",$parents:"true",$trim:"false",$maxstr:30}}],["for",["let","lambda",["iter"],["=","iter",["iterate","uopts",["`","uopt"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","uopt",[".","iter","$value"]],["set[","options","uopt",["deref","uopts","uopt"]]]]],["=","header",["list","$symbol","$value","$previous"]],["function","calc1",["lex1","false","ex1"],["function","calcitem",["item"],["function","cf",["field","prev","false","width"],["=","width",[".",["tostring","field",{dictionary:{$quote:"true"}}],"length"]],[[[">","width",[".","options","maxstr"]],["=","width",[".","options","maxstr"]]]],[[["<","width","prev"],["=","width","prev"]]],"width"],["set[","widths",0,["cf",["first","item"],["deref","widths",0]]],["set[","widths",1,["cf",["second","item"],["deref","widths",1]]],[["cddr","item"],["set[","widths",2,["cf",["third","item"],["deref","widths",2]]]]],["loop","false",[["empty","lex1"]],["=","ex1",["pop","lex1"]],[[["first","ex1"],[[["not","widths"],["=","widths",{array:[0,0,0]}],[[".","options","header"],["calcitem","header"]]]],["calcitem","ex1"]]]]],["function","print1",["lex1","nameline","false","ex1"],["function","printitem",["item"],["function","pf",["field","width","false","fwidth"],["=","field",["tostring","field",{dictionary:{$quote:"true"}}]],["=","fwidth",[".","field","length"]],[[[">","fwidth",[".","options","maxstr"]],["=","fwidth",[".","options","maxstr"]],["=","field",[".","field","substring",[0,"fwidth"]]]]],[".","console","print",["field",[".","space","repeat",[["-","width","fwidth"]]]]]],[".","console","print",[[".","$ ","repeat",[[".","options","indent"]]]]],["pf",["first","item"],["deref","widths",0]],[".","console","print",["$ "]],["pf",["second","item"],["deref","widths",1]],[[["&&",["cddr","item"],[">",["deref","widths",2],0]],[".","console","print",["$ "]],["pf",["third","item"],["deref","widths",2]]]],[".","console","newline","false"]],["loop","false",[["empty","lex1"]],["=","ex1",["pop","lex1"]],[[["first","ex1"],[[["not","begun"],[[[".","options","header"],["printitem","header"],["printitem",["list",[".","$-","repeat",[["deref","widths",0]]],[".","$-","repeat",[["deref","widths",1]]],[".","$-","repeat",[["deref","widths",2]]]]]]],["=","begun","true"]]],[[["identity","nameline"],[".","console","printline",["nameline"]],["=","nameline","false"]]],["printitem","ex1"]]]]],["function","printer",["false","procsym","procname","parent","proc","params","parents"],["calc1",["third","frame"]],["=","procsym",[".",[".","frame",3],1]],["=","parent",["deref",["@","procsym"],["`","\\.parent"]]],["while","false",[["not","parent"]],["=","proc",["getproc","parent"]],["=","lex1",["third","proc"]],[[["atom","lex1"],["=","params",["push",["list","lex1",["first","lex1"]],"params"]]],["loop","false",[["empty","lex1"]],["=","ex1",["pop","lex1"]],[[["&&",[".","options","trim"],["not",["within","ex1",[".","frame",3]]]],["continue"]]],[[["identity","ex1"],["push",["list","ex1",["first","ex1"]],"params"]]]]],["calc1","params"],["push","params","parents"],["=","parent",["deref",["@","parent"],["`","\\.parent"]]]],["=","parents",["reverse","parents"]],["push",["third","frame"],"parents"],["=","parent","procsym"],["while","false",[["not","parent"]],[[["identity","begun"],["=","procname","$"]],["=","procname",[".","procname","concat",["$\n"]]]],["=","proc",["getproc","parent"]],["=","procname",[".","procname","concat",[["first","proc"],"space",["tostring",["namespace","parent"]],"$::",[".","debug","procname",["parent"]]]]],["print1",["pop","parents"],"procname"],["=","parent",["deref",["@","parent"],["`","\\.parent"]]]]],[["procedure","frame"],["printer"]]]],["set.","commander",["`","printframe"],["function","printframe",["frame","false","procstr"],["function","printparms",["lex1","false","ex1"],["loop","false",[["empty","lex1"]],["=","ex1",["pop","lex1"]],[[["first","ex1"],[".","console","print",["$  ",["first","ex1"],"$: ",["second","ex1"],"$ (",["third","ex1"],"$)"]],[".","console","newline","false"]]]]],[["member",["first","frame"],["`",["let","let","&"]]],[".","console","print",[["first","frame"]]],[".","console","newline","false"],[".","console","printparms",[["third","frame"]]],[".","console","print",["$-----------"]],[".","console","newline",[2]],[".","console","print",[[".",[".","commander","utils"],"sourcelist",[[".","frame",3],"false","false",["frameDict","frame"]]]]],[".","console","newline",[2]]],[["==",["first","frame"],["`","builtin"]],[".","console","print",[["first","frame"]]],[".","console","newline","false"],[".","console","print",[["second","frame"]]],[".","console","newline",[2]]],[["==",["first","frame"],["`","interrupt"]],[".","console","print",[["first","frame"],"$ ",["third","frame"],"$ in ",["second","frame"]]],[".","console","newline","false"],[".","console","print",["$exec: ",[".","frame",3]]],[".","console","newline",[2]]],[["procedure","frame"],[".","commander","printlocals",["frame",{dictionary:{$trim:"true"}}]],[".","console","print",["$-----------"]],[".","console","newline",[2]],[".","console","print",[[".",[".","commander","utils"],"sourcelist",[[".","frame",3],"false","false",["frameDict","frame"]]]]],[".","console","newline",[2]]],[["==",["first","frame"],["`","catch"]],[".","console","print",[["first","frame"]]],["=","procstr",["frameProc","frame"]],[[["identity","procstr"],[".","console","newline","false"],[".","console","print",["procstr"]]]],[".","console","newline",[2]]],[".","console","print",["$frame type:",["first","frame"]]],[".","console","newline",[2]]]],["set.","commander",["`","printframedivider"],["function","printframedivider",["frameno","false","header","trailer"],["=","header",[".","$============ Frame #","concat",["frameno","$ ==========="]]],["=","trailer","$================================"],[["not","frameno"],[".","console","printline",["trailer"]]],[".","console","printline",[[".","header","slice",[["length","frameno"]]]]]]],["set.","commander",["`","breakGlobalEnable"],["function","breakGlobalEnable",["enable"],[".","debug","breakGlobalAble",["enable"]]]],["set.","commander",["`","breakAdd"],["function","breakAdd",["location","expr","false","task","firstid","bpdict","procdef","exprstr"],["=","procdef",[".",[".","commander","utils"],"resolveLocation",["location"]]],[[["not","procdef"],[".","console","printline",["$ndb: can't find procedure ",[".",[".","commander","utils"],"locationString",["location"]]]],["return","false"]]],[[["not",[".","location",0]],["=","location",["cons",[".",[".",[".","procdef",1],"namespace"],"tostring"],["cdr","location"]]]]],[[["not",["integer",[".","location",2]]],["=","location",["list",[".","location",0],[".","location",1],1]]],[[".","location",3],["=","location",["list",[".","location",0],[".","location",1],[".","location",2]]]]],["=","task",[".",[".","commander","utils"],"breakLocation",["location"]]],[[["not","task"],[".","console","printline",["$ndb: can't find location ",[".",[".","commander","utils"],"locationString",["location"]]]],["return","false"]]],["=","firstid",1],["for",["let","lambda",["iter"],["=","iter",["iterate",[".","commander","breakpoints"],["`","bpid"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","bpid",[".","iter","$value"]],["=","bpid",["toint","bpid"]],[[["==","firstid","bpid"],["=","firstid",["+","bpid",1]]]],[[["eq",[".",[".",["deref",[".","commander","breakpoints"],"bpid"],"where"],"task"],"task"],[".","console","printline",["$ndb: breakpoint ","bpid","$ already exists"]],["return","false"]]]]]],["=","bpdict",["breakpoint","task"]],[[["identity","bpdict"],[["eq",[".","bpdict","proc"],[".","debug","debugBlock"]],[".","console","printline",["$ndb: warning: closure breakpoints would conflict"]],["return","false"]],[".","console","printline",["$ndb: warning: overwriting breakpoint from different debugger"]]]],["=","bpdict",["breakpoint","task",[".","debug","debugBlock"]]],[[["not","bpdict"],[".","console","printline",["$ndb: cannot add that breakpoint"]],["return","false"]]],["set.","bpdict",["`","breakID"],"firstid"],["set[",[".","commander","breakpoints"],"firstid",{dictionary:{$location:"location",$procdef:"procdef",$where:"bpdict",$hitcount:0,$conditional:"expr"}}],[[["identity","expr"],["=","exprstr","$ (conditional)"]],["=","exprstr","$"]],[".","console","printline",["$breakpoint ","firstid","$ at ",[".",[".","commander","utils"],"locationString",["location"]],"exprstr"]],[[["not",[".","debug","bpenable"]],[".","console","printline",["$ndb: warning: breakpoints currently disabled"]]]],"firstid"]],["set.","commander",["`","breakClear"],["function","breakClear",["location","false","task"],["=","task",[".",[".","commander","utils"],"breakLocation",["location"]]],[[["not","task"],["return","false"]]],["for",["let","lambda",["iter"],["=","iter",["iterate",[".","commander","breakpoints"],["`","bpid"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","bpid",[".","iter","$value"]],[[["eq",[".",[".",["deref",[".","commander","breakpoints"],"bpid"],"where"],"task"],"task"],["breakpoint","task","undefined"],[".","console","printline",["$breakpoint ","bpid","$ at ",[".",[".","commander","utils"],"locationString",[[".",["deref",[".","commander","breakpoints"],"bpid"],"location"]]],"$ cleared"]],["set[",[".","commander","breakpoints"],"bpid","undefined"],["return"]]]]]],[".","console","printline",["$ndb: breakpoint not found for ",[".",[".","commander","utils"],"locationString",["location"]]]]]],["set.","commander",["`","breakDelete"],["function","breakDelete",["breaknum"],[[["not",["deref",[".","commander","breakpoints"],"breaknum"]],[".","console","printline",["$ndb: breakpoint ","breaknum","$ does not exist"]],["return","false"]]],["breakpoint",[".",[".",["deref",[".","commander","breakpoints"],"breaknum"],"where"],"task"],"undefined"],[".","console","printline",["$breakpoint ","breaknum","$ at ",[".",[".","commander","utils"],"locationString",[[".",["deref",[".","commander","breakpoints"],"breaknum"],"location"]]],"$ deleted"]],["set[",[".","commander","breakpoints"],"breaknum","undefined"]]],["set.","commander",["`","breakDisable"],["function","breakDisable",["breaknum"],[[["not",["deref",[".","commander","breakpoints"],"breaknum"]],[".","console","printline",["$ndb: breakpoint ","breaknum","$ does not exist"]]]],[[".",[".",["deref",[".","commander","breakpoints"],"breaknum"],"where"],"enable"],["set.",[".",["deref",[".","commander","breakpoints"],"breaknum"],"where"],["`","enable"],"false"],[".","console","printline",["$ndb: breakpoint ","breaknum","$ disabled"]]]]],["set.","commander",["`","breakEnable"],["function","breakEnable",["breaknum"],[[["not",["deref",[".","commander","breakpoints"],"breaknum"]],[".","console","printline",["$ndb: breakpoint ","breaknum","$ does not exist"]]]],[["not",[".",[".",["deref",[".","commander","breakpoints"],"breaknum"],"where"],"enable"]],["set.",[".",["deref",[".","commander","breakpoints"],"breaknum"],"where"],["`","enable"],"true"],[".","console","printline",["$ndb: breakpoint ","breaknum","$ enabled"]]]]],["set.","commander",["`","breakList"],["function","breakList",["false","rows","counts","rowdex","coldex"],[[["==",["length",[".","commander","breakpoints"]],0],[".","console","printline",["$no breakpoints"]],["return"]]],["=","rows",{array:[]}],["=","counts",{array:[]}],["set[","rows",0,{array:["$num","$enable","$count","$location","$condition"]}],["for",["let","lambda",["iter"],["=","iter",["iterate",[".","commander","breakpoints"],["`","bpid"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","bpid",[".","iter","$value"]],["=","rowdex",["+",-1,[".","rows","push",[{array:["bpid","$N",[".",["deref",[".","commander","breakpoints"],"bpid"],"hitcount"],[".",[".","commander","utils"],"locationString",[[".",["deref",[".","commander","breakpoints"],"bpid"],"location"]]],[".","commander","exprstr",[[".",["deref",[".","commander","breakpoints"],"bpid"],"conditional"]]]]}]]]],[[[".",[".",["deref",[".","commander","breakpoints"],"bpid"],"where"],"enable"],["set[",["deref","rows","rowdex"],1,"$Y"]]]]]],["for",["let","lambda",["iter"],["=","iter",["iterate","rows",["`","row"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","row",[".","iter","$value"]],["=","coldex",0],["while","false",[["not",["<=","coldex",4]]],[[["||",["not",["deref","counts","coldex"]],["<",["deref","counts","coldex"],[".",["deref","row","coldex"],"length"]]],["set[","counts","coldex",[".",["deref","row","coldex"],"length"]]]],["preadjust","coldex","+",1]]]]],["for",["let","lambda",["iter"],["=","iter",["iterate","rows",["`","row"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","row",[".","iter","$value"]],[".","console","print",[["prepad",["deref","row",0],["deref","counts",0]]]],[".","console","print",[["prepad",["deref","row",1],["+",["deref","counts",1],1]]]],[".","console","print",[["prepad",["deref","row",2],["+",["deref","counts",2],1]]]],[".","console","print",["$  ",["deref","row",3],[".","space","repeat",[["-",["deref","counts",3],[".",["deref","row",3],"length"]]]]]],[[["deref","row",4],[".","console","print",["$ ",["deref","row",4]]]]],[".","console","newline","false"],[[[">","coldex",0],["=","coldex",0],[".","console","print",[["prepad","$",["deref","counts",0],"$-"]]],[".","console","print",["$ ",["prepad","$",["deref","counts",1],"$-"]]],[".","console","print",["$ ",["prepad","$",["deref","counts",2],"$-"]]],[".","console","print",["$  ",[".","$-","repeat",[["deref","counts",3]]]]],[".","console","printline",["$ ",[".","$-","repeat",[["deref","counts",4]]]]]]]]]]]],["=","debugCmds",{dictionary:{$b:"debug_breaks",$break:"debug_breaks",$clear:"debug_breaks",$delete:"debug_breaks",$disable:"debug_breaks",$enable:"debug_breaks",$catch:"debug_exceptions",$c:"debug_execs",$continue:"debug_execs",$f:"debug_execs",$finish:"debug_execs",$n:"debug_execs",$next:"debug_execs",$s:"debug_execs",$step:"debug_execs",$eval:"debug_evals",$p:"debug_evals",$print:"debug_evals",$pp:"debug_evals",$help:"debug_helps",$i:"debug_infos",$info:"debug_infos",$list:"debug_list",$bt:"debug_stacks",$backtrace:"debug_stacks",$frame:"debug_stacks",$scope:"debug_stacks",$up:"debug_stacks",$down:"debug_stacks",$q:"debug_quit",$quit:"debug_quit"}}],"commander"]),e._SetBindingList("debug_breaks",["function","debug_breaks",["cmdword","cmdargs","commander","debug","false","console","args","expr","location","breaknum"],["=","console",[".","commander","console"]],[["==",[".","cmdword","charAt",[0]],"$b"],["=","args",[".","cmdargs","match",[["RegExp","$^\\s*(\\S+)\\s+if\\s+(\\S+.*)\\s*$"]]]],[[["identity","args"],["=","location",[".","commander","getprocarg",[["deref","args",1]]]],["=","expr",[".","commander","parseText",[["deref","args",2]]]],[["not","expr"],["return",[".","console","print",["$ndb: conditional breakpoint expression not understood"]]]]],["=","location",[".","commander","getprocarg",["cmdargs"]]]],[[["not","location"],["return",[".","console","print",["$ndb: please specify a valid procedure"]]]]],[".","commander","breakAdd",["location","expr"]]],[["==","cmdword","$clear"],["=","location",[".","commander","getprocarg",["cmdargs"]]],[[["not","location"],["return",[".","console","print",["$ndb: please specify a valid procedure"]]]],[["numeric",["toint",[".","location",1]]],["return",[".","console","print",["$ndb: please specify a procedure (or use delete <number>)"]]]]],[".","commander","breakClear",["location"]]],[["||",["==","cmdword","$delete"],["==","cmdword","$disable"],["==","cmdword","$enable"]],["=","breaknum",[".",[".","commander","utils"],"getnumargs",["cmdargs"]]],[[["||",["==","cmdargs","$"],["==",[".","cmdargs","toLowerCase","false"],"$all"]],[["==","cmdword","$enable"],[".","console","printline",["$breakpoints enabled"]],["return",[".","commander","breakGlobalEnable",["true"]]]],[["==","cmdword","$disable"],[".","console","printline",["$breakpoints disabled"]],["return",[".","commander","breakGlobalEnable",["false"]]]]]],[[["||",["not","breaknum"],["&&",["not",["numeric","breaknum"]],["!=",["pop","breaknum"],["`","set"]]]],["return",[".","console","print",["$ndb: please specify breakpoint number(s)"]]]]],["loop","false",[[["numeric","breaknum"],["=","expr","breaknum"],["=","breaknum","false"]],[["empty","breaknum"],["break"]],["=","expr",["pop","breaknum"]]],[[["==","cmdword","$delete"],[".","commander","breakDelete",["expr"]]],[["==","cmdword","$disable"],[".","commander","breakDisable",["expr"]]],[".","commander","breakEnable",["expr"]]]]]]),e._SetBindingList("debug_exceptions",["function","debug_exceptions",["cmdword","cmdargs","commander","debug","nsteps","false","console","args","expr"],["=","console",[".","commander","console"]],[[["==","cmdargs","$disable"],["set.","commander",["`","catch"],"false"]],[["||",["==","cmdargs","$enable"],["==","cmdargs","$all"]],["set.","commander",["`","catch"],"true"]],[["!=","cmdargs","$"],["=","args",[".","cmdargs","match",[["RegExp","$^\\s*if\\s+(\\S+.*)\\s*$"]]]],[[["identity","args"],["=","expr",[".","commander","parseText",[["deref","args",1]]]],[["not","expr"],["return",[".","console","print",["$ndb: conditional catch expression not understood"]]]]]],["set.","commander",["`","catch"],"expr"]]],[["not",[".","commander","catch"]],[".","console","printline",["$exceptions: catch disabled"]]],[["atom",[".","commander","catch"]],[".","console","printline",["$exceptions: catch all"]]],[".","console","printline",["$exceptions: catch if ",[".","commander","exprstr",[[".","commander","catch"]]]]]]),e._SetBindingList("debug_execs",["function","debug_execs",["cmdword","cmdargs","commander","debug","nsteps"],[[["==",[".","cmdword","charAt",[0]],"$c"],[".","debug","resume","false"]],[["==",[".","cmdword","charAt",[0]],"$f"],[".","debug","stepup","false"]],[["==",[".","cmdword","charAt",[0]],"$n"],[".","debug","stepover","false"]],[["==",[".","cmdword","charAt",[0]],"$s"],["=","nsteps",["toint","cmdargs"]],[[["not",["numeric","nsteps"]],["=","nsteps",1]]],[".","debug","step",["nsteps"]]],["return"]],["`","break"]]),e._SetBindingList("debug_evals",["function","debug_evals",["cmdword","cmdargs","commander","debug","false","console","ex1","ex2","aterm","printlevel","result"],["=","console",[".","commander","console"]],["=","ex1",[".","commander","parseText",["cmdargs"]]],[[["==","cmdword","$eval"],["=","ex2",["tokenlast"]],["=","aterm",["atTerminator"]],[["==",["first","ex2"],["`",";"]],["=","printlevel",2]],[["==",["first","ex2"],["`",";>"]],["=","printlevel",1]]],["=","aterm","true"],[["==","cmdword","$pp"],["=","printlevel",2]],[["==",[".","cmdword","charAt",[0]],"$p"],["=","printlevel",1]],["return"]],[["not","aterm"],[".","console","printline",[["langExprLoc","ex2"],"$operator missing between ","ex1","$ and ","ex2"]],[".","console","newline","false"]],["=","result",["eval","ex1"]],[["identity","printlevel"],[".","console","print",["$    result: "]],[[["==","printlevel",2],[".","console","print",[[".","commander","print",["result"]]]]],[".","console","printq",["result"]]],[".","console","newline","false"]]]),e._SetBindingList("debug_helps",["function","debug_helps",["cmdword","cmdargs","commander","debug","false","console","text"],["=","console",[".","commander","console"]],[[["==","cmdargs","$me"],["=","text","$you're beyond it"]],["=","text",["call",["let","lambda",["proc"],[["||",["eq","proc","debug_breaks"],["==","cmdargs","$breakpoints"]],"$    b[reak] <location>             - set breakpoint at location\n            <location> if function(count, value) { <body> }\n            <location> if <expression>\n    clear   <location>             - clear breakpoint at location\n    delete <#> [<#>...]            - delete breakpoint(s) by #\n    disable [<#>]                  - disable breakpoint # | all\n    enable [<#>]                   - enable breakpoint # | all\n    i[nfo] (b)reakpoints           - show current breakpoints\n"],[["||",["eq","proc","debug_exceptions"],["==","cmdargs","$exceptions"]],"$    catch enable                   - catch all exceptions (default)\n    catch disable                  - don't catch any exceptions\n    catch if <expr>                - catch if <expr> true\n"],[["||",["eq","proc","debug_execs"],["==","cmdargs","$execution"]],"$    c[continue]                    - continue execution\n    f[finish]                      - finish current procedure\n    n[ext]                         - step over to next expression\n    s[tep]                         - step into next expression\n"],[["||",["eq","proc","debug_evals"],["==","cmdargs","$eval"]],"$    pp <expr>                      - evaluate expr and pretty-print result\n    eval <expr> [;]                - (same)\n    p <expr>                       - evaluate expr and print basic result\n    eval <expr> ;>                 - (same)\n    eval <expr> ;;                 - evaluate expr and don't print result\n"],[["eq","proc","debug_helps"],"$    help                           - list help topics\n    help <debug-command>           - get specific help on a command\n"],[["||",["eq","proc","debug_infos"],["==","cmdargs","$info"]],"$    i[nfo]                         - list info topics\n    i[nfo] <topic>                 - print debugger info on topic\n"],[["eq","proc","debug_list"],"$    list [<namespace>::]<procedure-name>[.<nestedname>]*[:start[:end]]\n"],[["==","cmdargs","$locations"],"$    [<namespace>::] <procname> [.<procname>...] [: line-number]\n"],[["||",["eq","proc","debug_stacks"],["==","cmdargs","$stacks"]],"$    bt                             - print backtrace\n    backtrace                      - (same)\n    frame <start#> [- <end#>]      - display stack frame(s)\n    scope <frame#>                 - change focus frame and display variables\n    up                             - change focus frame higher\n    down                           - change focus frame lower\n"],[["eq","proc","debug_quit"],"$    q[uit]                         - abandon all execution and restart repl\n"],"$help topics:\n    breakpoints                    - work with breakpoints\n    exceptions                     - work with exceptions\n    execution                      - stepping and continuing execution\n    eval                           - evaluating and printing expressions\n    help                           - using help\n    info                           - print debugger information\n    list                           - list procedure source\n    locations                      - syntax for procedure location references\n    stacks                         - backtrace and stack frame details\n    quit                           - quitting current execution\n"],["deref","debugCmds","cmdargs"]]]],[".","console","print",["text"]]]),e._SetBindingList("debug_infos",["function","debug_infos",["cmdword","cmdargs","commander","debug","false","console","args"],["=","console",[".","commander","console"]],["=","args",[".","cmdargs","match",[["RegExp","$([A-Za-z_]+)\\s*(.*)"]]]],["=","cmdword",["deref","args",1]],["=","cmdargs",["deref","args",2]],[["not","cmdword"],[".","console","print",["$info topics:\n    i[nfo] (b)reakpoints                           - show current breakpoints\n    i[nfo] (f)ind          <regex>                 - find matching symbols in active namespaces\n                           <regex> all | in <namespace>    ...in all or specified namespace\n    i[nfo] f(u)tures                               - show pending futures\n    i[nfo] (m)odules       [<name> [<name> ...]]   - show modules and components\n    i[nfo] (p)roc          [<name>]                - show information about procedure\n    i[nfo] (s)scope        [<frame>]               - show parameters and locals for frame\n"]]],[["||",["==","cmdword","$b"],["==","cmdword","$breakpoints"]],[".","commander","breakList","false"]],[["||",["==","cmdword","$f"],["==","cmdword","$find"]],[".",[".","commander","info"],"infofind",["cmdargs"]]],[["||",["==","cmdword","$u"],["==","cmdword","$future"],["==","cmdword","$futures"]],[".",[".","commander","info"],"infofutures",["cmdargs"]]],[["||",["==","cmdword","$m"],["==","cmdword","$module"],["==","cmdword","$modules"]],[".",[".","commander","info"],"infomod",["cmdargs"]]],[["||",["==","cmdword","$s"],["==","cmdword","$scope"]],["debug_stacks","$scope","cmdargs","commander","debug"]],[["||",["==","cmdword","$p"],["==","cmdword","$proc"],["==","cmdword","$procedure"]],[".",[".","commander","info"],"infoproc",["cmdargs"]]],[".","console","printline",["$ndb: info topic ","cmdword","$ not implemented"]]]),e._SetBindingList("debug_list",["function","debug_list",["cmdword","cmdargs","commander","debug","false","console","procdef","start","end","center","markdict"],["=","console",[".","commander","console"]],[[["&&","cmdargs",["!=","cmdargs","$"]],[".",[".","commander","info"],"infolist",["cmdargs"]],["return"]]],[[["not",[".",[".","commander","info"],"defloc"]],[".","console","printline",["$ndb: nothing to list"]],["return"]]],["=","procdef",[".",[".","commander","utils"],"resolveLocation",[[".",[".","commander","info"],"defloc"]]]],[[["not","procdef"],[".","console","printline",["$ndb: can't find ",[".",[".","commander","utils"],"locationString",[[".",[".","commander","info"],"defloc"]]]]],["return"]]],["=","start",[".",[".",[".","commander","info"],"defloc"],2]],["=","center",20],[[["not","start"],["=","start",1],["=","end","center"]],["preadjust","start","-",["quotient","center",2]],[[["<","start",1],["=","start",1]]],["=","end",["-",["+","start","center"],1]]],[".","console","printline",[[".","procdef",0],"space",[".",[".","commander","utils"],"locationString",[[".",[".","commander","info"],"defloc"]]]]],[[[".",[".",[".","commander","info"],"defloc"],2],["=","markdict",{dictionary:{}}],["set[","markdict",["+",[".",[".",[".","commander","info"],"defloc"],2],1],"$--\x3e"]]],[".","console","print",[[".",[".",[".","commander","info"],"utils"],"sourcelist",["procdef","start","end","markdict"]]]]]),e._SetBindingList("debug_stacks",["function","debug_stacks",["cmdword","cmdargs","commander","debug","false","console"],["=","console",[".","commander","console"]],["function","backtrace",["false","framedex","frame"],["function","paramstr",["frame","false","params","pinfo"],["=","params",[".",[".","frame",3],2]],[["not","params"],["=","pinfo","$()"]],[["atom","params"],["=","pinfo",[".","$ ","concat",[["tostring","params"]]]]],["=","pinfo","false"],["for",["let","lambda",["iter"],["=","iter",["iterate","params",["`","param"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","param",[".","iter","$value"]],[[["not","param"],["push",["`","local"],"pinfo"]],["push","param","pinfo"]]]]],["=","pinfo",["tostring",["reverse","pinfo"]]]],["=","framedex",0],["for",["let","lambda",["iter"],["=","iter",["iterate",[".","commander","frames"],["`","frame"]]],["loop","false",[[".","iter","$next",["iter"]],[".","iter","$final",["iter"]]],["=","frame",[".","iter","$value"]],[[["procedure","frame"],["=","finfo",[".","$ ","concat",[["tostring",["namespace",["second","frame"]]],"$::",[".","debug","procname",[[".",[".","frame",3],1]]],["paramstr","frame"]]]]],[["eq",["first","frame"],["`","interrupt"]],["=","finfo",[".","$ ","concat",[["tostring",["third","frame"]]]]]],["=","finfo","$"]],[".","console","printline",[["prepad",["postadjust","framedex","+",1],5],"$ ",["prepad",[".","frame",0],10],"finfo"]]]]]],["function","pscope",["false","nargs","frame"],["=","nargs",[".",[".","commander","utils"],"getnumargs",["cmdargs"]]],[[["not","nargs"],["=","nargs",[".","commander","focus"]],[".","console","printline",["$Scope is frame #","nargs"]]],[["||",["not",["numeric","nargs"]],[">=","nargs",[".",[".","commander","frames"],"length"]]],[".","console","printline",["$ndb: invalid frame number:","nargs"]],["return"]],[".","console","printline",["$Scope now frame #","nargs"]]],["set.","commander",["`","focus"],"nargs"],["=","frame",["deref",[".","commander","frames"],"nargs"]],[".","commander","updateDefproc",["frame"]],[".","console","printline",[[".","frame",0],"space",[".",[".","commander","utils"],"locationString",[[".",[".","commander","info"],"defloc"]]]]],[".","commander","printlocals",["frame"]]],["function","pframes",["false","nargs","startx","lastx"],["=","startx",["=","lastx",[".","commander","focus"]]],["=","nargs",[".",[".","commander","utils"],"getnumargs",["cmdargs"]]],[[["numeric","nargs"],["=","startx",["=","lastx","nargs"]]],[["eq",["first","nargs"],["`","range"]],[["<",[".","nargs",1],[".","nargs",2]],["=","startx",[".","nargs",1]],["=","lastx",[".","nargs",2]]],["=","startx",[".","nargs",2]],["=","lastx",[".","nargs",1]]],[["identity","nargs"],[".","console","print",["$ndb: invalid frame number or range:","nargs"]],["return"]]],[["<","startx",[".",[".","commander","frames"],"length"]],[[[">=","lastx",[".",[".","commander","frames"],"length"]],["=","lastx",["-",[".",[".","commander","frames"],"length"],1]]]],["while","false",[["not",["<=","startx","lastx"]]],[".","commander","printframedivider",["startx"]],[".","commander","printframe",[["deref",[".","commander","frames"],["postadjust","startx","+",1]]]]],[".","commander","printframedivider","false"]]],[["||",["==","cmdword","$bt"],["==","cmdword","$backtrace"]],["backtrace"]],[["==","cmdword","$frame"],["pframes"]],[["==","cmdword","$scope"],["pscope"]],[["||",["==","cmdword","$up"],["==","cmdword","$down"]],[[["&&",["==","cmdword","$up"],["<",[".","commander","focus"],["-",[".",[".","commander","frames"],"length"],1]]],[".","console","print",["$+Scope now frame #",["preadjust",[".","commander","focus"],"+",1]]]],[["&&",["==","cmdword","$down"],[">",[".","commander","focus"],0]],[".","console","print",["$-Scope now frame #",["preadjust",[".","commander","focus"],"-",1]]]],["return"]],[".","commander","updateDefproc",[["deref",[".","commander","frames"],"nargs"]]]],[".","console","printline",["$ndb: ","cmdword","$ not implemented yet"]]]),e._SetBindingList("debug_quit",["function","debug_quit",["cmdword","cmdargs","commander","debug"],["sudo",["=","exception",["`","exception"]]],["throw","debugger"]]),e._AddPropertyList("DebuggerInit",[["$.lingoInit","true"]]),e._SetBindingList("DebuggerInit",["function","DebuggerInit",["false","manifest"],["=","manifest",["`",["DebuggerREPL","debug_breaks","debug_exceptions","debug_execs","debug_evals","debug_helps","debug_infos","debug_list","debug_stacks","debug_quit","DebuggerInit"]]],[".",[".","Naan","module"],"build",["$CLI","$Debugger",["function","lambda",["modobj","compobj","false","debug"],["set.","compobj",["`","manifest"],"manifest"],["set.",[".","modobj","exports"],["`","DebuggerREPL"],"DebuggerREPL"],["=","debug",[".",[".",[".",["modlist"],"Util"],"exports"],"DebugController","false"]],[".","debug","setDefCommander",[["DebuggerREPL","debug"]]]]]]]),e._Execute(["DebuggerInit"]),e._SetNamespace(t,!0)}}("undefined"==typeof exports?this.Naanlang||(this.Naanlang={}):exports);

/* Copyright (c) 2017-2022 by Zulch Laboratories, Inc. */
!function(e){e.BootModule=function(e){"use strict";var t=e._SetNamespace("Util");e._CopyBinding("equal","=="),e._CopyBinding("setq","="),e._CopyBinding("times","*"),e._CopyBinding("and","&&"),e._CopyBinding("or","||"),e._CopyBinding("loop","while"),e._Import("number","difference","-"),e._Import("number","greater",">"),e._Import("number","lesser","<"),e._Import("number","times","*"),e._Import("number","plus","+"),e._Import("number","quotient","/"),e._Import("number","quotient","/."),e._SetBindingList("!=",["function","!=",["ex1","ex2"],["not",["equal","ex1","ex2"]]]),e._SetBindingList(">=",["function",">=",["ex1","ex2"],["or",["greater","ex1","ex2"],["equal","ex1","ex2"]]]),e._SetBindingList("<=",["function","<=",["ex1","ex2"],["or",["lesser","ex1","ex2"],["equal","ex1","ex2"]]]),e._SetBindingList("+=",["macro","+=",["ex1","ex2"],["assign","ex1",["+",["car","ex1"],["eval","ex2"]]]]),e._SetBindingList("-=",["macro","-=",["ex1","ex2"],["assign","ex1",["-",["car","ex1"],["eval","ex2"]]]]),e._SetBindingList("*=",["macro","*=",["ex1","ex2"],["assign","ex1",["*",["car","ex1"],["eval","ex2"]]]]),e._SetBindingList("/=",["macro","/=",["ex1","ex2"],["assign","ex1",["/",["car","ex1"],["eval","ex2"]]]]),e._SetBindingList("Component",["closure","Component",["modobj","name","filename","false","compobj"],["=","compobj",["new","object","this"]],["set.","compobj",["`","module"],"modobj"],["set.","compobj",["`","name"],"name"],["set.","compobj",["`","filename"],"filename"],["set.","compobj",["`","modsym"],[".","modobj","modsym"]],["set.","compobj",["`","manifest"],"false"],["set.","compobj",["`","loaded"],"false"],["set.","compobj",["`","package"],["function","package",["false","pkg","curactns","returner"],[".",[".","Naan","module"],"require",["$Util/Packager.nlg"]],[[["not",[".",[".","module","exports"],"pkgSave"]],["return","false"]]],["=","curactns",["nsactive"]],["=","returner",["makeReturner"]],["catch",[[".","modobj","activate","false"],["=","pkg",["pkgSave",["compress",[".","compobj","name"]],[".","compobj","manifest"]]]],[[["identity","true"],["ErrorDebuglog","$package exception: ","exception"],["return","false"]]],[["returner"]]],"pkg"]],["set.","compobj",["`","jspackage"],["function","jspackage",["false","pkg"],["=","pkg",["package"]],[[["not","pkg"],["return","false"]]],["pkgToJsSource","pkg"]]],["set.","compobj",["`","npackage"],["function","npackage",["false","pkg"],["=","pkg",["package"]],[["identity","pkg"],["JSONstringify","pkg"]]]],["set.","compobj",["`","save"],["function","save",["fpath","overwrite","false","text","pathobj","options"],["=","text",["jspackage"]],[[["not","text"],["return","false"]]],["=","fpath",[".","JSpath","normalize",["fpath"]]],["=","pathobj",[".","JSpath","parse",["fpath"]]],[[["==",["length",[".","pathobj","ext"]],0],["=","fpath",["strcat","fpath","$.json"]]]],["=","options",["xnew"]],[[["identity","overwrite"],["set.","options",["`","flags"],"$w"]],["set.","options",["`","flags"],"$wx"]],["=","fpath",[".","JSpath","join",[[".","js","d"],"fpath"]]],[".",[".","js","r",["$fs"]],"writeFileSync",["fpath","text","options"]],"fpath"]],"compobj"]),e._SetBindingList("Module",["closure","Module",["modules","modid","exns","false","modobj"],["=","modobj",["new","object","this"]],["set.","modobj",["`","owner"],"modules"],["set.","modobj",["`","id"],"modid"],["set.","modobj",["`","created"],[".","Date","now","false"]],["closure","makeActivator",["false","checkns","targns"],["=","checkns",["nsrights"]],["=","targns",["car",["nsactive"]]],["call",["enclose",["function","lambda","false",["function","returner","false",[["eq","checkns",[".",[".","Naan","local"],"nscaller","false"]],["nsactive",["cons","targns",["inherits"]]]]],"returner"],"targns"]]],["set.","modobj",["`","inherits"],["function","inherits",["false","result","nslist"],["=","nslist",[".","modobj","inherit"]],["loop","false",[["empty","nslist"]],["=","ns",["pop","nslist"]],[[["not",["member","ns","result"]],["push","ns","result"]]]],["push",["second",["nsactive","true"]],"result"],["reverse","result"]]],["set.","modobj",["`","makeComponent"],["function","lambda",["compname","filename","false","compobj"],["=","compobj",["Component","modobj","compname","filename"]],["set[",[".","modobj","components"],"compname","compobj"]]],["set.","modobj",["`","destroy"],["function","destroy","false",[".","modules","destroy",["modobj"]],"true"]],["call",["let","lambda",["false","mtuple"],["function","nsinit",["modobj","false","modsym"],["letlocal","$module"],["=","modsym",["compress","$module"]],["putproc","modsym",[".","modules","moduleProc"]],["assign","modsym","modobj"],["list",["car",["nsactive"]],["makeActivator"],"modsym"]],["function","registerns",["ns","modobj","false","curactns"],["=","curactns",["nsactive"]],["sudo",["nsactive",["cons","ns","curactns"]]],["=","ns",["nsinit","modobj"]],["sudo",["nsactive","curactns"]],"ns"],["function","makens",["nsname","modobj","false","ns"],["=","ns",["new","namespace","nsname"]],["=","ns",["nsinit","modobj"]],["sudo",["nsactive",["cdr",["nsactive"]]]],"ns"],["set.","modobj",["`","locpath"],"$"],["set.","modobj",["`","exports"],{dictionary:{}}],["put",[".","modobj","exports"],["`","module"],"modobj"],["set.","modobj",["`","children"],{array:[]}],["set.","modobj",["`","components"],{dictionary:{}}],[[["identity","exns"],["=","mtuple",["registerns","exns","modobj"]]],["=","mtuple",["makens","modid","modobj"]]],["set.","modobj",["`","namespace"],["car","mtuple"]],["set.","modobj",["`","activate"],["second","mtuple"]],["set.","modobj",["`","modsym"],["third","mtuple"]]]],"modobj"]),e._SetBindingList("Modules",["closure","Modules",["false","modules"],["=","modules",["new","object","this"]],["set.","modules",["`","list"],{dictionary:{}}],["set.","modules",["`","locations"],{dictionary:{}}],["set.","modules",["`","extensions"],{array:["$nlg","$npk"]}],["set.","modules",["`","queryString"],"$"],["function","reload",["false","mkeys"],["=","mkeys",["keys",[".","modules","list"]]],["loop","false",[["empty","mkeys"]],["catch",[[".",["deref",[".","modules","list"],["pop","mkeys"]],"reload","false"]],[[["identity","true"],"false"]],"false"]],["=","mkeys",["keys",[".","modules","list"]]],["loop","false",[["empty","mkeys"]],["catch",[[".",["deref",[".","modules","list"],["pop","mkeys"]],"postload","false"]],[[["identity","true"],"false"]],"false"]]],["loadNotify","reload"],["function","resave",["false","mkeys"],["=","mkeys",["keys",[".","modules","list"]]],["loop","false",[["empty","mkeys"]],["catch",[[".",["deref",[".","modules","list"],["pop","mkeys"]],"resave","false"]],[[["identity","true"],"false"]],"false"]]],["saveNotify","resave"],["set.","modules",["`","moduleProc"],["function","moduleProc",["modid"],[["not","modid"],["keys",[".","modules","list"]]],["deref",[".","modules","list"],"modid"]]],["set.","modules",["`","find"],["function","find",["test","false","modobj","mkeys"],["=","mkeys",["keys",[".","modules","list"]]],["loop","false",[["empty","mkeys"],"false"],["=","modobj",["xget",[".","modules","list"],["pop","mkeys"]]],[["test","modobj"],"modobj"]]]],["set.","modules",["`","letinherit"],["function","letinherit",["modfrom","false","modto","curac","nsfrom","nsto"],["=","curac",["nsactive"]],[[["string","modfrom"],["=","modfrom",["find",["function","lambda",["mod"],["==",[".","mod","id"],"modfrom"]]]]]],[["not","modfrom"],"false"],["=","modto",["find",["function","lambda",["mod"],["eq",[".","mod","namespace"],["car","curac"]]]]],[[[".","modfrom","inherit"],["=","nsfrom",["cons",[".","modfrom","namespace"],[".","modfrom","inherit"]]]],["=","nsfrom",["list",[".","modfrom","namespace"]]]],[[["identity","modto"],[[[".","modto","inherit"],["set.","modto",["`","inherit"],["append","nsfrom",[".","modto","inherit"]]]],["set.","modto",["`","inherit"],"nsfrom"]],["=","nsto",[".","modto","inherits","false"]]],["=","nsto","nsfrom"]],["nsactive",["append",["car","curac"],"nsto",["cdr","curac"]]],["nsactive"]]],["set.","modules",["`","require"],["closure","require",["fpath","options","data","false","ns","parent","pathobj","locpath","modname","modobj","compname","compath","compobj","error","presult","returner","extensions","pathext","query"],[[["&&","options",["not",["dictionary","options"]]],["throw",["Error",[".","$require(","concat",["fpath","$): invalid options"]]]]]],["=","ns",["||",[".","options","parent"],["nscaller"]]],["=","parent",["find",["function","lambda",["mod"],["eq",[".","mod","namespace"],"ns"]]]],["=","pathobj",[".","JSpath","parse",["fpath"]]],[[["||",["==",[".","pathobj","ext"],"$"],[".",["RegExp","$[/\\\\]$"],"test",["fpath"]]],["=","compath",[".","JSpath","join",["fpath",[".","pathobj","base"]]]],["=","pathobj",[".","JSpath","parse",["compath"]]]]],["=","locpath",[".","pathobj","dir"]],["=","modname",[".","JSpath","basename",["locpath"]]],[[["||",["==","modname","$."],["==","modname","$.."]],["=","modname","$"]]],[[[".","options","in"],["=","presult",["deref",[".","modules","locations"],[".","options","in"]]],[[["not","presult"],["throw",["Error",[".","$require(","concat",["fpath","$): in:",[".","options","in"],"$ undefined"]]]]]],["=","locpath",[".","JSpath","resolve",["presult","locpath"]]]],[["&&",["!=",[".","pathobj","ext"],"$"],["==","locpath","$"]],["=","locpath",[".","parent","locpath"]]],[["&&",[".",["RegExp","$^[.][.]?[/\\\\]"],"test",["fpath"]],[".","parent","locpath"]],["=","locpath",[".","JSpath","join",[[".","parent","locpath"],"locpath"]]]]],[[["not","locpath"],["=","locpath","$"]]],["set.","pathobj",["`","dir"],"locpath"],["=","compname",[".","pathobj","name"]],[[["&&","locpath",["!=","locpath","$"]],["=","modobj",["find",["function","lambda",["mod"],["==",[".","mod","locpath"],"locpath"]]]]]],[[["not","modobj"],[["==","modname","$"],["=","modobj","parent"]],["=","modobj",["find",["function","lambda",["mod"],["==",[".","mod","id"],"modname"]]]]]],[[["&&",["not",[".","options","read"]],["not",[".","options","reload"]],["deref",[".","modobj","components"],"compname"]],["return",[".","modobj","exports"]]]],["=","returner",["makeReturner"]],["catch",[["=","extensions",["new",[".","modules","extensions"]]],["loop","false",["=","pathext",[".","extensions","pop","false"]],[["not","pathext"]],["set.","pathobj",["`","ext"],[".","$.","concat",["pathext"]]],["set.","pathobj",["`","base"],[".",[".","pathobj","name"],"concat",[[".","pathobj","ext"]]]],["=","compath",[".","JSpath","format",["pathobj"]]],[[["not","modobj"],["=","modobj",["makeModule","modname"]]]],["=","query",[".","options","query"]],[[["not","query"],["=","query",[".","modules","queryString"]]]],[[[".","options","source"],[["string",[".","options","source"]],["=","presult",[".","options","source"]]],["=",["error","presult"],["call",[".","options","source"],"compath","query"]]],[[".",[".",[".","js","w"],"location"],"href"],["=",["error","presult"],["modWebReadFile","compath",[".","JSpath","dirname",[[".",[".",[".","js","w"],"location"],"href"]]],"query"]]],["=",["error","presult"],["modNodeReadFile","compath"]]],[[[">",["length","presult"],0],[[["==",[".","modobj","locpath"],"$"],["set.","modobj",["`","locpath"],"locpath"]]],[[[".","options","read"],["return","presult"]]],["=","compobj",[".","modobj","makeComponent",["compname",[".","pathobj","base"]]]],[".","modobj","activate","false"],["set.","modobj",["`","data"],"data"],["rdsDriver","presult","compath"],["set.","modobj",["`","data"],"undefined"],["returner"],["set.","compobj",["`","loaded"],"true"],["return",[".","modobj","exports"]]]]],["throw",["Error",[".","$require(","concat",["fpath","$): failed: "]],"compath","error"]],["set[",[".","modobj","components"],"compname","false"],"false"],[[["identity","true"],["ErrorDebuglog",[".","$require(","concat",["fpath","$): exception: "]],"exception"],["set[",[".","modobj","components"],"compname","false"],["returner"],["throw","exception"]]],"false"]]],["set.","modules",["`","defineLoc"],["function","defineLoc",["id","path"],[["not","id"],[".","modules","locations"]],["set[",[".","modules","locations"],"id","path"]]],["set.","modules",["`","defineExt"],["function","defineExt",["ext","reset","false","value"],[[["not","ext"],["=","value",[".","modules","extensions"]]]],[[["identity","reset"],["set.","modules",["`","extensions"],{array:[]}]]],[[["identity","ext"],[".",[".","modules","extensions"],"push",["ext"]],["=","value",[".","modules","extensions"]]]],"value"]],["set.","modules",["`","requireQuery"],["function","requireQuery",["query"],[["not","query"],[".","modules","queryString"]],["set.","modules",["`","queryString"],["modEncodeQuery","query"]]]],["set.","modules",["`","build"],["closure","build","args",["call",["function","lambda",["modname","compname","proc","args","false","modobj","compobj","curactns","presult","returner"],["=","curactns",["nsactive"]],["=","returner",["makeReturner"]],["=","modobj",["find",["function","lambda",["mod"],["==",[".","mod","id"],"modname"]]]],[[["identity","modobj"]],[["==",["namespace",["car","curactns"]],"modname"],["=","modobj",["makeModule","modname",["car","curactns"]]]],["=","modobj",["makeModule","modname"]]],["=","compobj",["deref",[".","modobj","components"],"compname"]],[[["not","compobj"],["=","compobj",[".","modobj","makeComponent",["compname"]]]]],["catch",[[".","modobj","activate","false"],["set.","compobj",["`","loaded"],"false"],["=","presult",["apply","proc",["cons","modobj","compobj","args"]]],["returner"],[["not","presult"],"false"],["set.","compobj",["`","loaded"],"true"],[".","modobj","exports"]],[[["identity","true"],["ErrorDebuglog","$module build exception: ","exception"],["returner"],["throw","exception"]]],"false"]],["car","args"],["second","args"],["third","args"],["cdddr","args"]]]],["set.","modules",["`","changeModNS"],["function","changeModNS",["name","false","modobj"],["=","name",["tostring","name"]],[[["||",["not","name"],["==","name","$"]],["printline","$modules: ",["keys",[".","modules","list"]]],["return","false"]]],["=","modobj",["find",["function","lambda",["mod"],["==",[".","mod","id"],"name"]]]],[["not","modobj"],["printline","$can't find ","name","$ -- please select from ",["keys",[".","modules","list"]]],"false"],[".","modobj","activate","false"],[".","modobj","id"]]],["set.","modules",["`","makeModule"],["function","makeModule",["name","exns","false","modobj"],["=","modobj",["Module","modules","name","exns"]],["set[",[".","modules","list"],"name","modobj"],"modobj"]],["set.","modules",["`","destroy"],["function","destroy",["modobj"],["set[",[".","modules","list"],[".","modobj","id"],"undefined"],["delete",[".","modobj","namespace"]],"true"]],"modules"]),e._SetBindingList("modEncodeQuery",["function","modEncodeQuery",["query","false","result","qkeys","item"],[[["not",["dictionary","query"]],["return","query"]]],["=","result",{array:[]}],["=","qkeys",["keys","query"]],["loop","false",[["empty","qkeys"]],["=","item",["pop","qkeys"]],[".","result","push",[[".",[".",[".","js","w"],"encodeURIComponent",["item"]],"concat",["$=",[".",[".","js","w"],"encodeURIComponent",[["deref","query","item"]]]]]]]],["=","result",[".","result","join",["$&"]]],[[">",[".","result","length"],0],[".","$?","concat",["result"]]],"result"]),e._SetBindingList("modWebReadFile",["closure","modWebReadFile",["filename","href","query"],["closure","getRequest",["url","callback","false","request"],["=","request",["xnew",[".",[".","js","w"],"XMLHttpRequest"]]],[".","request","addEventListener",["$load",["function","lambda",["event"],["callback","false","request"]]]],[".","request","addEventListener",["$error",["function","reqFailed",["event"],["callback",["Error","$modWebReadFile request failed","url"]]]]],[".","request","open",["$GET","url"]],[".","request","send","false"]],["function","readFile",["false","pending","url"],["=","pending",["new","nonce"]],[[["not",[".","href","endsWith",["$/"]]],["=","href",[".","href","concat",["$/"]]]]],[[[".","filename","startsWith",["$/"]],["=","filename",[".","filename","slice",[1]]]]],["=","url",[".","href","concat",["filename",["modEncodeQuery","query"]]]],["getRequest","url",["function","lambda",["error","req","false","result"],[[["==",[".","req","status"],200],["=","result",["list","false",[".","req","responseText"]]]],[["identity","req"],["=","result",["list",["Error","$modWebReadFile failed:","url",[".","req","status"]]]]],["=","result",["list","error"]]],[".","pending","signal",["result"]]]],[".","pending","wait","false"]],["readFile"]]),e._SetBindingList("modWebParseFile",["closure","modWebParseFile",["filename","href","query","false","error","text"],["=",["error","text"],["modWebReadFile","filename","href","query"]],[["identity","error"],["ErrorDebuglog","error"]],[["&&",[">",["length","text"],0],["rdsDriver","text","filename"]],"filename"]]),e._SetBindingList("modNodeReadFile",["closure","modNodeReadFile",["filename","false","fs","locpath","error","error2","text"],["function","readFileSync",["path","false","pending"],["=","pending",["new","nonce"]],[".","fs","readFile",["path",{dictionary:{$encoding:"$utf8"}},["function","lambda",["error","data"],[[["identity","error"],["=","error",["Error","$modNodeReadFile failed:","path","error"]]]],[".","pending","signal",[["list","error","data"]]]]]],[".","pending","wait","false"]],["=","fs",[".","js","r",["$fs"]]],["=","locpath",[".","JSpath","resolve",[[".","js","d"],"filename"]]],["=",["error","text"],["readFileSync","locpath"]],[[["identity","error"],["=","locpath",[".","JSpath","resolve",[[".","js","d"],"$../","filename"]]],["=",["error2","text"],["readFileSync","locpath"]],[["not","error2"],["=","error","false"]]]],["list","error","text"]]),e._SetBindingList("modNodeParseFile",["closure","modNodeParseFile",["filename","false","error","text"],["=",["error","text"],["modNodeReadFile","filename"]],[["identity","error"],["ErrorDebuglog","error"]],[["&&",[">",["length","text"],0],["rdsDriver","text","filename"]],"filename"]]),e._SetBindingList("modDriver",["closure","modDriver",["text","sourcename","false","package","dialob","errors","source","error","expr"],[[[".","text","startsWith",['$[["NaanPackage"']],["catch",[[[".",[".","js","w"],"JSON"],["=","package",[".",[".",[".","js","w"],"JSON"],"parse",["text"]]]],["=","package",[".",[".",[".","js","g"],"JSON"],"parse",["text"]]]],[[["identity","true"],["ErrorDebuglog","$require(","sourcename","$) package failed: ","exception"],["throw","exception"]]],"false"],[[["identity","package"],["pkgLoad","package"]],["printline","$require(","sourcename","$): package load failed"],"false"],["return"]]],["=","text",[".","text","replace",[["RegExp","$[\\r\\n^]+/(dialect)\\s+(\\w+)(?=[\\r\\n$])","$g"],["function","lambda",["match","cmd","arg","offset","str"],[[["==","cmd","$dialect"],["=","dialob",[".",[".","Naan","runtimelib"],"dialect",["arg"]]],[["not","dialob"],["debuglog",[".","$require(","concat",["sourcename","$): dialect ","arg","$ not found"]]]]],["debuglog",[".","$require(","concat",["sourcename","$): /","cmd","$ not understood"]]]],[".","$\n","repeat",[["-",[".",[".","match","split",["$\n"]],"length"],1]]]]]]],[[["not","dialob"],["=","dialob",[".",[".","Naan","runtimelib"],"dialect",[0]]],[["not","dialob"],["throw","$dialect support not available"]]]],["catch",[["=","errors",{array:[]}],["=","source",["new","textstream",[".","text","concat",["$\\r"]]]],["loop","false",["=",["error","expr"],[".","dialob","parse",["source"]]],[[["identity","expr"],["\\$",["evalactive","expr"]]],["=","errors",[".","errors","concat",["error"]]]]]],[[["and",["==",["tostring",["car","exception"]],"$internal"],["==",["tostring",["second","exception"]],"$end-of-file"]]],[["identity","true"],["ErrorDebugLog","$require(","sourcename","$) failed: ","exception"],["throw","exception"]]],"false"],[["==",[".","errors","length"],0],"true"],["printline","$Errors from require(","sourcename","$):"],["=","errors",[".","errors","reverse","false"]],["loop","false",[["==",[".","errors","length"],0]],["printline",[".","dialob","parseErrorString",[[".","errors","pop","false"]]]]],"false"]),e._SetBindingList("letlocal",["macro","letlocal","names",["call",["function","lambda",["false","localname","curac","syms"],["=","curac",["nsactive"]],["nsactive",["list",["car","curac"]]],["loop","false",[["atom","names"]],["=","localname",["pop","names"]],["=","syms",["cons",["compress","localname"],"syms"]]],["nsactive","curac"],["reverse","syms"]]]]),e._SetBindingList("letimport",["function","letimport","names",["call",["function","lambda",["false","item","count"],["function","import1",["source","localname","false","curac","sym"],[["not","source"],["debuglog","$letimport: source undefined:","source"]],[["not",["deref",[".",[".",["nsactive","true"],1],"index"],"localname"]],["=","curac",["nsactive"]],["nsactive",["list",["car","curac"]]],["=","sym",["compress","localname"]],["nsactive","curac"],[[["getproc","source"],["copyproc","sym","source"]],[["||",["procedure","source"],["xobject","source"]],["assign","sym","source"]],["debuglog","$letimport: no procedure binding:","source"],["return"]],["=","count",["+","count",1]]]],["function","importCat",["category","false","item","exlist","source"],[["not",["dictionary","category"]],["debuglog","$letimport: invalid category:","category"]],["=","exlist",["keys","category"]],["loop","false",[["empty","exlist"]],["=","item",["pop","exlist"]],["=","source",["xget","category","item"]],[[["||",["symbol","source"],["tuple","source"],["xobject","source"]],["import1","source",["tostring",["unintern","item"]]]],[["dictionary","source"],["importCat","source"]],["debuglog","$letimport: invalid category entry:",["keys","category"],"item"]]]],["=","count",0],["loop","false",[["empty","names"]],["=","item",["pop","names"]],[[["not",["atom","item"]],[["and",["==",["length","item"],2],["atom",["car","item"]],["string",["second","item"]]],["import1",["car","item"],["second","item"]]],["debuglog","$letimport: invalid pair:","item"],"false"],[["getproc","item"],["import1","item",["tostring",["unintern","item"]]]],[["dictionary","item"],["importCat","item"]],["debuglog","$letimport: invalid source:","item"]]],"count"]]]),e._SetBindingList("makeExport",["function","makeExport",["syms","false","result","sym"],["=","result",["new","dictionary"]],["loop","false",[["empty","syms"]],["=","sym",["pop","syms"]],["xset","result","sym","sym"]],"result"]),e._SetBindingList("makeReturner",["closure","makeReturner",["nslist","false","checkns","targns"],["=","checkns",["nsrights"]],[[["not","nslist"],["=","nslist",["nsactive"]]]],["=","targns",["car","nslist"]],["enclose",["function","lambda","false",[["eq","checkns",["nscaller"]],["nsactive","nslist"]]],"targns"]]),e._SetBindingList("loadNotify",["function","loadNotify",["recipient"],[[["not",["member","recipient","notifyList"]],["push","recipient","notifyList"]]],"true"]),e._SetBindingList("loadTrap",["function","loadTrap",["false","trav","tell"],["=","tell",[".","notifyList","reverse"]],["while","false",[["not",["tuple","tell"]]],["=","trav",["pop","tell"]],["call","trav"]]]),e._SetBindingList("saveNotify",["function","saveNotify",["recipient"],[[["not",["member","recipient","saveNotifyList"]],["push","recipient","saveNotifyList"]]],"true"]),e._SetBindingList("SaveTrap",["function","SaveTrap",["false","trav","tell"],["=","tell",[".","saveNotifyList","reverse"]],["while","false",[["not",["tuple","tell"]]],["=","trav",["pop","tell"]],["call","trav"]]]),e._SetBindingList("jsReload",["function","jsReload",["false","wsg"],["=","wsg",["||",[".","js","w"],[".","js","s"],[".","js","g"]]],["=","JSpath",[".","js","r",["$path"]]],["=","JSONstringify",[".",[".","wsg","JSON"],"stringify"]],["=","JSONparse",[".",[".","wsg","JSON"],"parse"]]]),e._SetValue("NaanBuildComponent",{dictionary:{$filename:"$Module.nlg",$name:"$Module",$manifest:["Component","Module","Modules","modEncodeQuery","modWebReadFile","modWebParseFile","modNodeReadFile","modNodeParseFile","modDriver","letlocal","letimport","makeExport","makeReturner","loadNotify","loadTrap","saveNotify","SaveTrap","jsReload","NaanBuildComponent","ModuleInit"]}}),e._SetBindingList("ModuleInit",["closure","ModuleInit",["false","modules","naanMod","utilMod"],["function","findNS",["nsid","false","allns","nsns"],["=","allns",["nsactive","true"]],["loop","false",[["empty","allns"]],["=","nsns",["pop","allns"]],[["==",["namespace","nsns"],"nsid"],"nsns"]]],["function","modlist","false",[".","modules","list"]],["jsReload"],["loadNotify","jsReload"],["=","modules",["Modules"]],["=","naanMod",[".","modules","makeModule",["$Naan","false",["findNS","$NaanRoot"]]]],["=","utilMod",[".","modules","makeModule",["$Util","naanMod",["nsrights"]]]],["set.",[".","utilMod","components"],["`","Module"],["Component","utilMod",[".","NaanBuildComponent","name"]]],["set.",[".",[".","utilMod","components"],"Module"],["`","loaded"],"true"],["set.",[".",[".","utilMod","components"],"Module"],["`","manifest"],[".","NaanBuildComponent","manifest"]],["set.",[".","Naan","module"],["`","require"],[".",[".","modules","require"],1]],["set.",[".","Naan","module"],["`","defineLoc"],[".",[".","modules","defineLoc"],1]],["set.",[".","Naan","module"],["`","defineExt"],[".",[".","modules","defineExt"],1]],["set.",[".","Naan","module"],["`","requireQuery"],[".",[".","modules","requireQuery"],1]],["set.",[".","Naan","module"],["`","build"],[".",[".","modules","build"],1]],["set.",[".","Naan","module"],["`","letinherit"],[".",[".","modules","letinherit"],1]],["set.",[".","Naan","module"],["`","chns"],[".",[".","modules","changeModNS"],1]],["set.",[".","Naan","module"],["`","letimport"],"letimport"],["set.",[".","Naan","module"],["`","export"],"makeExport"],["set.",[".","Naan","module"],["`","letlocal"],"letlocal"],["set.",[".","Naan","module"],["`","modlist"],"modlist"],["set.",[".","Naan","module"],["`","nodeparse"],"modNodeParseFile"],["set.",[".","Naan","module"],["`","webparse"],"modWebParseFile"],["=","LoadTrap","loadTrap"],["set.",[".","Naan","module"],["`","LoadNotify"],"loadNotify"],["set.",[".","Naan","module"],["`","SaveNotify"],"saveNotify"],["xlock",[".","Naan","module"],["car",["nsactive"]]],["sudo",["putproc","rdsDriver",["enclose",["getproc","modDriver"],["car",["nsactive","true"]]]]],"true"]),e._Execute(["ModuleInit"]),e._AddPropertyList("bt",[["$lingoDriver","bt"],["$escape","bt"],["$debugger","bt"],["$debugexception","bt"],["$driver","bt"],["$evalactive","break"]]),e._SetBindingList("debugCon",["closure","debugCon",["false","debug","defCommander"],["=","debug",["new","object","this"]],["set.","debug",["`","nshidden"],["list",[".",[".",[".",[".","Naan","module"],"modlist","false"],"Lib"],"namespace"]]],["set.","debug",["`","breakpoints"],{dictionary:{}}],["set.","debug",["`","bpenable"],"true"],["function","dsave",["false","saveob"],["=","saveob",{dictionary:{}}],["set.","saveob",["`","curns"],["nsactive"]],[[["not",["positive","debugDepth"]],["=","debugDepth",1]],["preadjust","debugDepth","+",1]],"saveob"],["function","drestore",["saveob"],["preadjust","debugDepth","-",1],["nsactive",[".","saveob","curns"]],"saveob"],["function","insertns",["curns"],[["not",["rest","curns"]],["cons",["nsrights"],"curns"]],["cons",["first","curns"],["insertns",["rest","curns"]]]],["function","clearframes","false",["set.","debug",["`","entrystack"],"false"],["set.","debug",["`","frames"],{array:[]}]],["function","storeframes",["all","false","procount","framex","framelist","frame","status"],["function","evaluate",["expr"],["eval","expr"]],[["not",[".","debug","entrystack"]],["=","procount",0],["set.","debug",["`","entrystack"],["stacktrace"]],[[["identity","all"],["=","framex",1]],["=","framex",["stepframe",[".","debug","entrystack"]]]],["set.","debug",["`","frames"],{array:[]}],["=","framelist",["deref",[".","debug","entrystack"],["-",["-","framex"],1]]],["loop","false",[["atom","framelist"]],["=","frame",["pop","framelist"]],[[["procedure","frame"],[[["not","all"],["=","status",["get","bt",["procname",[".",[".","frame",3],1]]]],[[["eq","status","bt"],["continue"]]],[["&&",[">","procount",0],["eq","status",["`","break"]]],["break"]]]],["preadjust","procount","+",1]]],[".",[".","debug","frames"],"push",["frame"]]],[["==","procount",0],[".",[".","debug","frames"],"push",[["list",["`","function"],"evaluate",[".",[".","evaluate","proc"],-3],[".","evaluate","proc"]]]]]]],["function","stepframe",["stack","false","framex","framelist","frame","found","debugout"],["=","framex",0],["=","framelist","stack"],["loop","false",[["atom","framelist"]],["=","frame",["pop","framelist"]],[[["&&","debugout",["==",[".","frame",0],"interrupt"]],[["||",["==",[".","frame",2],"$steptrap"],["==",[".","frame",2],"$breakpoint"]],["=","found","framex"],["break"]],[["&&",["not",["eq","exception",["`","exception"]]],["==",[".","frame",2],"$exception-hook"]],["=","found",["+","framex",1]],["break"]]],[["&&",["member",[".","frame",0],["`",["function","closure"]]],["member",[".","frame",1],["`",["debugBlock","startException","startEscape","start"]]]],["=","debugout","true"],["=","found","framex"]],[["&&",["==",[".","frame",0],["`","function"]],["==",[".","frame",1],["`","debugger"]]],["=","found","framex"],["break"]]],["preadjust","framex","+",1]],"found"],["function","procframe",["stack","startx","false","frame"],["loop","false",["=","frame",["deref","stack","startx"]],[[["not","frame"],["return","false"]]],[["procedure","frame"]],["preadjust","startx","+",1]],"startx"],["function","intrap",["false","framelist","frame"],["=","framelist",["stacktrace"]],["loop","false",[["atom","framelist"]],["=","frame",["pop","framelist"]],[[["==",[".","frame",0],"interrupt"],[["||",["==",[".","frame",2],"$steptrap"],["==",[".","frame",2],"$breakpoint"]],["return",[".","frame",2]]]]]],"false"],["function","steppedover",["dict","false","stack","curframe","origframe","procdex"],["=","curframe",["stepframe",["=","stack",["stacktrace"]]]],["=","origframe",["-",["length","stack"],[".","debug","nextOffset"]]],["=","procdex",["procframe","stack","curframe"]],["set.","debug",["`","nextOffset"],"false"],[[["||",["not","procdex"],[">","procdex","origframe"]],["return","false"]]],[[["==","procdex",["procframe","stack",["+","origframe",1]]],["return","false"]]],[[["stacktrap",["+","procdex",1],0,"debugBlock"],["return"]]],"false"],["function","brokeover",["dict","false","resume"],["=","resume",[".",[".","debug","breakHitDict"],"resume"]],["set.",[".","debug","breakHitDict"],["`","resume"],"undefined"],["set.",[".","debug","breakHitDict"],["`","enable"],"true"],["set.","debug",["`","breakHitDict"],"false"],"resume"],["function","checkReady","false",["!=",[".",[".",[".","js","t"],"termlist"],"length"],0]],["set.","debug",["`","depth"],["function","depth","false","debugDepth"]],["set.","debug",["`","procname"],["function","procname",["name","false","parent"],["=","parent",["deref",["@","name"],["`","\\.parent"]]],["=","name",["tostring","name"]],[["identity","parent"],[".",["procname","parent"],"concat",["$.","name"]]],"name"]],["set.","debug",["`","insideProc"],["function","insideProc",["false","frames","frame"],["=","frames",["new",[".","debug","frames"]]],["loop","false",[["==",[".","frames","length"],0]],["=","frame",[".","frames","shift","false"]],[[["procedure","frame"],["return",[".","frame",3]]]]],"false"]],["set.","debug",["`","frameProcTask"],["function","frameProcTask",["frame","false","frames","ftrav","procdef","bodydef"],[[["not",["array",[".","debug","frames"]]],["return","false"]]],["=","frames",["new",[".","debug","frames"]]],["loop","false",[["==",[".","frames","length"],0]],["=","ftrav",[".","frames","shift","false"]],[[["eq","ftrav","frame"],["=","frame","false"]]],[[["procedure","ftrav"],[[["not","frame"],["=","procdef",[".","ftrav",3]],[[["not","bodydef"],["=","bodydef","procdef"]]],["break"]]],["=","bodydef","false"]],[["||",["==",[".","ftrav",0],["`","body"]],["==",[".","ftrav",0],["`","loop"]]],[["not","bodydef"],["=","bodydef",[".","ftrav",2]]]]]],[["identity","procdef"],["list","procdef","bodydef"]]]],["set.","debug",["`","debugBlock"],["closure","debugBlock",["arg1","arg2","arg3","false","saveob","savech","savecmd","entry"],[[[">=","debugDepth",1],["set.","debug",["`","entrystack"],"false"],["storeframes","true"]],["storeframes"]],["=","saveob",["dsave"]],["=","savech",["textstreams"]],["nsactive",["insertns",[".","saveob","curns"]]],["=","savecmd",{dictionary:{}}],[".",[".","debug","commander"],"entering",["savecmd"]],["catch",[[[["string","arg1"],["=","entry","arg1"]],["=","entry",["intrap"]],[["==","entry","$steptrap"],[[[".","debug","breakHitDict"],[["brokeover","arg1"],["return"]]]],[[".","debug","nextOffset"],[["steppedover","arg1"],["return"]]],[[".","debug","startPause"],["set.","debug",["`","startPause"],"false"],["=","entry","$startpause"]]],[["==","entry","$breakpoint"],[[["not",[".","debug","bpenable"]],["return"]]],["set.","debug",["`","breakHitDict"],"arg1"]],[["not","entry"],["=","entry","$"]]],["set.","debug",["`","nextOffset"],"false"],["loop","false",[[".",[".","debug","commander"],"pauser",["entry","arg1","arg2","arg3"]]]]],"false",[[".",[".","debug","commander"],"leaving",["savecmd"]],["textstreams","savech"],["drestore","saveob"],[[[".","debug","bpenable"],["breakpoint","true"]]],["clearframes"]]]]],["function","skipbreak","false",["set.",[".","debug","breakHitDict"],["`","enable"],"false"]],["set.","debug",["`","resume"],["function","resume","false",[[".",[".","debug","breakHitDict"],"enable"],["set.",[".","debug","breakHitDict"],["`","resume"],"true"],["skipbreak"],["stacktrap",["stepframe",["stacktrace"]],1,"debugBlock"]]]],["set.","debug",["`","step"],["function","step",["nstep","false","stack","stackdex","task"],["=","stackdex",["stepframe",["=","stack",["stacktrace"]]]],["=","task",[".",[".",["deref","stack","stackdex"],3],2]],[[["&&",["symbol",[".","task",0]],["member",[".",[".",[".",[".","task",0],"proc"],1],"namespace"],[".","debug","nshidden"]]],["return",["stepover"]]]],["set.","debug",["`","nextOffset"],"false"],["skipbreak"],["stacktrap",["stepframe",["stacktrace"]],"nstep","debugBlock"]]],["set.","debug",["`","stepup"],["function","stepup",["false","stack","stackdex","found"],["set.","debug",["`","nextOffset"],"false"],["skipbreak"],["=","stackdex",["stepframe",["=","stack",["stacktrace"]]]],["loop","false",[[[">=","stackdex",["length","stack"]],["return"]]],[[["procedure",["deref","stack","stackdex"]],[[["get","bt",["procname",[".",[".",["deref","stack","stackdex"],3],1]]],["return"]]],[[["identity","found"],["break"]]],["=","found","stackdex"]]],[[["eq",["deref","stack",0],["`","loop"]],["=","found","stackdex"]]],["preadjust","stackdex","+",1]],["stacktrap","found",0,"debugBlock"]]],["set.","debug",["`","stepover"],["function","stepover",["false","stack","curframe"],["skipbreak"],["=","curframe",["stepframe",["=","stack",["stacktrace"]]]],["set.","debug",["`","nextOffset"],["-",["length","stack"],"curframe"]],[[["stacktrap","curframe",1,"debugBlock"],["return","true"]]],["set.","debug",["`","nextOffset"],"false"]]],["set.","debug",["`","quit"],["function","quit","false",["sudo",["=","exception",["`","exception"]]],["throw","debugger"]]],["set.","debug",["`","startEscape"],["function","startEscape","false",[[["not",["checkReady"]],["debuglog","$debug.startEscape: can't enter debugger before terminal is ready"],["return"]]],["storeframes"],["debugBlock","$escape"]]],["set.","debug",["`","startException"],["function","startException",["except"],[[["not",["checkReady"]],[[["ErrorObject","except"],["=","except",["ErrorString","except"]]]],["debuglog","$debug.startException: debugger not ready for","except"],["return"]]],["storeframes"],["set.","debug",["`","startExcept"],"except"],["debugBlock","$exception","except"]]],["set.","debug",["`","start"],["function","start",["pause"],[[["not",["checkReady"]],["debuglog","$debug.start: can't enter debugger before terminal is ready"],["return"]]],["storeframes"],[["identity","pause"],["set.","debug",["`","startPause"],"true"],[[["stacktrap",["stepframe",["stacktrace"]],0,"debugBlock"],["return"]]],["debugBlock","$startfail"]],["debugBlock","$"]]],["set.","debug",["`","setDefCommander"],["function","setDefCommander",["commander"],["=","defCommander","commander"],[["not",[".","debug","commander"]],["set.","debug",["`","commander"],"defCommander"]]]],["set.","debug",["`","setCommander"],["function","setCommander",["commander"],[["not","commander"],["set.","debug",["`","commander"],"defCommander"]],[".",[".","debug","commander"],"endPauser","false"],["set.","debug",["`","commander"],"commander"]]],["set.","debug",["`","breakHit"],["function","breakHit",["where","value","false","keylist","bpid","entry","result"],["=","keylist",["keys",[".","debug","breakpoints"]]],["loop","false",["=","bpid","false"],[["atom","keylist"]],["=","bpid",["toint",["pop","keylist"]]],[["eq",[".",[".",["deref",[".","debug","breakpoints"],"bpid"],"where"],"task"],[".","where","task"]]]],[[["not",["deref",[".","debug","breakpoints"],"bpid"]],["breakpoint",[".","where","task"],"undefined"],[".","debug","resume","false"],["return","false"]]],["=","entry",["deref",[".","debug","breakpoints"],"bpid"]],["preadjust",[".","entry","hitcount"],"+",1],[[[".","entry","conditional"],[[["procedure",[".","entry","conditional"]],["=","result",["call",[".","entry","conditional"],[".","entry","hitcount"],[".","entry","value"]]]],["=","result",["eval",[".","entry","conditional"]]]],[["not","result"],[".","debug","resume","false"],["return","false"]]]],"bpid"]],["function","breakTasks",["procdef","task","false","taskpath","above","below","pardef","procs","tasks"],["=","taskpath",["tuplepath","procdef","task"]],["=","above",["new","array","taskpath"]],["loop","false",["=","pardef",["apply",["`","."],["list","procdef",["totuple","above"]]]],[[["member",[".","pardef",0],["`",["closure","macro"]]],["=","procs",["instances",[".","pardef",1]]],[[["not","procs"],["return","task"]]],["=","tasks",{array:[]}],["while","false",[["not",["tuple","procs"]]],["=","task",["apply",["`","."],["list",[".",["pop","procs"],"proc"],"below"]]],[[["identity","task"],[".","tasks","push",["task"]]]]],["return","tasks"]]],[["==",[".","above","length"],0]],["push",[".","above","pop","false"],"below"]],"task"],["set.","debug",["`","breakAdd"],["function","breakAdd",["procdef","task","expr","false","firstid","keylist","bpid","tasks","bpdict"],["=","firstid",0],["=","keylist",["keys",[".","debug","breakpoints"]]],["loop","false",[["not",["member",["tostring",["preadjust","firstid","+",1]],"keylist"]]]],["loop","false",[["atom","keylist"]],["=","bpid",["toint",["pop","keylist"]]],["=","bpdict",[".",["deref",[".","debug","breakpoints"],"bpid"],"where"]],[[["eq",[".","bpdict","task"],"task"],["set.","bpdict",["`","conditional"],"expr"],["set.","pbdict",["`","hitcount"],0],["return","bpid"]]]],["=","tasks",["breakTasks","procdef","task"]],["=","bpdict",["breakpoint","tasks",[".","debug","debugBlock"]]],["set.","bpdict",["`","task"],"task"],[[["not","bpdict"],["return","false"]]],["set.","bpdict",["`","breakID"],"firstid"],["set[",[".","debug","breakpoints"],"firstid",{dictionary:{$procdef:"procdef",$where:"bpdict",$hitcount:0,$conditional:"expr"}}],"firstid"]],["set.","debug",["`","breakClear"],["function","breakClear",["procdef","task","false","keylist","tasks","bpid"],["=","keylist",["keys",[".","debug","breakpoints"]]],["=","tasks",["breakTasks","procdef","task"]],["loop","false",[["atom","keylist"]],["=","bpid",["toint",["pop","keylist"]]],[[[">=",[".","tasks","indexOf",[[".",[".",["deref",[".","debug","breakpoints"],"bpid"],"where"],"task"]]],0],["breakpoint","tasks","undefined"],["set[",[".","debug","breakpoints"],"bpid","undefined"],["return","true"]]]],"false"]],["set.","debug",["`","breakDelete"],["function","breakDelete",["bpid","false","tasks"],[[["not",["deref",[".","debug","breakpoints"],"bpid"]],["return","false"]]],["=","tasks",["breakTasks",[".",["deref",[".","debug","breakpoints"],"bpid"],"procdef"],[".",[".",["deref",[".","debug","breakpoints"],"bpid"],"where"],"task"]]],["breakpoint","tasks","undefined"],["set[",[".","debug","breakpoints"],"bpid","undefined"],"true"]],["set.","debug",["`","breakAble"],["function","breakAble",["bpid","enabled","false","bpdict"],["=","bpdict",[".",["deref",[".","debug","breakpoints"],"bpid"],"where"]],[["identity","enable"],["set.","bpdict",["`","enable"],"true"]],["set.","bpdict",["`","enable"],"false"]]],["set.","debug",["`","breakGlobalAble"],["function","breakGlobalAble",["enable"],[[["identity","enable"],["set.","debug",["`","bpenable"],"true"]],["set.","debug",["`","bpenable"],"false"]],["breakpoint",[".","debug","bpenable"]]]],"debug"]),e._SetBindingList("debugger",["function","debugger",["pause"],[".",["DebugController"],"start",["pause"]]]),e._SetBindingList("debugescape",["function","debugescape","false",[".",["DebugController"],"startEscape","false"]]),e._SetBindingList("debugexception",["function","debugexception","false",[[["and",["==",["tostring",["first","exception"]],"$internal"],["==",["tostring",["second","exception"]],"$end-of-file"]],["return"]]],[[["==",["tostring","exception"],"$driver"],["return"]]],[[["==",["tostring","exception"],"$debugger"],["return"]]],[[["==",["tostring","exception"],"$DebuggerREPL"],["return"]]],[".",["DebugController"],"startException",["exception"]]]),e._SetBindingList("DebugController",["function","DebugController","false",[[["eq","ndbController",["`","ndbController"]],["=","ndbController",["debugCon"]]]],"ndbController"]),e._AddPropertyList("DebugInit",[["$.lingoInit","true"]]),e._SetBindingList("DebugInit",["function","DebugInit",["false","manifest"],["=","manifest",["`",["bt","debugCon","debugger","debugescape","debugexception","DebugController","DebugInit"]]],[".",[".","Naan","module"],"build",["$Util","$Debug",["function","lambda",["modobj","compobj"],["=","ndbController",["`","ndbController"]],["set.","compobj",["`","manifest"],"manifest"],["set.",[".","modobj","exports"],["`","DebugController"],"DebugController"],["set.",[".","modobj","exports"],["`","debugger"],"debugger"],[["symbol","NideBuild"],["sudo",["moveproc","debugescape",["`","escape"]]],["sudo",["moveproc","debugexception",["`","exception"]]],["sudo",["set.",[".","Naan","debug"],["`","debugger"],"debugger"]]]]]]]),e._Execute(["DebugInit"]),e._SetBindingList("NaanError",["closure","NaanError",["false","nerr"],["=","nerr",["new","object","this"]],["set.","nerr",["`","errorID"],"$Naan Error"],["set.","nerr",["`","debug"],"false"],["function","procname",["name","defns","false","parent","strname"],["=","parent",["deref",["@","name"],["`","\\.parent"]]],[[["lambda","name"],["=","strname","$()"]],["=","strname",[".","name","tostring","false"]]],[["identity","parent"],[".",["procname","parent","defns"],"concat",["$.","strname"]]],[["!=",[".","name","namespace"],"defns"],[".",[".",[".","name","namespace"],"tostring"],"concat",["$::","strname"]]],"strname"],["function","trace",["exclude","defns","false","stack","frame","output"],["=","stack",["stacktrace"]],["=","output",{array:[]}],["loop","false",[["atom","stack"]],["=","frame",["pop","stack"]],[[["procedure","frame"],[["<=",["postadjust","exclude","-",1],0],[".","output","push",[["procname",[".",[".","frame",3],1],"defns"]]]]],[["==",[".","frame",0],["`","interrupt"]],[".","output","push",["$[interrupt]"]],["break"]]]],[".",[".","output","reverse","false"],"join",["$ / "]]],["set.","nerr",["`","createError"],["function","createError",["parts","ns","false","nanerr","part","lastparts","badarray"],["function","addToHistory",["item","false","hist","keylist","key","history"],[[["||",["not",[".","nanerr","history"]],["not",["array",[".","nanerr","history"]]]],["set.","nanerr",["`","history"],{array:[]}]]],["=","hist",{dictionary:{}}],["=","keylist",["keys","item"]],["loop","false",[["atom","keylist"]],["=","key",["pop","keylist"]],[[["==","key","$history"],["=","history",[".","item","history"]]],[["!=","key","$error"],["set[","hist","key",["deref","item","key"]]]]],[".",[".","nanerr","history"],"push",["hist"]],[".","history","forEach",[["function","lambda",["old"],["addToHistory","old"]]]]],["function","addErrorList",["errs","false","err","etrim","keylist","key"],["loop","false",[["atom","errs"]],["=","err",["pop","errs"]],[[["==",[".","err","error"],[".","nerr","errorID"]],["=","etrim",{dictionary:{}}],["=","keylist",["keys","err"]],["loop","false",[["atom","keylist"]],["=","key",["pop","keylist"]],[[["&&",["!=","key","$error"],["||",["!=","key","$stack"],["!=",["deref","err","key"],[".","nanerr","stack"]]],["||",["!=","key","$module"],["!=",["deref","err","key"],[".","nanerr","module"]]]],["set[","etrim","key",["deref","err","key"]]]]],[[["||",["not",[".","nanerr","errors"]],["not",["array",[".","nanerr","errors"]]]],["set.","nanerr",["`","errors"],{array:[]}]]],[".",[".","nanerr","errors"],"push",["etrim"]]],["=","badarray","true"]]]],["function","addDictionary",["dict","false","keylist","key"],["=","keylist",["keys","dict"]],["loop","false",[["atom","keylist"]],["=","key",["pop","keylist"]],["set[","nanerr","key",["deref","dict","key"]]]],["function","addJSerror",["item","false","keylist","key","dkey"],["=","keylist",["keys","item"]],[[["not","keylist"],["=","keylist",["`",["$name","$message"]]]]],["loop","false",[["atom","keylist"]],["=","key",["pop","keylist"]],[[["xobject",["deref","item","key"]],["continue"]]],[[["deref","nanerr","key"],["=","dkey",[".","$_","concat",["key"]]]],["=","dkey","key"]],[[["&&",["deref","item","key"],["not",["deref","nanerr","dkey"]]],["set[","nanerr","dkey",["deref","item","key"]]]]]],["=","nanerr",{dictionary:{$error:[".","nerr","errorID"],$occurred:[".","Date","now","false"]}}],["loop","false",[["atom","parts"]],["=","part",["pop","parts"]],[[["xobject","part"],["addJSerror","part"]],[["dictionary","part"],[["==",[".","part","error"],[".","nerr","errorID"]],["addToHistory","part"]],["addDictionary","part"]],[["array","part"],["push","part","lastparts"]],[[".","nanerr","memo"],["set.","nanerr",["`","memo"],[".",[".","nanerr","memo"],"concat",["$ ",["tostring","part"]]]]],["set.","nanerr",["`","memo"],["tostring","part"]]]],["set.","nanerr",["`","stack"],["trace",3,"ns"]],["set.","nanerr",["`","module"],[".",["car",["exists","$module","ns"]],"id"]],["loop","false",[["atom","lastparts"]],["addErrorList",["pop","lastparts"]]],[[["not",[".","nanerr","memo"]],["debuglog","$NaanError.createError: no error memo at",[".","nanerr","stack"]]]],[[["identity","badarray"],["debuglog","$NaanError.createError: ignoring array argument"]]],[[[".","nerr","debug"],["call",["function","ErrorDebuglog","args",[".","nerr","debugError",["args"]]],"$new","nanerr"]]],"nanerr"]],["set.","nerr",["`","toString"],["function","toString",["nanerr","options","false","output","keylist","key","history"],["=","output","$"],["=","keylist",["keys","nanerr"]],["loop","false",[["atom","keylist"]],["=","key",["pop","keylist"]],[[["==","key","$error"]],[["==","key","$occurred"]],[["==","key","$memo"]],[["==","key","$stack"]],[["==","key","$module"]],[["==","key","$history"],["=","history",[".","nanerr","history"]]],[[["!=","output","$"],["=","output",[".","output","concat",["$, "]]]]],["=","output",[".","output","concat",["key","$=",["tostring",["deref","nanerr","key"]]]]]]],[[["identity","history"],[[["!=","output","$"],["=","output",[".","output","concat",["$, "]]]]],["=","output",[".","output","concat",["$"]]],[".",[".","nanerr","history"],"forEach",[["function","lambda",["item","index"],[[["!=","index",0],["=","output",[".","output","concat",["$ | "]]]]],["=","output",[".","output","concat",[["toString","item",{dictionary:{$memo:"true"}}]]]]]]],["=","output",[".","output","concat",["$"]]]]],[["&&",[".","options","memo"],[".","nanerr","memo"]],[".",[".","nanerr","memo"],"concat",["$ ","output"]]],"output"]],["set.","nerr",["`","toDescription"],["function","toDescription",["nanerr"],[["!=",[".","nanerr","error"],[".","nerr","errorID"]],["tostring","nanerr"]],[[".","nanerr","memo"],["toString","nanerr",{dictionary:{$memo:"true"}}]],[".","$Error ","concat",[["toString","nanerr"]]]]],["set.","nerr",["`","debugError"],["function","debugError",["args","false","arg","text","nanerr","nanerrs"],["loop","false",[["atom","args"]],["=","arg",["pop","args"]],[[["&&",["dictionary","arg"],["==",[".","arg","error"],[".","nerr","errorID"]]],["=","nanerr","arg"]],[["array","arg"],["=","nanerrs","arg"]],["push","arg","text"]]],["=","text",["reverse","text"]],[[["identity","nanerr"],[[["identity","text"],["=","text",["append","text","$=>"]]],["=","text","$"]],["=","text",["append","text",[".","nerr","toDescription",["nanerr"]]]]],[["&&",["not","text"],"nanerrs"],["=","text",[".",[".",[".","nanerrs","length"],"tostring"],"concat",["$ errors:"]]]]],["apply","debuglog","text"],["loop","false",[["||",["not","nanerrs"],["==",[".","nanerrs","length"],0]]],["=","nanerr",[".","nanerrs","shift","false"]],["=","text",["append","$    ",[".","nerr","toDescription",["nanerr"]]]],["apply","debuglog","text"]]]],"nerr"]),e._SetBindingList("Error",["function","Error","parts",[".","naneErrorManager","createError",["parts",["nscaller"]]]]),e._SetBindingList("ErrorObject",["function","ErrorObject",["err"],["&&",["dictionary","err"],["==",[".","err","error"],"$Naan Error"]]]),e._SetBindingList("ErrorString",["function","ErrorString",["nanerr"],[["string","nanerr"],"nanerr"],[".","naneErrorManager","toString",["nanerr","true"]]]),e._SetBindingList("ErrorDebuglog",["function","ErrorDebuglog","args",[".","naneErrorManager","debugError",["args"]]]),e._AddPropertyList("ErrorInit",[["$.lingoInit","true"]]),e._SetBindingList("ErrorInit",["function","ErrorInit",["false","manifest"],["=","manifest",["`",["NaanError","Error","ErrorObject","ErrorString","ErrorDebuglog","ErrorInit"]]],[".",[".","Naan","module"],"build",["$Util","$Error",["function","lambda",["modobj","compobj"],["set.","compobj",["`","manifest"],"manifest"],["set.",[".","modobj","exports"],["`","Error"],"Error"],["set.",[".","modobj","exports"],["`","ErrorObject"],"ErrorObject"],["set.",[".","modobj","exports"],["`","ErrorString"],"ErrorString"],["set.",[".","modobj","exports"],["`","ErrorDebuglog"],"ErrorDebuglog"],["set.",[".","Naan","module"],["`","Error"],"Error"],["set.",[".","Naan","module"],["`","ErrorObject"],"ErrorObject"],["set.",[".","Naan","module"],["`","ErrorString"],"ErrorString"],["set.",[".","Naan","module"],["`","ErrorDebuglog"],"ErrorDebuglog"]]]],["=","naneErrorManager",["NaanError"]]]),e._Execute(["ErrorInit"]),e._SetBindingList("MakeComponentJS",["function","MakeComponentJS",["fpath","false","pkg"],[["=","pkg",[".",[".","Naan","module"],"package",["fpath"]]],["pkgToJsSource","pkg"]]]),e._SetBindingList("MakePackage",["function","MakePackage",["pkgname","roots","prerequisites","omitlist"],["pkgSave","pkgname","roots","prerequisites","omitlist"]]),e._SetBindingList("makeSourceString",["function","makeSourceString",["item","false","text","result"],["=","text",["explode","item"]],["=","result",'$"'],[[["string","item"],["=","result",[".","result","concat",["$$"]]]],[["==",["tostring","item"],"$."]],[["or",["eq",["car","text"],"$$"],["eq",["car","text"],"$."],["eq",["car","text"],"$\\"]],["=","result",[".","result","concat",["$\\\\"]]]]],["loop","false",[["empty","text"]],[[["eq",["car","text"],'$"'],["=","result",[".","result","concat",['$\\"']]]],[["eq",["car","text"],"$\\"],["=","result",[".","result","concat",["$\\\\"]]]],[["eq",["car","text"],"$\t"],["=","result",[".","result","concat",["$\\t"]]]],[["eq",["car","text"],"$\n"],["=","result",[".","result","concat",["$\\n"]]]],[["eq",["car","text"],"$\r"],["=","result",[".","result","concat",["$\\r"]]]],[["eq",["car","text"],"$\b"],["=","result",[".","result","concat",["$\\b"]]]],[["eq",["car","text"],"$\f"],["=","result",[".","result","concat",["$\\f"]]]],[["eq",["car","text"],"$\v"],["=","result",[".","result","concat",["$\\u000b"]]]],[["eq",["car","text"],"$\0"],["=","result",[".","result","concat",["$\\u0000"]]]],["=","result",[".","result","concat",[["car","text"]]]]],["=","text",["cdr","text"]]],[".","result","concat",['$"']]]),e._SetBindingList("WritePackageJS",["function","WritePackageJS",["list","false","chan"],["function","writeList",["list","false","item","notfirst"],[[["not",["empty","list"]],[".","chan","print",["["]]]],["loop","false",[["empty","list"]],[[["identity","notfirst"],[".","chan","print",["comma","space"]]],["=","notfirst","true"]],["=","item",["pop","list"]],[[["or",["symbol","item"],["string","item"]],[".","chan","print",[["makeSourceString","item"]]]],[["integer","item"],[".","chan","print",["item"]]],[["float","item"],[".","chan","print",['$".',"item",'$"']]],[["or",["dictionary","item"],["array","item"]],[".","chan","print",[[".",[".",[".",[".",[".",[".","Naan","module"],"modlist","false"],"Lingo"],"exports"],"Base"],"print",["item"]]]]],[".","chan","writeList",["item"]]]],[".","chan","print",[["`","]"]]]],["=","chan",["new","textstream","$","string"]],["writeList","list"],[".","chan","taketext","false"]]),e._SetBindingList("pkgSave",["function","pkgSave",["pkgname","roots","options","false","pkgns","goodns","registry","xlate","storenum","wmapSymbol","wmapUnintern","mapString","mapInteger","mapFloat","wmapArray","wmapDictionary","mapList","wmapProcedure","mapDialect","indexValue","listSymbol","listUnintern","listString","listInteger","listFloat","listArray","listDictionary","listList","listProcedure","listDialect","reported"],["function","store",["expr","false","key","exlist","dialect"],[["symbol","expr"],[[["&&","expr",["not",["interned","expr"]],["not",["member","expr","roots"]]],[[["deref","wmapUnintern","expr"]],["set[","wmapUnintern","expr",["preadjust","storenum","+",1]],["push","expr","listUnintern"],["set[","indexValue","storenum","expr"],"storenum"],["return"]]],[[["&&","expr",["not",["member",[".","expr","namespace"],"goodns"]]],["=","dialect",[".","registry","findNamespace",[[".","expr","namespace"]]]],[[["identity","dialect"],["=","key",["store",["list",[".","dialect","name"],[".","expr","tostring"]]]],[[["deref","mapDialect","key"]],["set[","mapDialect","key",["preadjust","storenum","+",1]],["push","key","listDialect"],["set[","indexValue","storenum","key"],"storenum"],["return"]]],[["defbinding","expr"],[["not",["eq",["defbinding","expr"],[".","expr","proc"]]],["printline","$pkgSave: cannot save non-default binding for well-known symbol ","expr"],["set[","reported","expr","true"]]],[["&&",["not",[".","options","nsignore"]],["not",["deref","reported","expr"]]],["printline","$pkgSave: cannot save ",[".","expr","namespace"],"$ from ","pkgns","$ for symbol ","expr"],["set[","reported","expr","true"]]]],[[["eq","expr","undefined"],["=","expr","$undefined"]]],[["deref","wmapSymbol","expr"]],["set[","wmapSymbol","expr",["preadjust","storenum","+",1]],["push","expr","listSymbol"],["set[","indexValue","storenum","expr"],"storenum"],[["string","expr"],[["deref","mapString","expr"]],["set[","mapString","expr",["preadjust","storenum","+",1]],["push","expr","listString"],["set[","indexValue","storenum","expr"],"storenum"],[["integer","expr"],["=","key",["tostring","expr"]],[["deref","mapInteger","key"]],["set[","mapInteger","key",["preadjust","storenum","+",1]],["push","key","listInteger"],[[["<","expr",[".","Number","$MAX_SAFE_INTEGER"]],["set[","indexValue","storenum","expr"]],["set[","indexValue","storenum","key"]],"storenum"],[["float","expr"],["=","key",["tostring","expr"]],[["deref","mapFloat","key"]],["set[","mapFloat","key",["preadjust","storenum","+",1]],["push","key","listFloat"],["set[","indexValue","storenum","expr"],"storenum"],[["array","expr"],[["deref","wmapArray","expr"]],["=","exlist","false"],["=","key",0],["loop","false",[[">=","key",[".","expr","length"]]],["push",["deref","expr",["postadjust","key","+",1]],"exlist"]],["=","key",["store",["reverse","exlist"]]],["set[","wmapArray","expr",["preadjust","storenum","+",1]],["push","expr","listArray"],["set[","indexValue","storenum","key"],"storenum"],[["dictionary","expr"],[["deref","wmapDictionary","expr"]],["=","key",["store",["objToList","expr"]]],["set[","wmapDictionary","expr",["preadjust","storenum","+",1]],["push","expr","listDictionary"],["set[","indexValue","storenum","key"],"storenum"],[["tuple","expr"],[["&&",["procedure","expr"],["eq",[".",[".","expr",1],"proc"],"expr"]],["storeProcedure","expr"]],["storeList","expr"]],[[["not",["deref","reported","expr"]],["printline","$pkgSave: cannot save type ",["typeof","expr"],"$ - ","expr"],["set[","reported","expr","true"]]],1],["function","storeList",["exlist","false","result","left","key"],["=","key",{array:[]}],["=","exlist",["reverse","exlist"]],["loop","false",[["empty","exlist"]],["=","left",["store",["pop","exlist"]]],["push","left","result"],[".","key","push",["left"]]],["=","key",[".","key","join",["$,"]]],[["deref","mapList","key"]],["set[","mapList","key",["preadjust","storenum","+",1]],["push","key","listList"],["set[","indexValue","storenum","result"],"storenum"],["function","storeProcedure",["procdef","false","key"],[[["builtin","procdef"],["return",["store",["tostring","procdef"]]]]],[["deref","wmapProcedure",[".","procdef",1]]],["=","key",["storeList","procdef"]],["set[","wmapProcedure",[".","procdef",1],["preadjust","storenum","+",1]],["push",[".","procdef",1],"listProcedure"],["set[","indexValue","storenum","key"],"storenum"],["function","objToList",["obj","false","keylist","trav","datlist"],["=","trav",["=","keylist",["xkeys","obj"]]],["loop","false",[["empty","trav"]],["push",["deref","obj",["pop","trav"]],"datlist"]],["list","keylist",["reverse","datlist"]]],["function","saveSymbol",["sym","sites","false","proc","props"],["=","proc",["getproc","sym"]],["=","props",["cdr","sym"]],[[["dictionary","props"],["=","props",["new","props"]],["set.","props",["`","\\.children"],"undefined"],["set.","props",["`","\\.parent"],"undefined"],[[["not",[".","options","comments"]],["set.","props",["`","\\.sourcemap"],"undefined"]],["set.",[".","props","\\.sourcemap"],["`","map"],"undefined"]],[["==",["length","props"],0],["=","props","false"]]]],["list",["store","sym"],["store",["car","sym"]],["store","props"],["storeProcedure","proc"],["store","sites"]]],["function","makeXlate",["false","rdex"],["function","buildXlate",["typeList","typeMap"],["=","typeList",["reverse","typeList"]],["loop","false",[["empty","typeList"]],["set[","xlate",["deref","typeMap",["pop","typeList"]],["postadjust","rdex","+",1]]]],["=","rdex",0],["=","xlate",["new","dictionary"]],["buildXlate","listSymbol","wmapSymbol"],["buildXlate","listUnintern","wmapUnintern"],["buildXlate","listString","mapString"],["buildXlate","listInteger","mapInteger"],["buildXlate","listFloat","mapFloat"],["buildXlate","listArray","wmapArray"],["buildXlate","listDictionary","wmapDictionary"],["buildXlate","listList","mapList"],["buildXlate","listProcedure","wmapProcedure"],["buildXlate","listDialect","mapDialect"],"rdex"],["function","renumber",["exlist","false","output"],[["integer","exlist"],["deref","xlate","exlist"]],[["atom","exlist"],"false"],["=","exlist",["reverse","exlist"]],["while","false",[["not",["tuple","exlist"]]],["push",["renumber",["pop","exlist"]],"output"]],"output"],["function","saveMaps",["false","count","maps"],["function","makeAtom",["typeList","typeMap","false","result"],["loop","false",[["empty","typeList"]],["push",["deref","indexValue",["deref","typeMap",["pop","typeList"]]],"result"],["preadjust","count","+",1]],"result"],["function","makeList",["typeList","typeMap","false","result"],["loop","false",[["empty","typeList"]],["push",["renumber",["deref","indexValue",["deref","typeMap",["pop","typeList"]]]],"result"],["preadjust","count","+",1]],"result"],["=","count",0],["=","maps",["list",["makeAtom","listSymbol","wmapSymbol"],["makeAtom","listUnintern","wmapUnintern"],["makeAtom","listString","mapString"],["makeAtom","listInteger","mapInteger"],["makeAtom","listFloat","mapFloat"],["makeList","listArray","wmapArray"],["makeList","listDictionary","wmapDictionary"],["makeList","listList","mapList"],["makeList","listProcedure","wmapProcedure"],["makeList","listDialect","mapDialect"]]],["cons","count","maps"]],["function","export",["symbols","false","sym","problist","trav","ptrav","plist","pitem","sitesym","symstates","sites"],["=","ptrav",["symlist",["namespace",["car","symbols"]]]],["loop","false",[["empty","ptrav"]],["=","pitem",["pop","ptrav"]],[[["cdr","pitem"],["=","problist",["cons","pitem","problist"]]]]],["=","symbols",["reverse","symbols"]],["=","trav","symbols"],["loop","false",[["empty","trav"]],["=","sym",["pop","trav"]],[[["not",["symbol","sym"]],["throw",["list","$error","pkgSave",["strcat","$non-symbol specified: ","sym"]]]]],[[["and",["eq","pkgns",["namespace","sym"]],["not",["member","sym","omitlist"]]],["=","ptrav",["totuple",["cdr","sym"]]],["loop","false",[["empty","ptrav"]],["=","pitem",["pop","ptrav"]],[[["and",["symbol",["cdr","pitem"]],["not",["member",["cdr","pitem"],"symbols"]]],["=","symbols",["cons",["cdr","pitem"],"symbols"]]]]]]]],["=","symbols",["reverse","symbols"]],["=","trav","symbols"],["loop","false",[["empty","trav"]],["=","sym",["pop","trav"]],["=","sites","false"],["=","ptrav","problist"],["loop","false",[["empty","ptrav"]],["=","sitesym",["pop","ptrav"]],["=","plist",["totuple",["cdr","sitesym"]]],["loop","false",[["empty","plist"]],["=","pitem",["pop","plist"]],[[["or",["eq",["car","pitem"],"sym"],["eq",["cdr","pitem"],"sym"]],["push",["list","sitesym",["car","pitem"],["cdr","pitem"]],"sites"]]]]],["push",["saveSymbol","sym","sites"],"symstates"]],["reverse","symstates"]],["call",["function","lambda",["false","header","rootnum","syms"],[[["not","options"],["=","options",{dictionary:{$comments:"true"}}]]],["=","reported",["new","weakmap"]],["=","storenum",0],["=","wmapSymbol",["new","weakmap"]],["=","wmapUnintern",["new","weakmap"]],["=","mapString",["new","dictionary"]],["=","mapInteger",["new","dictionary"]],["=","mapFloat",["new","dictionary"]],["=","wmapArray",["new","weakmap"]],["=","wmapDictionary",["new","weakmap"]],["=","mapList",["new","dictionary"]],["=","wmapProcedure",["new","weakmap"]],["=","mapDialect",["new","dictionary"]],["=","indexValue",["new","dictionary"]],[["not","pkgname"],"false"],[["not",["symbol","pkgname"]],["throw",["list","$error","pkgSave",["strcat","$package name not a symbol: ","pkgname"]]]],[["atom","roots"],["throw",["list","$error","pkgSave",["strcat","$no roots specified: ","roots"]]]],["=","pkgns",["namespace","pkgname"]],["=","goodns",["list","pkgns",[".",["nsactive","true"],1]]],["=","registry",[".",[".",[".",[".",[".","Naan","module"],"modlist","false"],"Lib"],"exports"],"Registry"]],["store","false"],["=","rootnum",["store","roots"]],["=","syms",["export","roots"]],["makeXlate"],["=","header",["list","$NaanPackage",1,1,"pkgname",[".","options","prereqs"]]],["list","header",["saveMaps"],["renumber","rootnum"],["renumber","syms"]]]]]),e._SetBindingList("pkgDecode",["function","pkgDecode",["pkg","intern","false","registry","maxdepth","mapSymbol","mapUnintern","mapString","mapInteger","mapFloat","mapDictionary","mapArray","mapList","mapProcedure","mapDialect","cache"],["function","lookupArray",["key","depth","false","exlist","adex","result"],["=","exlist",["lookup",["deref","mapArray","key"],"depth"]],["=","result",["new","array"]],["=","adex",0],["loop","false",[["empty","exlist"]],["set[","result",["postadjust","adex","+",1],["pop","exlist"]]],"result"],["function","lookupDictionary",["key","depth","false","exlist","keylist","datalist","result"],["=","exlist",["lookup",["deref","mapDictionary","key"],"depth"]],["=","result",["new","dictionary"]],["=","keylist",[".","exlist",0]],["=","datalist",[".","exlist",1]],["loop","false",[["empty","keylist"]],["set[","result",["pop","keylist"],["pop","datalist"]]],"result"],["function","lookupList",["key","depth","false","exlist","result"],["=","exlist",["deref","mapList","key"]],["loop","false",[["empty","exlist"]],["=","result",["cons",["lookup",["pop","exlist"],"depth"],"result"]]],["reverse","result"]],["function","lookupProcedure",["key","depth","false","procdef"],["=","procdef",["lookup",["deref","mapProcedure","key"],"depth"]],[["procedure","procdef"],["=","procdef",["enclose","procdef"]]],[["string","procdef"],["=","procdef","procdef"]]],["function","lookupDialect",["key","depth","false","pair","dialect"],["=","pair",["lookup",["deref","mapDialect","key"],"depth"]],["=","dialect",[".","registry","findName",[[".","pair",0]]]],[[["not","dialect"],["throw",[".","$pkgDecode: unregistered dialect: ","concat",[[".","pair",0]]]]]],["deref",[".",[".","dialect","ns"],"symbols"],["deref",[".",[".","dialect","ns"],"index"],[".","pair",1]]]],["function","lookup",["expr","depth","false","key","sexpr","result","cachekey"],[[["not","expr"],["return","expr"]]],["=","cachekey","expr"],[[["&&",["integer","cachekey"],["defined","cache","cachekey"]],["return",["deref","cache","cachekey"]]]],[[["not","depth"],["=","depth",1]]],["=","key","expr"],["=","result",["loop","false",[[[">","depth","maxdepth"],["throw",[".","$pkgDecode: cycle corruption: ","concat",["expr"]]]]],[["not",["atom","expr"]],["loop","false",[["empty","expr"]],["=","result",["cons",["lookup",["pop","expr"],["+","depth",1]],"result"]]],["reverse","result"]],[["not",["integer","expr"]],["throw",[".","$pkgDecode: can't lookup: ","concat",["expr"]]],"false"],[[["<","key",[".","mapSymbol","length"]],["=","sexpr",["deref","mapSymbol","key"]],[[["==","sexpr","$undefined"],"undefined"],[["==","sexpr","$null"],"null"],[["||","intern",["==","key",0],["interned","sexpr"]],["compress","sexpr"]],["unintern","sexpr"]],["break"]]],["preadjust","key","-",[".","mapSymbol","length"]],[["<","key",[".","mapUnintern","length"]],["unintern",["deref","mapUnintern","key"]]],["preadjust","key","-",[".","mapUnintern","length"]],[["<","key",[".","mapString","length"]],["deref","mapString","key"]],["preadjust","key","-",[".","mapString","length"]],[["<","key",[".","mapInteger","length"]],["deref","mapInteger","key"]],["preadjust","key","-",[".","mapInteger","length"]],[["<","key",[".","mapFloat","length"]],["deref","mapFloat","key"]],["preadjust","key","-",[".","mapFloat","length"]],[["<","key",[".","mapArray","length"]],["lookupArray","key",["+","depth",1]]],["preadjust","key","-",[".","mapArray","length"]],[["<","key",[".","mapDictionary","length"]],["lookupDictionary","key",["+","depth",1]]],["preadjust","key","-",[".","mapDictionary","length"]],[["<","key",[".","mapList","length"]],["lookupList","key",["+","depth",1]]],["preadjust","key","-",[".","mapList","length"]],[["<","key",[".","mapProcedure","length"]],["lookupProcedure","key",["+","depth",1]]],["preadjust","key","-",[".","mapProcedure","length"]],[["<","key",[".","mapDialect","length"]],["lookupDialect","key",["+","depth",1]]],["throw",[".","$pkgDecode: invalid refnum: ","concat",["expr"]]],[["identity","true"]]]],[["integer","cachekey"],["set[","cache","cachekey","result"]],"result"],["function","recurList",["expr","false","adex","result"],[["||",["array","expr"],["xobject","expr"]],["=","adex",[".","expr","length"]],["loop","false",[["<",["preadjust","adex","-",1],0]],["push",["recurList",["deref","expr","adex"]],"result"]],"result"],"expr"],["call",["function","lambda",["false","pkgname","firstVer","lastVer"],["=","registry",[".",[".",[".",[".",[".","Naan","module"],"modlist","false"],"Lib"],"exports"],"Registry"]],["=","firstVer",1],["=","lastVer",1],[[["and",["atom","pkg"],["not",["=","pkg",["recurList","pkg"]]]],["return","$invalid package argument"]]],["=","pkgname",[".",[".","pkg",0],3]],[[["or",["atom","pkg"],["!=",[".",[".","pkg",0],0],"$NaanPackage"],["not","pkgname"],["not",["name","pkgname"]]],["return","$package not recognized"]]],[[["or",[">",[".",[".","pkg",0],1],"lastVer"],["<",[".",[".","pkg",0],2],"firstVer"],["<=",[".",[".","pkg",1],0],0],["<=",["length",[".",[".","pkg",1],1]],0]],["return",[".","$package version not supported: ","concat",[[".",[".","pkg",0],1],"$-",[".",[".","pkg",0],2]]]]]],["=","maxdepth",[".",[".","pkg",1],0]],["=","mapSymbol",["new","array",[".",[".","pkg",1],1]]],["=","mapUnintern",["new","array",[".",[".","pkg",1],2]]],["=","mapString",["new","array",[".",[".","pkg",1],3]]],["=","mapInteger",["new","array",[".",[".","pkg",1],4]]],["=","mapFloat",["new","array",[".",[".","pkg",1],5]]],["=","mapArray",["new","array",[".",[".","pkg",1],6]]],["=","mapDictionary",["new","array",[".",[".","pkg",1],7]]],["=","mapList",["new","array",[".",[".","pkg",1],8]]],["=","mapProcedure",["new","array",[".",[".","pkg",1],9]]],["=","mapDialect",["new","array",[".",[".","pkg",1],10]]],["=","cache",{array:[]}],["catch",[["cons",["list","pkgname",["lookup",[".",[".","pkg",0],4]],["lookup",[".",[".","pkg",0],5]],["lookup",[".","pkg",2]]],["lookup",[".","pkg",3]]]],[[["string","exception"],"exception"]],"false"]]]]),e._SetBindingList("pkgExamine",["function","pkgExamine",["pkg","false","exlist","header","state"],["function","printProps",["dict","false","keylist","key"],["=","keylist",["keys","dict"]],["loop","false",[["empty","keylist"]],["=","key",["pop","keylist"]],[[["member","key",["`",["$.sourcemap","$.children","$.parent"]]],["printline","$            ","key"]],["printline","$            ","key","$, ",["xget","dict","key"]]]]],["=","exlist",["pkgDecode","pkg"]],[[["atom","exlist"],["printline",[".","$pkgExamine error:","concat",["exlist"]]],["return","false"]]],["=","header",["pop","exlist"]],["newline"],["printline","$=================================================="],["printline","$     package: ",[".","header",0]],["printline","$     version: ",[".","header",1]],["printline","$     prereqs: ",[".","header",2]],["printline","$root symbols: ",[".","header",3]],["printline","$      states: ",["length","exlist"]],["loop","false",[["empty","exlist"]],["=","state",["pop","exlist"]],[[["or",["atom","state"],["not",["name",[".","state",0]]]],["printline","$invalid symbol: ","state"]],["printline","$=================================================="],["printline","$   name: ",[".","state",0]],["printline","$--------------------------------------------------"],["printline","$         val: ",[".","state",1]],[[["dictionary",[".","state",2]],["printline","$        prop:"],["printProps",[".","state",2]]],["printline","$        prop: ",[".","state",2]]],["printline","$       sites: ",[".","state",4]],[["atom",[".","state",3]],["printline","$        proc: ",[".","state",3]]],["printline","$        proc: "],["printline",[".",[".",[".",[".",[".",[".","Naan","module"],"modlist","false"],"Lingo"],"exports"],"Base"],"print",[[".","state",3]]]]]],["printline","$=================================================="],[".","header",0]]),e._SetBindingList("pkgLoad",["function","pkgLoad",["pkg","options","false","exlist","header","roots","state","sym","sitelist","site","proc"],[[["not","options"],["=","options",{dictionary:{$localroots:"true",$intern:"true",$execute:"true"}}]]],["=","exlist",["pkgDecode","pkg",[".","options","intern"]]],[[["atom","exlist"],["printline",[".","$pkgLoad error:","concat",["exlist"]]],["return","false"]]],["=","header",["pop","exlist"]],["loop","false",[["empty","exlist"]],["=","state",["pop","exlist"]],[[["or",["atom","state"],["not",["name",[".","state",0]]]],["printline","$invalid symbol: ","state"]],[[[".","options","intern"],["=","sym",["compress",[".","state",0]]],[["not",["eq",[".","sym","namespace"],[".",["nsactive"],0]]],[[".","options","localroots"],["=","sym",["car",["letlocal","sym"]]]],["printline","$cannot overwrite symbol ","sym","$ in ",[".","sym","namespace"]],["continue"]]],["=","sym",["unintern",[".","state",0]]]],["push","sym","roots"],["assign","sym",[".","state",1]],["=","proc",[".","state",3]],["putproc","sym","proc"],["replacer","sym",[".","state",2]],[[[".","proc",1],["copyann",[".","proc",1],"sym"]]],["=","sitelist",[".","state",4]],["loop","false",[["empty","sitelist"]],["=","site",["pop","sitelist"]],["put",[".","site",0],[".","site",1],[".","site",2]]],[["&&",[".","options","execute"],[".","state",3],["get","sym","$.lingoInit"]],["call","sym"]]]],["reverse","roots"]]),e._SetBindingList("pkgToJsSource",["function","pkgToJsSource",["pkg","false","output","indent","atnl"],["=","output","$"],["=","indent",0],["=","atnl","true"],["function","indent",["adj"],["preadjust","indent","+","adj"]],["function","newline","false",["=","atnl","true"],["=","output",[".","output","concat",["cr"]]]],["function","write","strings",["call",["function","lambda",["false","cnt","str"],["while","false",[["not",["not",["empty","strings"]]]],[[["identity","atnl"],["=","atnl","false"],["=","cnt","indent"],["while","false",[["not",[">",["postadjust","cnt","-",1],0]]],["=","output",[".","output","concat",["$    "]]]]]],["=","str",["pop","strings"]],[[[">=",[".","str","indexOf",["$\n"]],0],["=","atnl","true"]]],["=","output",[".","output","concat",["str"]]]]]],"output"],["function","writeline","strings",["apply","write","strings"],["newline"]],["function","atomString",["expr","false","vertical"],[["||",["symbol","expr"],["string","expr"]],["makeSourceString","expr"]],[["float","expr"],[".",'$".',"concat",["expr",'$"']]],[["integer","expr"],"expr"],[["array","expr"],["arrayString","expr","vertical"]],[["dictionary","expr"],["dictionaryString","expr","vertical"]],["printline","$pkgToJsSource: unsupported atom: ","expr"],"$false"],["function","arrayString",["arr","false","adex","expr","separator","result"],["=","result","${array:["],["=","adex",0],["loop","false",[[">=","adex",[".","arr","length"]]],["=","expr",["deref","arr",["postadjust","adex","+",1]]],[[["not","separator"],[[["identity","vertical"],["=","separator","$,\n"]],["=","separator","$, "]],["=","vertical","true"],["=","result",[".","result","concat",[["exprString","expr"]]]]],["=","result",[".","result","concat",["separator",["exprString","expr"]]]]]],[".","result","concat",["$]}"]]],["function","dictionaryString",["obj","false","keylist","key","separator","result"],[[["cdr","obj"],["=","result",[".","${tag:","concat",[["atomString",["cdr","obj"]],"$,dictionary:{"]]]],["=","result","${dictionary:{"]],["=","keylist",["keys","obj"]],["loop","false",[["empty","keylist"]],["=","key",["pop","keylist"]],[[["not","separator"],[[["identity","vertical"],["=","separator","$,\n"]],["=","separator","$, "]],["=","vertical","true"],["=","result",[".","result","concat",[["atomString","key"],"$: ",["exprString",["deref","obj","key"]]]]]],["=","result",[".","result","concat",["separator",["atomString","key"],"$: ",["exprString",["deref","obj","key"]]]]]]],[".","result","concat",["$}}"]]],["function","openListString",["exlist","false","expr","comma","result"],[[["atom","exlist"],["return",["atomString","exlist"]]]],["=","comma","$"],["=","result","$"],["loop","false",[["empty","exlist"]],["=","expr",["pop","exlist"]],["=","result",[".","result","concat",["comma",["exprString","expr"]]]],["=","comma","$, "]],"result"],["function","paramListString",["exlist"],[[["atom","exlist"],["return",["atomString","exlist"]]]],["exprString","exlist"]],["function","exprString",["exlist"],[[["atom","exlist"],["return",["atomString","exlist"]]]],[".","$[","concat",[["openListString","exlist"],"$]"]]],["function","procsym",["sym"],["=","sym",["tostring","sym"]],["return",["||",["==","sym","$function"],["==","sym","$function&"],["==","sym","$macro"],["==","sym","$closure"],["==","sym","$let"],["==","sym","$let&"]]]],["function","writeCall",["exlist","more","false","opstr"],[[["atom","exlist"],["write",["atomString","exlist"]],["return"]]],["=","opstr",["tostring",["car","exlist"]]],[[["procsym",["car","exlist"]],["writeline","$[",["atomString",["car","exlist"]],"$, ",["atomString",["second","exlist"]],"$, ",["paramListString",["third","exlist"]],"$,"],["indent",1],["writeBody",["cdddr","exlist"]],["indent",-1],["write","$]"]],[["||",["==","opstr","$loop"],["==",[".",["car","exlist"],"proc"],[".",["`","loop"],"proc"]]],["writeline","$[",["atomString",["car","exlist"]],"$, ",["atomString",["second","exlist"]],"$,"],["indent",1],["writeBody",["cddr","exlist"]],["indent",-1],["write","$]"]],[["==","opstr","$call"],["writeline","$[",["atomString",["car","exlist"]],"$,"],["indent",1],[[["cddr","exlist"],["writeCall",["second","exlist"],"$,"],["indent",-1],["newline"],["write",["openListString",["cddr","exlist"]]]],["writeCall",["second","exlist"],"$"],["indent",-1]],["write","$]"]],[["==","opstr","$catch"],["writeline","$[",["atomString",["pop","exlist"]],"$,"],["indent",1],[[["car","exlist"],["write","$["],["indent",1],["writeBody",["car","exlist"],"$"],["indent",-1],["write","$],\n"]],["writeline",["atomString","false"],"$,"]],[[["second","exlist"],["write","$["],["writeBody",["second","exlist"],"$"],["write","$],\n"]],["writeline",["atomString","false"],"$,"]],[[["third","exlist"],["write","$["],["indent",1],["writeBody",["third","exlist"],"$"],["indent",-1],["write","$]"]],["write",["atomString","false"]]],["indent",-1],["write","$]"]],[["||",["==","opstr","$quote"],["==","opstr","$`"]],["write",["exprString","exlist"]]],["write",[".","$[","concat",[["openListString","exlist"],"$]"]]]],["write","more"]],["function","writeBody",["exlist","false","expr","more"],["loop","false",[["empty","exlist"]],["=","expr",["pop","exlist"]],[[["empty","exlist"],["=","more","$"]],["=","more","$,\n"]],[[["atom","expr"],["write",["atomString","expr"],"more"]],[["atom",["car","expr"]],["writeCall","expr","more"]],[["atom",["caar","expr"]],[["cdr","expr"],["write","$["],["writeCall",["car","expr"],"$,\n"],["indent",1],["writeBody",["cdr","expr"]],["indent",-1],["write","$]","more"]],["write","$[",["exprString",["car","expr"]],"$]","more"]],["writeline","$["],["indent",1],["writeBody",["list",["car","expr"]]],[[["cdr","expr"],["writeline","$,"],["writeBody",["cdr","expr"]]]],["indent",-1],["write","$]","more"]]]],["function","writeProc",["sym","proc"],["writeline","$ninti._SetBindingList(",["atomString","sym"],"$,"],["indent",1],[[["string","proc"],["writeline","proc"]],["writeline","$[",["atomString",["car","proc"]],"$, ",["atomString",["second","proc"]],"$, ",["paramListString",["third","proc"]],"$,"],["indent",1],["writeBody",["cdddr","proc"]],["indent",-1],["writeline","$]"]],["indent",-1],["writeline","$);"]],["function","writeProps",["sym","props","false","prop","preceded","header"],[[["atom","props"],["return"]]],["=","preceded","$"],["while","false",[["not",["not",["empty","props"]]]],["=","prop",["pop","props"]],[[["==",["tostring",["car","prop"]],"$.sourcemap"],["continue"]]],[[["==",["tostring",["car","prop"]],"$.children"],["continue"]]],[[["not","header"],["=","header","true"],["writeline","$ninti._AddPropertyList(",["atomString","sym"],"$,"],["indent",1],["write","$["]]],["write","preceded","$[",["atomString",["car","prop"]],"$, ",["exprString",["cdr","prop"]],"$]"],["=","preceded","$,\n"]],[[["not","header"],["return"]]],["write","$]"],["indent",-1],["newline"],["writeline","$);"]],["function","writeValue",["sym","value"],["writeline","$ninti._SetValue(",["atomString","sym"],"$, ",["exprString","value"],"$);"]],["call",["function","lambda",["false","exlist","header","state","proc"],["=","exlist",["pkgDecode","pkg"]],[[["atom","exlist"],["printline",[".","$pkgToJsSource:","concat",["exlist"]]],["return","false"]]],["=","header",["pop","exlist"]],["indent",1],["writeline","$/*"],["writeline","$ * ",[".",[".","pkg",0],3]],["writeline","$ *"],["writeline","$ */"],["newline"],["loop","false",[["empty","exlist"]],["=","state",["pop","exlist"]],[[["or",["atom","state"],["not",["name",[".","state",0]]]],["printline","$invalid symbol: ","state"]],[[["!=",[".","state",1],[".","state",0]],["writeValue",[".","state",0],[".","state",1]]]],[[[".","state",2],["writeProps",[".","state",0],["totuple",[".","state",2]]]]],["=","proc",[".","state",3]],[[["tuple","proc"],["writeProc",[".","state",0],"proc"]]],[["||",[".","state",2],["tuple","proc"]],["newline"]]]],["indent",-1],"output"]]]),e._AddPropertyList("PackagerInit",[["$.lingoInit","true"]]),e._SetBindingList("PackagerInit",["function","PackagerInit",["false","manifest"],["=","manifest",["`",["MakeComponentJS","MakePackage","makeSourceString","WritePackageJS","pkgSave","pkgDecode","pkgExamine","pkgLoad","pkgToJsSource","PackagerInit"]]],[".",[".","Naan","module"],"build",["$Util","$Packager",["function","lambda",["modobj","compobj"],["set.","compobj",["`","manifest"],"manifest"],["set.",[".","modobj","exports"],["`","MakeComponentJS"],"MakeComponentJS"],["set.",[".","modobj","exports"],["`","WritePackageJS"],"WritePackageJS"],["set.",[".","modobj","exports"],["`","pkgSave"],"pkgSave"],["set.",[".","modobj","exports"],["`","pkgExamine"],"pkgExamine"],["set.",[".","modobj","exports"],["`","pkgLoad"],"pkgLoad"],["set.",[".","modobj","exports"],["`","pkgToJsSource"],"pkgToJsSource"],["set.",[".","Naan","module"],["`","MakeComponentJS"],"MakeComponentJS"]]]]]),e._Execute(["PackagerInit"]),e._SetNamespace(t,!0)}}("undefined"==typeof exports?this.Naanlang||(this.Naanlang={}):exports);

/* Copyright (c) 2017-2022 by Zulch Laboratories, Inc. */
!function(t){t.BootRoot=function(t){"use strict";t._SetBindingList("append",["function","append","lists",["function","append1",["items","result"],[["atom","items"],"result"],["cons",["car","items"],["append1",["cdr","items"],"result"]]],["function","append2",["lists","result"],[["atom","lists"],"result"],[["atom",["car","lists"]],["cons",["car","lists"],["append2",["cdr","lists"],"result"]]],["append1",["car","lists"],["append2",["cdr","lists"],"result"]]],["append2","lists"]]),t._Export("tuple","append"),t._SetBindingList("body",["macro","body","expr",["eval",["list","cond",["cons",["identity","true"],"false","expr"]]]]),t._Export("exec","body"),t._SetBindingList("sudo",["macro","sudo",["expr"],["eval","expr"]]),t._Export("local","sudo"),t._SetBindingList("evalactive",["function","evalactive",["expr"],["cond",[["nsrights",["first",["nsactive"]]],["eval","expr"]]]]),t._Export("local","evalactive"),t._SetBindingList("identity",["function","identity",["expr"],"expr"])},t.BootPlay=function(t){t._SetNamespace("Play");var e=t._InheritNamespace("Lang_Lingo");t._SetBindingList("PlayInit",["function&","PlayInit",["false","manifest","export"],["=","manifest",["`",["PlayInit"]]],[".",[".","Naan","module"],"build",["$Play","$Play",["function&","lambda",["modobj","compobj"],["xset","compobj",["`","manifest"],"manifest"]]]]]),t._Execute(["PlayInit"]),t._SetNamespace(e)}}("undefined"==typeof exports?this.Naanlang||(this.Naanlang={}):exports);

/* Copyright (c) 2017-2022 by Zulch Laboratories, Inc. */
!function(c){c.Naanlib=function t(){"use strict";if(!(this instanceof t))return new t;function n(t,e){return t?c:c.require?c.require(e):require(e)}var o,i,e=n(c.NaanInterpreter,"./naan_interpreter.js"),r="",u=!1,a=new e.NaanInterpreter,s=100;this.escape=function(){a.Escape(),d()},this.onText=function(t){o=t},this.textLine=function(t){u=!0,r+=t,d()},this.status=function(t){return a.Status(t)},this.saveState=function(t){return a.StateSave(t)},this.banner=function(){return a.Banner()},this.start=function(t){var e="\n";if(t){if("string"==typeof t.state&&!a.StateLoad(t.state))return!1;"string"==typeof t.cmd&&(e=t.cmd),t.noWelcome&&(s=!1)}return t&&"string"==typeof t.state||i||((i=n(c.BootRoot,"./naan_start.js")).BootRoot(a),n(c.BootModule,"./naan_module.js").BootModule(a),n(c.BootLingo,"./naan_lingo.js").BootLingo(a),i.BootPlay(a)),a.Process(e,!1,s),100==s&&(s=101),function(){for(var t;""!==(t=a.RunOutput())&&o&&o(t),a.Run(););}(),d(),!0};var f={n:a,o:Object,i:function(t){return import(t)}};function d(){var t=0;if(!a.Run()){if(0===r.length)return void(t=0);var e=r;r="",a.Process(e,u,s),100==s&&(s=101)}"undefined"!=typeof setImmediate?setImmediate(d):(setTimeout(d,0),1==++t&&setTimeout(function(){d()},2))}this.js=f,"undefined"!=typeof window?(f.w=window,f.r=c.require):"undefined"!=typeof self?(f.w=self,f.s=self,f.r=c.require):"undefined"!=typeof global&&("undefined"!=typeof __dirname&&(f.d=__dirname),f.g=global,f.r=require),a.On("init-load",function(){a._AddNamedObject("js",f)}),a.On("console-out",function(t,e){o&&o(e)}),a.On("interrupted",function(t){Promise.resolve().then(d)}),a.On("debug-write",function(t,e){o&&o(t,e)}),a.StateDefault()}}("undefined"==typeof exports?this.Naanlang||(this.Naanlang={}):exports);

// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
!function(n){n.require=function(e){"use strict";var r={"./naan_interpreter.js":n.NaanInterpreter,"./bigint.js":n.LeemonBigIntegerLib,"./naan_io.js":n.NaanChannel,"./naan_lingo.js":n.BootLingo,"./naan_module.js":n.BootModule,"./naan_start.js":n.BootRoot};function A(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+typeof e)}function g(e,r){for(var t,n="",o=0,i=-1,a=0,l=0;l<=e.length;++l){if(l<e.length)t=e.charCodeAt(l);else{if(47===t||92===t)break;t=47}if(47===t||92===t){if(i!==l-1&&1!==a)if(i!==l-1&&2===a){if(n.length<2||2!==o||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(2<n.length){var h=n.lastIndexOf("\\");if(h!==n.length-1){o=-1===h?(n="",0):(n=n.slice(0,h)).length-1-n.lastIndexOf("\\"),i=l,a=0;continue}}else if(2===n.length||1===n.length){n="",i=l,a=o=0;continue}r&&(0<n.length?n+="\\..":n="..",o=2)}else 0<n.length?n+="\\"+e.slice(i+1,l):n=e.slice(i+1,l),o=l-i-1;i=l,a=0}else 46===t&&-1!==a?++a:a=-1}return n}function o(e,r){for(var t,n="",o=0,i=-1,a=0,l=0;l<=e.length;++l){if(l<e.length)t=e.charCodeAt(l);else{if(47===t)break;t=47}if(47===t){if(i!==l-1&&1!==a)if(i!==l-1&&2===a){if(n.length<2||2!==o||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(2<n.length){var h=n.lastIndexOf("/");if(h!==n.length-1){o=-1===h?(n="",0):(n=n.slice(0,h)).length-1-n.lastIndexOf("/"),i=l,a=0;continue}}else if(2===n.length||1===n.length){n="",i=l,a=o=0;continue}r&&(0<n.length?n+="/..":n="..",o=2)}else 0<n.length?n+="/"+e.slice(i+1,l):n=e.slice(i+1,l),o=l-i-1;i=l,a=0}else 46===t&&-1!==a?++a:a=-1}return n}function t(e,r){var t=r.dir||r.root,n=r.base||(r.name||"")+(r.ext||"");return t?t===r.root?t+n:t+e+n:n}const C={resolve:function(){for(var e="",r="",t=!1,n=arguments.length-1;-1<=n;n--){var o=0<=n?arguments[n]:"\\";if(A(o),0!==o.length){var i=o.length,a=0,l=o.charCodeAt(0),h="",f=!1;if(1<i)if(47===l||92===l)if(f=!0,47===(l=o.charCodeAt(1))||92===l){for(var c=2,s=c;c<i&&(47!==(l=o.charCodeAt(c))&&92!==l);++c);if(c<i&&c!==s){for(var d=o.slice(s,c),s=c;c<i&&(47===(l=o.charCodeAt(c))||92===l);++c);if(c<i&&c!==s){for(s=c;c<i&&(47!==(l=o.charCodeAt(c))&&92!==l);++c);c===i?(h="\\\\"+d+"\\"+o.slice(s),a=c):c!==s&&(h="\\\\"+d+"\\"+o.slice(s,c),a=c)}}}else a=1;else(65<=l&&l<=90||97<=l&&l<=122)&&58===o.charCodeAt(1)&&(h=o.slice(0,2),(a=2)<i&&(47!==(l=o.charCodeAt(2))&&92!==l||(f=!0,a=3)));else 47!==l&&92!==l||(a=1,f=!0);if(!(0<h.length&&0<e.length&&h.toLowerCase()!==e.toLowerCase())&&(0===e.length&&0<h.length&&(e=h),t||(r=o.slice(a)+"\\"+r,t=f),0<e.length&&t))break}}return e+(t?"\\":"")+(r=g(r,!t))||"."},normalize:function(e){A(e);var r=e.length;if(0===r)return".";var t,n=0,o=e.charCodeAt(0),i=!1;if(1<r)if(47===o||92===o)if(i=!0,47===(o=e.charCodeAt(1))||92===o){for(var a=2,l=a;a<r&&(47!==(o=e.charCodeAt(a))&&92!==o);++a);if(a<r&&a!==l){for(var h=e.slice(l,a),l=a;a<r&&(47===(o=e.charCodeAt(a))||92===o);++a);if(a<r&&a!==l){for(l=a;a<r&&(47!==(o=e.charCodeAt(a))&&92!==o);++a);if(a===r)return"\\\\"+h+"\\"+e.slice(l)+"\\";a!==l&&(t="\\\\"+h+"\\"+e.slice(l,a),n=a)}}}else n=1;else(65<=o&&o<=90||97<=o&&o<=122)&&58===e.charCodeAt(1)&&(t=e.slice(0,2),(n=2)<r&&(47!==(o=e.charCodeAt(2))&&92!==o||(i=!0,n=3)));else if(47===o||92===o)return"\\";l=47===(o=e.charCodeAt(r-1))||92===o,n=n<r?g(e.slice(n),!i):"";return 0!==n.length||i||(n="."),0<n.length&&l&&(n+="\\"),void 0===t?i?0<n.length?"\\"+n:"\\":0<n.length?n:"":i?0<n.length?t+"\\"+n:t+"\\":0<n.length?t+n:t},isAbsolute:function(e){A(e);var r=e.length;if(0===r)return!1;var t=e.charCodeAt(0);return 47===t||92===t||(65<=t&&t<=90||97<=t&&t<=122)&&2<r&&58===e.charCodeAt(1)&&(47===(t=e.charCodeAt(2))||92===t)},join:function(){if(0===arguments.length)return".";for(var e,r,t=0;t<arguments.length;++t){var n=arguments[t];A(n),0<n.length&&(void 0===e?e=r=n:e+="\\"+n)}if(void 0===e)return".";var o,i=!0,a=0,l=r.charCodeAt(0);if(47!==l&&92!==l||(++a,1<(o=r.length)&&(47!==(l=r.charCodeAt(1))&&92!==l||(++a,2<o&&(47===(l=r.charCodeAt(2))||92===l?++a:i=!1)))),i){for(;a<e.length&&(47===(l=e.charCodeAt(a))||92===l);++a);2<=a&&(e="\\"+e.slice(a))}return C.normalize(e)},relative:function(e,r){if(A(e),A(r),e===r)return"";var t=C.resolve(e),n=C.resolve(r);if(t===n)return"";if((e=t.toLowerCase())===(r=n.toLowerCase()))return"";for(var o=0;o<e.length&&92===e.charCodeAt(o);++o);for(var i=e.length;o<i-1&&92===e.charCodeAt(i-1);--i);for(var a=i-o,l=0;l<r.length&&92===r.charCodeAt(l);++l);for(var h=r.length;l<h-1&&92===r.charCodeAt(h-1);--h);for(var f=h-l,c=a<f?a:f,s=-1,d=0;d<=c;++d){if(d===c){if(c<f){if(92===r.charCodeAt(l+d))return n.slice(l+d+1);if(2===d)return n.slice(l+d)}c<a&&(92===e.charCodeAt(o+d)?s=d:2===d&&(s=3));break}var g=e.charCodeAt(o+d);if(g!==r.charCodeAt(l+d))break;92===g&&(s=d)}if(d!==c&&-1===s)return n;var u="";for(-1===s&&(s=0),d=o+s+1;d<=i;++d)d!==i&&92!==e.charCodeAt(d)||(0===u.length?u+="..":u+="\\..");return 0<u.length?u+n.slice(l+s,h):(l+=s,92===n.charCodeAt(l)&&++l,n.slice(l,h))},toNamespacedPath:function(e){if("string"!=typeof e)return e;if(0===e.length)return"";const r=C.resolve(e);if(3<=r.length){var t=r.charCodeAt(0);if(92===t){if(92===r.charCodeAt(1)&&63!==(t=r.charCodeAt(2))&&46!==t)return"\\\\?\\UNC\\"+r.slice(2)}else if((65<=t&&t<=90||97<=t&&t<=122)&&58===r.charCodeAt(1)&&92===r.charCodeAt(2))return"\\\\?\\"+r}return e},dirname:function(e){A(e);var r=e.length;if(0===r)return".";var t=-1,n=-1,o=!0,i=0,a=e.charCodeAt(0);if(1<r)if(47===a||92===a){if(t=i=1,47===(a=e.charCodeAt(1))||92===a){for(var l=2,h=l;l<r&&(47!==(a=e.charCodeAt(l))&&92!==a);++l);if(l<r&&l!==h){for(h=l;l<r&&(47===(a=e.charCodeAt(l))||92===a);++l);if(l<r&&l!==h){for(h=l;l<r&&(47!==(a=e.charCodeAt(l))&&92!==a);++l);if(l===r)return e;l!==h&&(t=i=l+1)}}}}else(65<=a&&a<=90||97<=a&&a<=122)&&58===e.charCodeAt(1)&&(t=i=2)<r&&(47!==(a=e.charCodeAt(2))&&92!==a||(t=i=3));else if(47===a||92===a)return e;for(var f=r-1;i<=f;--f)if(47===(a=e.charCodeAt(f))||92===a){if(!o){n=f;break}}else o=!1;if(-1===n){if(-1===t)return".";n=t}return e.slice(0,n)},basename:function(e,r){if(void 0!==r&&"string"!=typeof r)throw new errors.TypeError("ERR_INVALID_ARG_TYPE","ext","string");A(e);var t,n=0,o=-1,i=!0;if(2<=e.length&&((65<=(t=e.charCodeAt(0))&&t<=90||97<=t&&t<=122)&&58===e.charCodeAt(1)&&(n=2)),void 0!==r&&0<r.length&&r.length<=e.length){if(r.length===e.length&&r===e)return"";for(var a=r.length-1,l=-1,h=e.length-1;n<=h;--h){var f=e.charCodeAt(h);if(47===f||92===f){if(!i){n=h+1;break}}else-1===l&&(i=!1,l=h+1),0<=a&&(f===r.charCodeAt(a)?-1==--a&&(o=h):(a=-1,o=l))}return n===o?o=l:-1===o&&(o=e.length),e.slice(n,o)}for(h=e.length-1;n<=h;--h){var c=e.charCodeAt(h);if(47===c||92===c){if(!i){n=h+1;break}}else-1===o&&(i=!1,o=h+1)}return-1===o?"":e.slice(n,o)},extname:function(e){A(e);var r,t=0,n=-1,o=0,i=-1,a=!0,l=0;2<=e.length&&(r=e.charCodeAt(0),58===e.charCodeAt(1)&&(65<=r&&r<=90||97<=r&&r<=122)&&(t=o=2));for(var h=e.length-1;t<=h;--h){var f=e.charCodeAt(h);if(47===f||92===f){if(a)continue;o=h+1;break}-1===i&&(a=!1,i=h+1),46===f?-1===n?n=h:1!==l&&(l=1):-1!==n&&(l=-1)}return-1===n||-1===i||0===l||1===l&&n===i-1&&n===o+1?"":e.slice(n,i)},format:function(e){if(null===e||"object"!=typeof e)throw new errors.TypeError("ERR_INVALID_ARG_TYPE","pathObject","Object",e);return t("\\",e)},parse:function(e){A(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return r;var t=e.length,n=0,o=e.charCodeAt(0);if(1<t){if(47===o||92===o){if(n=1,47===(o=e.charCodeAt(1))||92===o){for(var i=2,a=i;i<t&&(47!==(o=e.charCodeAt(i))&&92!==o);++i);if(i<t&&i!==a){for(a=i;i<t&&(47===(o=e.charCodeAt(i))||92===o);++i);if(i<t&&i!==a){for(a=i;i<t&&(47!==(o=e.charCodeAt(i))&&92!==o);++i);i===t?n=i:i!==a&&(n=i+1)}}}}else if((65<=o&&o<=90||97<=o&&o<=122)&&58===e.charCodeAt(1)){if(!((n=2)<t))return r.root=r.dir=e,r;if(47===(o=e.charCodeAt(2))||92===o){if(3===t)return r.root=r.dir=e,r;n=3}}}else if(47===o||92===o)return r.root=r.dir=e,r;0<n&&(r.root=e.slice(0,n));for(var l=-1,h=n,f=-1,c=!0,s=e.length-1,d=0;n<=s;--s){if(47===(o=e.charCodeAt(s))||92===o){if(c)continue;h=s+1;break}-1===f&&(c=!1,f=s+1),46===o?-1===l?l=s:1!==d&&(d=1):-1!==l&&(d=-1)}return-1===l||-1===f||0===d||1===d&&l===f-1&&l===h+1?-1!==f&&(r.base=r.name=e.slice(h,f)):(r.name=e.slice(h,l),r.base=e.slice(h,f),r.ext=e.slice(l,f)),r.dir=0<h&&h!==n?e.slice(0,h-1):r.root,r},sep:"\\",delimiter:";",win32:null,posix:null},d={resolve:function(){for(var e="",r=!1,t=arguments.length-1;-1<=t&&!r;t--){var n=0<=t?arguments[t]:"";A(n),0!==n.length&&(e=n+"/"+e,r=47===n.charCodeAt(0))}return e=o(e,!r),r?0<e.length?"/"+e:"/":0<e.length?e:"."},normalize:function(e){if(A(e),0===e.length)return".";var r=47===e.charCodeAt(0),t=47===e.charCodeAt(e.length-1);return 0!==(e=o(e,!r)).length||r||(e="."),0<e.length&&t&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return A(e),0<e.length&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,r=0;r<arguments.length;++r){var t=arguments[r];A(t),0<t.length&&(void 0===e?e=t:e+="/"+t)}return void 0===e?".":d.normalize(e)},relative:function(e,r){if(A(e),A(r),e===r)return"";if((e=d.resolve(e))===(r=d.resolve(r)))return"";for(var t=1;t<e.length&&47===e.charCodeAt(t);++t);for(var n=e.length,o=n-t,i=1;i<r.length&&47===r.charCodeAt(i);++i);for(var a=r.length-i,l=o<a?o:a,h=-1,f=0;f<=l;++f){if(f===l){if(l<a){if(47===r.charCodeAt(i+f))return r.slice(i+f+1);if(0===f)return r.slice(i+f)}else l<o&&(47===e.charCodeAt(t+f)?h=f:0===f&&(h=0));break}var c=e.charCodeAt(t+f);if(c!==r.charCodeAt(i+f))break;47===c&&(h=f)}for(var s="",f=t+h+1;f<=n;++f)f!==n&&47!==e.charCodeAt(f)||(0===s.length?s+="..":s+="/..");return 0<s.length?s+r.slice(i+h):(i+=h,47===r.charCodeAt(i)&&++i,r.slice(i))},toNamespacedPath:function(e){return e},dirname:function(e){if(A(e),0===e.length)return".";for(var r=e.charCodeAt(0),t=47===r,n=-1,o=!0,i=e.length-1;1<=i;--i)if(47===e.charCodeAt(i)){if(!o){n=i;break}}else o=!1;return-1===n?t?"/":".":t&&1===n?"//":e.slice(0,n)},basename:function(e,r){if(void 0!==r&&"string"!=typeof r)throw new errors.TypeError("ERR_INVALID_ARG_TYPE","ext","string");A(e);var t=0,n=-1,o=!0;if(void 0!==r&&0<r.length&&r.length<=e.length){if(r.length===e.length&&r===e)return"";for(var i=r.length-1,a=-1,l=e.length-1;0<=l;--l){var h=e.charCodeAt(l);if(47===h){if(!o){t=l+1;break}}else-1===a&&(o=!1,a=l+1),0<=i&&(h===r.charCodeAt(i)?-1==--i&&(n=l):(i=-1,n=a))}return t===n?n=a:-1===n&&(n=e.length),e.slice(t,n)}for(l=e.length-1;0<=l;--l)if(47===e.charCodeAt(l)){if(!o){t=l+1;break}}else-1===n&&(o=!1,n=l+1);return-1===n?"":e.slice(t,n)},extname:function(e){A(e);for(var r=-1,t=0,n=-1,o=!0,i=0,a=e.length-1;0<=a;--a){var l=e.charCodeAt(a);if(47===l){if(o)continue;t=a+1;break}-1===n&&(o=!1,n=a+1),46===l?-1===r?r=a:1!==i&&(i=1):-1!==r&&(i=-1)}return-1===r||-1===n||0===i||1===i&&r===n-1&&r===t+1?"":e.slice(r,n)},format:function(e){if(null===e||"object"!=typeof e)throw new errors.TypeError("ERR_INVALID_ARG_TYPE","pathObject","Object",e);return t("/",e)},parse:function(e){A(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return r;for(var t=e.charCodeAt(0),n=47===t,o=n?(r.root="/",1):0,i=-1,a=0,l=-1,h=!0,f=e.length-1,c=0;o<=f;--f){if(47===(t=e.charCodeAt(f))){if(h)continue;a=f+1;break}-1===l&&(h=!1,l=f+1),46===t?-1===i?i=f:1!==c&&(c=1):-1!==i&&(c=-1)}return-1===i||-1===l||0===c||1===c&&i===l-1&&i===a+1?-1!==l&&(r.base=r.name=0===a&&n?e.slice(1,l):e.slice(a,l)):(0===a&&n?(r.name=e.slice(1,i),r.base=e.slice(1,l)):(r.name=e.slice(a,i),r.base=e.slice(a,l)),r.ext=e.slice(i,l)),0<a?r.dir=e.slice(0,a-1):n&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};return d.win32=C.win32=C,d.posix=C.posix=d,r.path=d,r[e]}}("undefined"==typeof exports?this.Naanlang||(this.Naanlang={}):exports);

})(typeof exports === 'undefined'? this['Naanlang']={}: exports);
